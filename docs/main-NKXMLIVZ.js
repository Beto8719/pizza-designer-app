import{a as C_,b as Ku,c as D_,d as ws,e as Wu,f as Dc,g as S_,h as R_,i as Qu,j as ze,k as Li,l as fn,m as Sc,n as Is,o as M_,p as P_,q as ei,r as Nt}from"./chunk-TW3VWNQB.js";import{$ as K,$a as Dt,$b as xs,A as vt,Aa as ms,Ab as u_,B as Ar,Ba as o_,Bb as wc,C as Ni,Ca as Ct,Cb as Ic,D as Mu,Da as en,Db as Uu,E as Pu,Ea as fs,Eb as Ec,F as Mn,Fa as gc,Fb as Bu,G as Xb,Ga as ps,Gb as Tc,H as uc,Ha as le,Hb as ys,I as ls,Ia as B,Ib as h_,J as dn,Ja as Rr,Jb as Ac,K as Nu,Ka as s_,Kb as m_,L as Zb,La as bc,Lb as qu,M as hc,Ma as _c,Mb as mn,N as kr,Na as vc,Nb as f_,O as ds,Oa as J,Ob as p_,P as mc,Pa as Lu,Pb as g_,Q as Zn,Qa as a_,Qb as wt,R as rt,Ra as hn,Rb as $u,S as Fu,Sa as Nn,Sb as b_,T as Gt,Ta as c_,Tb as Vi,U as He,Ua as ju,Ub as __,V as Ae,Va as zu,Vb as v_,W as Jn,Wa as je,Wb as Se,X as Fi,Xa as yt,Xb as y_,Y,Ya as Ne,Yb as Gu,Z as ae,Za as Fe,Zb as x_,_ as Jb,_a as yc,_b as w_,a as as,aa as Ou,ab as G,ac as Hu,b as Hb,ba as F,bb as H,bc as kc,c as Jt,ca as U,cb as ve,cc as Cc,d as Cu,da as us,db as tn,dc as I_,e as Du,ea as e_,eb as Oi,ec as Fr,f as Le,fa as hs,fb as Ee,fc as E_,g as Pt,ga as de,gb as xe,gc as T_,h as ac,ha as $e,hb as Ht,hc as On,i as Kb,ia as ce,ib as Oe,ic as A_,j as ln,ja as be,jb as Fn,jc as k_,k as Pi,ka as Cr,kb as jt,l as Er,la as t_,lb as Ke,m as Me,ma as Dr,mb as We,mc as N_,n as X,na as Pn,nb as gs,nc as F_,o as cs,oa as un,ob as ge,p as Wb,pa as ot,pb as Mr,pc as Yu,q as Qb,qa as st,qb as Pr,qc as O_,r as cc,ra as n_,rb as bs,rc as V_,s as te,sa as i_,sb as _s,t as Tr,ta as Sr,tb as vs,u as Lt,ua as fc,ub as zt,v as Su,va as pc,vb as xt,w as lc,wa as Vu,wb as l_,x as Ru,xa as Pe,xb as Nr,y as Yb,ya as dt,yb as d_,z as dc,za as r_,zb as xc}from"./chunk-CLTQS4OR.js";import{a as V,b as De,c as Gb,e as ku,f as k}from"./chunk-ZOT2UW4I.js";var Mc=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),o=r.toLowerCase(),s=t.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(c=>o.indexOf(c)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var G_=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(G_||{}),Xu=class{constructor(e,t=H_.Ok,i="OK"){this.headers=e.headers||new Mc,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var Pc=class n extends Xu{constructor(e={}){super(e),this.type=G_.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var H_=function(n){return n[n.Continue=100]="Continue",n[n.SwitchingProtocols=101]="SwitchingProtocols",n[n.Processing=102]="Processing",n[n.EarlyHints=103]="EarlyHints",n[n.Ok=200]="Ok",n[n.Created=201]="Created",n[n.Accepted=202]="Accepted",n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",n[n.NoContent=204]="NoContent",n[n.ResetContent=205]="ResetContent",n[n.PartialContent=206]="PartialContent",n[n.MultiStatus=207]="MultiStatus",n[n.AlreadyReported=208]="AlreadyReported",n[n.ImUsed=226]="ImUsed",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.Found=302]="Found",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.Unused=306]="Unused",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.LengthRequired=411]="LengthRequired",n[n.PreconditionFailed=412]="PreconditionFailed",n[n.PayloadTooLarge=413]="PayloadTooLarge",n[n.UriTooLong=414]="UriTooLong",n[n.UnsupportedMediaType=415]="UnsupportedMediaType",n[n.RangeNotSatisfiable=416]="RangeNotSatisfiable",n[n.ExpectationFailed=417]="ExpectationFailed",n[n.ImATeapot=418]="ImATeapot",n[n.MisdirectedRequest=421]="MisdirectedRequest",n[n.UnprocessableEntity=422]="UnprocessableEntity",n[n.Locked=423]="Locked",n[n.FailedDependency=424]="FailedDependency",n[n.TooEarly=425]="TooEarly",n[n.UpgradeRequired=426]="UpgradeRequired",n[n.PreconditionRequired=428]="PreconditionRequired",n[n.TooManyRequests=429]="TooManyRequests",n[n.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",n[n.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout",n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported",n[n.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",n[n.InsufficientStorage=507]="InsufficientStorage",n[n.LoopDetected=508]="LoopDetected",n[n.NotExtended=510]="NotExtended",n[n.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",n}(H_||{});var uT=new K("");var L_="b",j_="h",z_="s",U_="st",B_="u",q_="rt",Rc=new K(""),hT=["GET","HEAD"];function mT(n,e){let f=U(Rc),{isCacheActive:t}=f,i=Gb(f,["isCacheActive"]),{transferCache:r,method:o}=n;if(!t||o==="POST"&&!i.includePostRequests&&!r||o!=="POST"&&!hT.includes(o)||r===!1||i.filter?.(n)===!1)return e(n);let s=U(gc),c=pT(n),l=s.get(c,null),u=i.includeHeaders;if(typeof r=="object"&&r.includeHeaders&&(u=r.includeHeaders),l){let{[L_]:g,[q_]:w,[j_]:R,[z_]:S,[U_]:M,[B_]:q}=l,Q=g;switch(w){case"arraybuffer":Q=new TextEncoder().encode(g).buffer;break;case"blob":Q=new Blob([g]);break}let L=new Mc(R);return X(new Pc({body:Q,headers:L,status:S,statusText:M,url:q}))}let m=On(U(Ct));return e(n).pipe(He(g=>{g instanceof Pc&&m&&s.set(c,{[L_]:g.body,[j_]:fT(g.headers,u),[z_]:g.status,[U_]:g.statusText,[B_]:g.url||"",[q_]:n.responseType})}))}function fT(n,e){if(!e)return{};let t={};for(let i of e){let r=n.getAll(i);r!==null&&(t[i]=r)}return t}function $_(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function pT(n){let{params:e,method:t,responseType:i,url:r}=n,o=$_(e),s=n.serializeBody();s instanceof URLSearchParams?s=$_(s):typeof s!="string"&&(s="");let c=[t,i,r,s,o].join("|"),l=gT(c);return l}function gT(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function K_(n){return[{provide:Rc,useFactory:()=>(vc("NgHttpTransferCache"),V({isCacheActive:!0},n))},{provide:uT,useValue:mT,multi:!0,deps:[gc,Rc]},{provide:Tc,multi:!0,useFactory:()=>{let e=U(ys),t=U(Rc);return()=>{h_(e).then(()=>{t.isCacheActive=!1})}}}]}var eh=class extends v_{constructor(){super(...arguments),this.supportsDOMEvents=!0}},th=class n extends eh{static makeCurrent(){__(new n)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=_T();return t==null?null:vT(t)}resetBaseElement(){Es=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Hu(document.cookie,e)}},Es=null;function _T(){return Es=Es||document.querySelector("base"),Es?Es.getAttribute("href"):null}function vT(n){return new URL(n,document.baseURI).pathname}var nh=class{addToWindow(e){Jn.getAngularTestability=(i,r=!0)=>{let o=e.findTestabilityInTree(i,r);if(o==null)throw new Ae(5103,!1);return o},Jn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Jn.getAllAngularRootElements=()=>e.getAllRootElements();let t=i=>{let r=Jn.getAllAngularTestabilities(),o=r.length,s=function(){o--,o==0&&i()};r.forEach(c=>{c.whenStable(s)})};Jn.frameworkStabilizers||(Jn.frameworkStabilizers=[]),Jn.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,i){if(t==null)return null;let r=e.getTestability(t);return r??(i?Vi().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},yT=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac})}}return n})(),ih=new K(""),Y_=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new Ae(5101,!1);return this._eventNameToPlugin.set(t,i),i}static{this.\u0275fac=function(i){return new(i||n)(F(ih),F(J))}}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac})}}return n})(),Nc=class{constructor(e){this._doc=e}},Zu="ng-app-id",X_=(()=>{class n{constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=On(o),this.resetHostNodes()}addStyles(t){for(let i of t)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(t){for(let i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){let i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Zu}="${this.appId}"]`);if(t?.length){let i=new Map;return t.forEach(r=>{r.textContent!=null&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){let r=this.styleRef;if(r.has(t)){let o=r.get(t);return o.usage+=i,o.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){let r=this.styleNodesInDOM,o=r?.get(i);if(o?.parentNode===t)return r.delete(i),o.removeAttribute(Zu),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(Zu,this.appId),t.appendChild(s),s}}addStyleToHost(t,i){let r=this.getStyleElement(t,i),o=this.styleRef,s=o.get(i)?.elements;s?s.push(r):o.set(i,{elements:[r],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)(F(Se),F(ms),F(fs,8),F(Ct))}}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac})}}return n})(),Ju={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},sh=/%COMP%/g,Z_="%COMP%",xT=`_nghost-${Z_}`,wT=`_ngcontent-${Z_}`,IT=!0,ET=new K("",{providedIn:"root",factory:()=>IT});function TT(n){return wT.replace(sh,n)}function AT(n){return xT.replace(sh,n)}function J_(n,e){return e.map(t=>t.replace(sh,n))}var Fc=(()=>{class n{constructor(t,i,r,o,s,c,l,u=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=On(c),this.defaultRenderer=new Ts(t,s,l,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===hs.ShadowDom&&(i=De(V({},i),{encapsulation:hs.Emulated}));let r=this.getOrCreateRenderer(t,i);return r instanceof Oc?r.applyToHost(t):r instanceof As&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,m=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(i.encapsulation){case hs.Emulated:o=new Oc(l,u,i,this.appId,m,s,c,f);break;case hs.ShadowDom:return new rh(l,u,t,i,s,c,this.nonce,f);default:o=new As(l,u,i,m,s,c,f);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)(F(Y_),F(X_),F(ms),F(ET),F(Se),F(Ct),F(J),F(fs))}}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac})}}return n})(),Ts=class{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Ju[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(W_(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(W_(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new Ae(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let o=Ju[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=Ju[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(ps.DashCase|ps.Important)?e.style.setProperty(t,i,r&ps.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&ps.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if(typeof e=="string"&&(e=Vi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function W_(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var rh=class extends Ts{constructor(e,t,i,r,o,s,c,l){super(e,o,s,l),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=J_(r.id,r.styles);for(let m of u){let f=document.createElement("style");c&&f.setAttribute("nonce",c),f.textContent=m,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},As=class extends Ts{constructor(e,t,i,r,o,s,c,l){super(e,o,s,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=l?J_(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Oc=class extends As{constructor(e,t,i,r,o,s,c,l){let u=r+"-"+i.id;super(e,t,i,o,s,c,l,u),this.contentAttr=TT(u),this.hostAttr=AT(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},kT=(()=>{class n extends Nc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||n)(F(Se))}}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac})}}return n})(),Q_=["alt","control","meta","shift"],CT={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},DT={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},ST=(()=>{class n extends Nc{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r){let o=n.parseEventName(i),s=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Vi().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=n._normalizeKey(i.pop()),s="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),s="code."),Q_.forEach(u=>{let m=i.indexOf(u);m>-1&&(i.splice(m,1),s+=u+".")}),s+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(t,i){let r=CT[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),Q_.forEach(s=>{if(s!==r){let c=DT[s];c(t)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(i){return new(i||n)(F(Se))}}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac})}}return n})();function RT(){th.makeCurrent()}function MT(){return new Vu}function PT(){return r_(document),document}var NT=[{provide:Ct,useValue:E_},{provide:o_,useValue:RT,multi:!0},{provide:Se,useFactory:PT,deps:[]}],ev=m_(f_,"browser",NT),FT=new K(""),OT=[{provide:wc,useClass:nh,deps:[]},{provide:u_,useClass:Ic,deps:[J,Uu,wc]},{provide:Ic,useClass:Ic,deps:[J,Uu,wc]}],VT=[{provide:t_,useValue:"root"},{provide:Vu,useFactory:MT,deps:[]},{provide:ih,useClass:kT,multi:!0,deps:[Se,J,Ct]},{provide:ih,useClass:ST,multi:!0,deps:[Se]},Fc,X_,Y_,{provide:bc,useExisting:Fc},{provide:k_,useClass:yT,deps:[]},[]],tv=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:ms,useValue:t.appId}]}}static{this.\u0275fac=function(i){return new(i||n)(F(FT,12))}}static{this.\u0275mod=ce({type:n})}static{this.\u0275inj=ae({providers:[...VT,...OT],imports:[Fr,p_]})}}return n})();var nv=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(i){return new(i||n)(F(Se))}}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var oh=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n}(oh||{});function iv(...n){let e=[],t=new Set,i=t.has(oh.HttpTransferCacheOptions);for(let{\u0275providers:r,\u0275kind:o}of n)t.add(o),r.length&&e.push(r);return Cr([[],g_(),t.has(oh.NoHttpTransferCache)||i?[]:K_({}),e])}var hv=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(i){return new(i||n)(B(_c),B(Pe))}}static{this.\u0275dir=be({type:n})}}return n})(),LT=(()=>{class n extends hv{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Sr(n)))(r||n)}})()}static{this.\u0275dir=be({type:n,features:[hn]})}}return n})(),Hc=new K("");var jT={provide:Hc,useExisting:Fi(()=>Vr),multi:!0};function zT(){let n=Vi()?Vi().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var UT=new K(""),Vr=(()=>{class n extends hv{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!zT())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(i){return new(i||n)(B(_c),B(Pe),B(UT,8))}}static{this.\u0275dir=be({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&Ee("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[zt([jT]),hn]})}}return n})();function ti(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function mv(n){return n!=null&&typeof n.length=="number"}var Ss=new K(""),lh=new K(""),BT=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Lc=class{static min(e){return qT(e)}static max(e){return $T(e)}static required(e){return GT(e)}static requiredTrue(e){return HT(e)}static email(e){return KT(e)}static minLength(e){return WT(e)}static maxLength(e){return QT(e)}static pattern(e){return YT(e)}static nullValidator(e){return fv(e)}static compose(e){return yv(e)}static composeAsync(e){return xv(e)}};function qT(n){return e=>{if(ti(e.value)||ti(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function $T(n){return e=>{if(ti(e.value)||ti(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function GT(n){return ti(n.value)?{required:!0}:null}function HT(n){return n.value===!0?null:{required:!0}}function KT(n){return ti(n.value)||BT.test(n.value)?null:{email:!0}}function WT(n){return e=>ti(e.value)||!mv(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function QT(n){return e=>mv(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function YT(n){if(!n)return fv;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(ti(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}function fv(n){return null}function pv(n){return n!=null}function gv(n){return Ec(n)?Me(n):n}function bv(n){let e={};return n.forEach(t=>{e=t!=null?V(V({},e),t):e}),Object.keys(e).length===0?null:e}function _v(n,e){return e.map(t=>t(n))}function XT(n){return!n.validate}function vv(n){return n.map(e=>XT(e)?e:t=>e.validate(t))}function yv(n){if(!n)return null;let e=n.filter(pv);return e.length==0?null:function(t){return bv(_v(t,e))}}function dh(n){return n!=null?yv(vv(n)):null}function xv(n){if(!n)return null;let e=n.filter(pv);return e.length==0?null:function(t){let i=_v(t,e).map(gv);return Yb(i).pipe(te(bv))}}function uh(n){return n!=null?xv(vv(n)):null}function ov(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function wv(n){return n._rawValidators}function Iv(n){return n._rawAsyncValidators}function ah(n){return n?Array.isArray(n)?n:[n]:[]}function jc(n,e){return Array.isArray(n)?n.includes(e):n===e}function sv(n,e){let t=ah(e);return ah(n).forEach(r=>{jc(t,r)||t.push(r)}),t}function av(n,e){return ah(e).filter(t=>!jc(n,t))}var zc=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=dh(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=uh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},ji=class extends zc{get formDirective(){return null}get path(){return null}},zi=class extends zc{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},ch=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},ZT={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},WM=De(V({},ZT),{"[class.ng-submitted]":"isSubmitted"}),Kc=(()=>{class n extends ch{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(B(zi,2))}}static{this.\u0275dir=be({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&Fe("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[hn]})}}return n})();var ks="VALID",Vc="INVALID",Or="PENDING",Cs="DISABLED";function Ev(n){return(Wc(n)?n.validators:n)||null}function JT(n){return Array.isArray(n)?dh(n):n||null}function Tv(n,e){return(Wc(e)?e.asyncValidators:n)||null}function eA(n){return Array.isArray(n)?uh(n):n||null}function Wc(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function tA(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new Ae(1e3,"");if(!i[t])throw new Ae(1001,"")}function nA(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new Ae(1002,"")})}var Uc=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===ks}get invalid(){return this.status===Vc}get pending(){return this.status==Or}get disabled(){return this.status===Cs}get enabled(){return this.status!==Cs}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(sv(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(sv(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(av(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(av(e,this._rawAsyncValidators))}hasValidator(e){return jc(this._rawValidators,e)}hasAsyncValidator(e){return jc(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Or,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Cs,this.errors=null,this._forEachChild(i=>{i.disable(De(V({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(De(V({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ks,this._forEachChild(i=>{i.enable(De(V({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(De(V({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ks||this.status===Or)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Cs:ks}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Or,this._hasOwnPendingAsyncValidator=!0;let t=gv(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new dt,this.statusChanges=new dt}_calculateStatus(){return this._allControlsDisabled()?Cs:this.errors?Vc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Or)?Or:this._anyControlsHaveStatus(Vc)?Vc:ks}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Wc(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=JT(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=eA(this._rawAsyncValidators)}},Bc=class extends Uc{constructor(e,t,i){super(Ev(t),Tv(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){nA(this,!0,e),Object.keys(e).forEach(i=>{tA(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,o)=>{i=t(i,r,o)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Qc=new K("CallSetDisabledState",{providedIn:"root",factory:()=>hh}),hh="always";function iA(n,e){return[...e.path,n]}function qc(n,e,t=hh){mh(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),oA(n,e),aA(n,e),sA(n,e),rA(n,e)}function cv(n,e,t=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Gc(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function $c(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function rA(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function mh(n,e){let t=wv(n);e.validator!==null?n.setValidators(ov(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=Iv(n);e.asyncValidator!==null?n.setAsyncValidators(ov(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();$c(e._rawValidators,r),$c(e._rawAsyncValidators,r)}function Gc(n,e){let t=!1;if(n!==null){if(e.validator!==null){let r=wv(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.validator);o.length!==r.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let r=Iv(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.asyncValidator);o.length!==r.length&&(t=!0,n.setAsyncValidators(o))}}}let i=()=>{};return $c(e._rawValidators,i),$c(e._rawAsyncValidators,i),t}function oA(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Av(n,e)})}function sA(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Av(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function Av(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function aA(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function kv(n,e){n==null,mh(n,e)}function cA(n,e){return Gc(n,e)}function lA(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function dA(n){return Object.getPrototypeOf(n.constructor)===LT}function Cv(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function uA(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(o=>{o.constructor===Vr?t=o:dA(o)?i=o:r=o}),r||i||t||null}function hA(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var mA={provide:ji,useExisting:Fi(()=>fh)},Ds=Promise.resolve(),fh=(()=>{class n extends ji{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new dt,this.form=new Bc({},dh(t),uh(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Ds.then(()=>{let i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),qc(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Ds.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Ds.then(()=>{let i=this._findContainer(t.path),r=new Bc({});kv(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Ds.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){Ds.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Cv(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(i){return new(i||n)(B(Ss,10),B(lh,10),B(Qc,8))}}static{this.\u0275dir=be({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&Ee("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:[de.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[zt([mA]),hn]})}}return n})();function lv(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function dv(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Dv=class extends Uc{constructor(e=null,t,i){super(Ev(t),Tv(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Wc(t)&&(t.nonNullable||t.initialValueIsDefault)&&(dv(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){lv(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){lv(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){dv(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var fA=n=>n instanceof Dv;var pA={provide:zi,useExisting:Fi(()=>Rs)},uv=Promise.resolve(),Rs=(()=>{class n extends zi{constructor(t,i,r,o,s,c){super(),this._changeDetectorRef=s,this.callSetDisabledState=c,this.control=new Dv,this._registered=!1,this.name="",this.update=new dt,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=uA(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),lA(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){qc(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){uv.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&wt(i);uv.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?iA(t,this._parent):[t]}static{this.\u0275fac=function(i){return new(i||n)(B(ji,9),B(Ss,10),B(lh,10),B(Hc,10),B(mn,8),B(Qc,8))}}static{this.\u0275dir=be({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[de.None,"disabled","isDisabled"],model:[de.None,"ngModel","model"],options:[de.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[zt([pA]),hn,un]})}}return n})();var gA={provide:ji,useExisting:Fi(()=>ph)},ph=(()=>{class n extends ji{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new dt,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Gc(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let i=this.form.get(t.path);return qc(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){cv(t.control||null,t,!1),hA(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,Cv(this.form,this.directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{let i=t.control,r=this.form.get(t.path);i!==r&&(cv(i||null,t),fA(r)&&(qc(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let i=this.form.get(t.path);kv(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let i=this.form.get(t.path);i&&cA(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){mh(this.form,this),this._oldForm&&Gc(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(i){return new(i||n)(B(Ss,10),B(lh,10),B(Qc,8))}}static{this.\u0275dir=be({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&Ee("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:[de.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[zt([gA]),hn,un]})}}return n})();var bA=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ce({type:n})}static{this.\u0275inj=ae({})}}return n})();var Sv=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Qc,useValue:t.callSetDisabledState??hh}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ce({type:n})}static{this.\u0275inj=ae({imports:[bA]})}}return n})();var se="primary",Hs=Symbol("RouteTitle"),xh=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Br(n){return new xh(n)}function _A(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],c=n[o];if(s.startsWith(":"))r[s.substring(1)]=c;else if(s!==c.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function vA(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!pn(n[t],e[t]))return!1;return!0}function pn(n,e){let t=n?wh(n):void 0,i=e?wh(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!jv(n[r],e[r]))return!1;return!0}function wh(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function jv(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}else return n===e}function zv(n){return n.length>0?n[n.length-1]:null}function oi(n){return Wb(n)?n:Ec(n)?Me(Promise.resolve(n)):X(n)}var yA={exact:Bv,subset:qv},Uv={exact:xA,subset:wA,ignored:()=>!0};function Rv(n,e,t){return yA[t.paths](n.root,e.root,t.matrixParams)&&Uv[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function xA(n,e){return pn(n,e)}function Bv(n,e,t){if(!Bi(n.segments,e.segments)||!Zc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!Bv(n.children[i],e.children[i],t))return!1;return!0}function wA(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>jv(n[t],e[t]))}function qv(n,e,t){return $v(n,e,e.segments,t)}function $v(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!Bi(r,t)||e.hasChildren()||!Zc(r,t,i))}else if(n.segments.length===t.length){if(!Bi(n.segments,t)||!Zc(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!qv(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Bi(n.segments,r)||!Zc(n.segments,r,i)||!n.children[se]?!1:$v(n.children[se],e,o,i)}}function Zc(n,e,t){return e.every((i,r)=>Uv[t](n[r].parameters,i.parameters))}var ni=class{constructor(e=new _e([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Br(this.queryParams),this._queryParamMap}toString(){return TA.serialize(this)}},_e=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Jc(this)}},Ui=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Br(this.parameters),this._parameterMap}toString(){return Hv(this)}};function IA(n,e){return Bi(n,e)&&n.every((t,i)=>pn(t.parameters,e[i].parameters))}function Bi(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function EA(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===se&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==se&&(t=t.concat(e(r,i)))}),t}var Ks=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Y({token:n,factory:()=>new Ls,providedIn:"root"})}}return n})(),Ls=class{parse(e){let t=new Eh(e);return new ni(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Ms(e.root,!0)}`,i=CA(e.queryParams),r=typeof e.fragment=="string"?`#${AA(e.fragment)}`:"";return`${t}${i}${r}`}},TA=new Ls;function Jc(n){return n.segments.map(e=>Hv(e)).join("/")}function Ms(n,e){if(!n.hasChildren())return Jc(n);if(e){let t=n.children[se]?Ms(n.children[se],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==se&&i.push(`${r}:${Ms(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=EA(n,(i,r)=>r===se?[Ms(n.children[se],!1)]:[`${r}:${Ms(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[se]!=null?`${Jc(n)}/${t[0]}`:`${Jc(n)}/(${t.join("//")})`}}function Gv(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Yc(n){return Gv(n).replace(/%3B/gi,";")}function AA(n){return encodeURI(n)}function Ih(n){return Gv(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function el(n){return decodeURIComponent(n)}function Mv(n){return el(n.replace(/\+/g,"%20"))}function Hv(n){return`${Ih(n.path)}${kA(n.parameters)}`}function kA(n){return Object.entries(n).map(([e,t])=>`;${Ih(e)}=${Ih(t)}`).join("")}function CA(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${Yc(t)}=${Yc(r)}`).join("&"):`${Yc(t)}=${Yc(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var DA=/^[^\/()?;#]+/;function bh(n){let e=n.match(DA);return e?e[0]:""}var SA=/^[^\/()?;=#]+/;function RA(n){let e=n.match(SA);return e?e[0]:""}var MA=/^[^=?&#]+/;function PA(n){let e=n.match(MA);return e?e[0]:""}var NA=/^[^&#]+/;function FA(n){let e=n.match(NA);return e?e[0]:""}var Eh=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new _e([],{}):new _e([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[se]=new _e(e,t)),i}parseSegment(){let e=bh(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Ae(4009,!1);return this.capture(e),new Ui(el(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=RA(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=bh(this.remaining);r&&(i=r,this.capture(i))}e[el(t)]=el(i)}parseQueryParam(e){let t=PA(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let s=FA(this.remaining);s&&(i=s,this.capture(i))}let r=Mv(t),o=Mv(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=bh(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Ae(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=se);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[se]:new _e([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Ae(4011,!1)}};function Kv(n){return n.segments.length>0?new _e([],{[se]:n}):n}function Wv(n){let e={};for(let[i,r]of Object.entries(n.children)){let o=Wv(r);if(i===se&&o.segments.length===0&&o.hasChildren())for(let[s,c]of Object.entries(o.children))e[s]=c;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let t=new _e(n.segments,e);return OA(t)}function OA(n){if(n.numberOfChildren===1&&n.children[se]){let e=n.children[se];return new _e(n.segments.concat(e.segments),e.children)}return n}function qr(n){return n instanceof ni}function VA(n,e,t=null,i=null){let r=Qv(n);return Yv(r,e,t,i)}function Qv(n){let e;function t(o){let s={};for(let l of o.children){let u=t(l);s[l.outlet]=u}let c=new _e(o.url,s);return o===n&&(e=c),c}let i=t(n.root),r=Kv(i);return e??r}function Yv(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return _h(r,r,r,t,i);let o=LA(e);if(o.toRoot())return _h(r,r,new _e([],{}),t,i);let s=jA(o,r,n),c=s.processChildren?Fs(s.segmentGroup,s.index,o.commands):Zv(s.segmentGroup,s.index,o.commands);return _h(r,s.segmentGroup,c,t,i)}function tl(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function js(n){return typeof n=="object"&&n!=null&&n.outlets}function _h(n,e,t,i,r){let o={};i&&Object.entries(i).forEach(([l,u])=>{o[l]=Array.isArray(u)?u.map(m=>`${m}`):`${u}`});let s;n===e?s=t:s=Xv(n,e,t);let c=Kv(Wv(s));return new ni(c,o,r)}function Xv(n,e,t){let i={};return Object.entries(n.children).forEach(([r,o])=>{o===e?i[r]=t:i[r]=Xv(o,e,t)}),new _e(n.segments,i)}var nl=class{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&tl(i[0]))throw new Ae(4003,!1);let r=i.find(js);if(r&&r!==zv(i))throw new Ae(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function LA(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new nl(!0,0,n);let e=0,t=!1,i=n.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let c={};return Object.entries(o.outlets).forEach(([l,u])=>{c[l]=typeof u=="string"?u.split("/"):u}),[...r,{outlets:c}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?t=!0:c===".."?e++:c!=""&&r.push(c))}),r):[...r,o]},[]);return new nl(t,e,i)}var zr=class{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function jA(n,e,t){if(n.isAbsolute)return new zr(e,!0,0);if(!t)return new zr(e,!1,NaN);if(t.parent===null)return new zr(t,!0,0);let i=tl(n.commands[0])?0:1,r=t.segments.length-1+i;return zA(t,r,n.numberOfDoubleDots)}function zA(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new Ae(4005,!1);r=i.segments.length}return new zr(i,!1,r-o)}function UA(n){return js(n[0])?n[0].outlets:{[se]:n}}function Zv(n,e,t){if(n??=new _e([],{}),n.segments.length===0&&n.hasChildren())return Fs(n,e,t);let i=BA(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new _e(n.segments.slice(0,i.pathIndex),{});return o.children[se]=new _e(n.segments.slice(i.pathIndex),n.children),Fs(o,0,r)}else return i.match&&r.length===0?new _e(n.segments,{}):i.match&&!n.hasChildren()?Th(n,e,t):i.match?Fs(n,0,r):Th(n,e,t)}function Fs(n,e,t){if(t.length===0)return new _e(n.segments,{});{let i=UA(t),r={};if(Object.keys(i).some(o=>o!==se)&&n.children[se]&&n.numberOfChildren===1&&n.children[se].segments.length===0){let o=Fs(n.children[se],e,t);return new _e(n.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=Zv(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new _e(n.segments,r)}}function BA(n,e,t){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;let s=n.segments[r],c=t[i];if(js(c))break;let l=`${c}`,u=i<t.length-1?t[i+1]:null;if(r>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!Nv(l,u,s))return o;i+=2}else{if(!Nv(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Th(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let o=t[r];if(js(o)){let l=qA(o.outlets);return new _e(i,l)}if(r===0&&tl(t[0])){let l=n.segments[e];i.push(new Ui(l.path,Pv(t[0]))),r++;continue}let s=js(o)?o.outlets[se]:`${o}`,c=r<t.length-1?t[r+1]:null;s&&c&&tl(c)?(i.push(new Ui(s,Pv(c))),r+=2):(i.push(new Ui(s,{})),r++)}return new _e(i,{})}function qA(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=Th(new _e([],{}),0,i))}),e}function Pv(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function Nv(n,e,t){return n==t.path&&pn(e,t.parameters)}var Os="imperative",ut=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(ut||{}),Kt=class{constructor(e,t){this.id=e,this.url=t}},$r=class extends Kt{constructor(e,t,i="imperative",r=null){super(e,t),this.type=ut.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Vn=class extends Kt{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=ut.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Bt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Bt||{}),il=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(il||{}),ii=class extends Kt{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=ut.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ri=class extends Kt{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=ut.NavigationSkipped}},zs=class extends Kt{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=ut.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},rl=class extends Kt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=ut.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ah=class extends Kt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=ut.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},kh=class extends Kt{constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=ut.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Ch=class extends Kt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=ut.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Dh=class extends Kt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=ut.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sh=class{constructor(e){this.route=e,this.type=ut.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Rh=class{constructor(e){this.route=e,this.type=ut.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Mh=class{constructor(e){this.snapshot=e,this.type=ut.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ph=class{constructor(e){this.snapshot=e,this.type=ut.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Nh=class{constructor(e){this.snapshot=e,this.type=ut.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Fh=class{constructor(e){this.snapshot=e,this.type=ut.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ol=class{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=ut.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Us=class{},Bs=class{constructor(e){this.url=e}};var Oh=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ws,this.attachRef=null}},Ws=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new Oh,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),sl=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Vh(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=Vh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Lh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Lh(e,this._root).map(t=>t.value)}};function Vh(n,e){if(n===e.value)return e;for(let t of e.children){let i=Vh(n,t);if(i)return i}return null}function Lh(n,e){if(n===e.value)return[e];for(let t of e.children){let i=Lh(n,t);if(i.length)return i.unshift(e),i}return[]}var Ut=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function jr(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var al=class extends sl{constructor(e,t){super(e),this.snapshot=t,Wh(this,e)}toString(){return this.snapshot.toString()}};function Jv(n){let e=$A(n),t=new Pt([new Ui("",{})]),i=new Pt({}),r=new Pt({}),o=new Pt({}),s=new Pt(""),c=new Gr(t,i,o,s,r,se,n,e.root);return c.snapshot=e.root,new al(new Ut(c,[]),e)}function $A(n){let e={},t={},i={},r="",o=new qs([],e,i,r,t,se,n,null,{});return new cl("",new Ut(o,[]))}var Gr=class{constructor(e,t,i,r,o,s,c,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(te(u=>u[Hs]))??X(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(te(e=>Br(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(te(e=>Br(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Kh(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:V(V({},e.params),n.params),data:V(V({},e.data),n.data),resolve:V(V(V(V({},n.data),e.data),r?.data),n._resolvedData)}:i={params:V({},n.params),data:V({},n.data),resolve:V(V({},n.data),n._resolvedData??{})},r&&ty(r)&&(i.resolve[Hs]=r.title),i}var qs=class{get title(){return this.data?.[Hs]}constructor(e,t,i,r,o,s,c,l,u){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=c,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Br(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Br(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},cl=class extends sl{constructor(e,t){super(t),this.url=e,Wh(this,t)}toString(){return ey(this._root)}};function Wh(n,e){e.value._routerState=n,e.children.forEach(t=>Wh(n,t))}function ey(n){let e=n.children.length>0?` { ${n.children.map(ey).join(", ")} } `:"";return`${n.value}${e}`}function vh(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,pn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),pn(e.params,t.params)||n.paramsSubject.next(t.params),vA(e.url,t.url)||n.urlSubject.next(t.url),pn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function jh(n,e){let t=pn(n.params,e.params)&&IA(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||jh(n.parent,e.parent))}function ty(n){return typeof n.title=="string"||n.title===null}var GA=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=se,this.activateEvents=new dt,this.deactivateEvents=new dt,this.attachEvents=new dt,this.detachEvents=new dt,this.parentContexts=U(Ws),this.location=U(a_),this.changeDetector=U(mn),this.environmentInjector=U(Dr),this.inputBinder=U(ml,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ae(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ae(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ae(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Ae(4013,!1);this._activatedRoute=t;let r=this.location,s=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new zh(t,c,r.injector);this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=be({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[un]})}}return n})(),zh=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Gr?this.route:e===Ws?this.childContexts:this.parent.get(e,t)}},ml=new K(""),Fv=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:i}=t,r=Tr([i.queryParams,i.params,i.data]).pipe(rt(([o,s,c],l)=>(c=V(V(V({},o),s),c),l===0?X(c):Promise.resolve(c)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(t);return}let s=b_(i.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:c}of s.inputs)t.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(t,r)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac})}}return n})();function HA(n,e,t){let i=$s(n,e._root,t?t._root:void 0);return new al(i,e)}function $s(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=KA(n,e,t);return new Ut(i,r)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(c=>$s(n,c)),s}}let i=WA(e.value),r=e.children.map(o=>$s(n,o));return new Ut(i,r)}}function KA(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return $s(n,i,r);return $s(n,i)})}function WA(n){return new Gr(new Pt(n.url),new Pt(n.params),new Pt(n.queryParams),new Pt(n.fragment),new Pt(n.data),n.outlet,n.component,n)}var ny="ngNavigationCancelingError";function iy(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=qr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=ry(!1,Bt.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function ry(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[ny]=!0,t.cancellationCode=e,t}function QA(n){return oy(n)&&qr(n.url)}function oy(n){return!!n&&n[ny]}var YA=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=$e({type:n,selectors:[["ng-component"]],standalone:!0,features:[xt],decls:1,vars:0,template:function(i,r){i&1&&ve(0,"router-outlet")},dependencies:[GA],encapsulation:2})}}return n})();function XA(n,e){return n.providers&&!n._injector&&(n._injector=ju(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Qh(n){let e=n.children&&n.children.map(Qh),t=e?De(V({},n),{children:e}):V({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==se&&(t.component=YA),t}function gn(n){return n.outlet||se}function ZA(n,e){let t=n.filter(i=>gn(i)===e);return t.push(...n.filter(i=>gn(i)!==e)),t}function Qs(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var JA=(n,e,t,i)=>te(r=>(new Uh(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),Uh=class{constructor(e,t,i,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),vh(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=jr(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=jr(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),c=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=jr(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=jr(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new Fh(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Ph(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(vh(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let c=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(c.contexts),s.attachRef=c.componentRef,s.route=c.route.value,s.outlet&&s.outlet.attach(c.componentRef,c.route.value),vh(c.route.value),this.activateChildRoutes(e,null,s.children)}else{let c=Qs(r.snapshot);s.attachRef=null,s.route=r,s.injector=c,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,i)}},ll=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ur=class{constructor(e,t){this.component=e,this.route=t}};function ek(n,e,t){let i=n._root,r=e?e._root:null;return Ps(i,r,t,[i.value])}function tk(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Kr(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!Jb(n)?n:e.get(n):i}function Ps(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=jr(e);return n.children.forEach(s=>{nk(s,o[s.value.outlet],t,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,c])=>Vs(c,t.getContext(s),r)),r}function nk(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=ik(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new ll(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Ps(n,e,c?c.children:null,i,r):Ps(n,e,t,i,r),l&&c&&c.outlet&&c.outlet.isActivated&&r.canDeactivateChecks.push(new Ur(c.outlet.component,s))}else s&&Vs(e,c,r),r.canActivateChecks.push(new ll(i)),o.component?Ps(n,null,c?c.children:null,i,r):Ps(n,null,t,i,r);return r}function ik(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Bi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Bi(n.url,e.url)||!pn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!jh(n,e)||!pn(n.queryParams,e.queryParams);case"paramsChange":default:return!jh(n,e)}}function Vs(n,e,t){let i=jr(n),r=n.value;Object.entries(i).forEach(([o,s])=>{r.component?e?Vs(s,e.children.getContext(o),t):Vs(s,null,t):Vs(s,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ur(e.outlet.component,r)):t.canDeactivateChecks.push(new Ur(null,r)):t.canDeactivateChecks.push(new Ur(null,r))}function Ys(n){return typeof n=="function"}function rk(n){return typeof n=="boolean"}function ok(n){return n&&Ys(n.canLoad)}function sk(n){return n&&Ys(n.canActivate)}function ak(n){return n&&Ys(n.canActivateChild)}function ck(n){return n&&Ys(n.canDeactivate)}function lk(n){return n&&Ys(n.canMatch)}function sy(n){return n instanceof Qb||n?.name==="EmptyError"}var Xc=Symbol("INITIAL_VALUE");function Hr(){return rt(n=>Tr(n.map(e=>e.pipe(Mn(1),Zn(Xc)))).pipe(te(e=>{for(let t of e)if(t!==!0){if(t===Xc)return Xc;if(t===!1||t instanceof ni)return t}return!0}),vt(e=>e!==Xc),Mn(1)))}function dk(n,e){return Lt(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?X(De(V({},t),{guardsResult:!0})):uk(s,i,r,n).pipe(Lt(c=>c&&rk(c)?hk(i,o,n,e):X(c)),te(c=>De(V({},t),{guardsResult:c})))})}function uk(n,e,t,i){return Me(n).pipe(Lt(r=>bk(r.component,r.route,t,e,i)),dn(r=>r!==!0,!0))}function hk(n,e,t,i){return Me(e).pipe(Ni(r=>lc(fk(r.route.parent,i),mk(r.route,i),gk(n,r.path,t),pk(n,r.route,t))),dn(r=>r!==!0,!0))}function mk(n,e){return n!==null&&e&&e(new Nh(n)),X(!0)}function fk(n,e){return n!==null&&e&&e(new Mh(n)),X(!0)}function pk(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return X(!0);let r=i.map(o=>Ru(()=>{let s=Qs(e)??t,c=Kr(o,s),l=sk(c)?c.canActivate(e,n):Pn(s,()=>c(e,n));return oi(l).pipe(dn())}));return X(r).pipe(Hr())}function gk(n,e,t){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>tk(s)).filter(s=>s!==null).map(s=>Ru(()=>{let c=s.guards.map(l=>{let u=Qs(s.node)??t,m=Kr(l,u),f=ak(m)?m.canActivateChild(i,n):Pn(u,()=>m(i,n));return oi(f).pipe(dn())});return X(c).pipe(Hr())}));return X(o).pipe(Hr())}function bk(n,e,t,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return X(!0);let s=o.map(c=>{let l=Qs(e)??r,u=Kr(c,l),m=ck(u)?u.canDeactivate(n,e,t,i):Pn(l,()=>u(n,e,t,i));return oi(m).pipe(dn())});return X(s).pipe(Hr())}function _k(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return X(!0);let o=r.map(s=>{let c=Kr(s,n),l=ok(c)?c.canLoad(e,t):Pn(n,()=>c(e,t));return oi(l)});return X(o).pipe(Hr(),ay(i))}function ay(n){return Hb(He(e=>{if(qr(e))throw iy(n,e)}),te(e=>e===!0))}function vk(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return X(!0);let o=r.map(s=>{let c=Kr(s,n),l=lk(c)?c.canMatch(e,t):Pn(n,()=>c(e,t));return oi(l)});return X(o).pipe(Hr(),ay(i))}var Gs=class{constructor(e){this.segmentGroup=e||null}},dl=class extends Error{constructor(e){super(),this.urlTree=e}};function Lr(n){return cs(new Gs(n))}function yk(n){return cs(new Ae(4e3,!1))}function xk(n){return cs(ry(!1,Bt.GuardRejected))}var Bh=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return X(i);if(r.numberOfChildren>1||!r.children[se])return yk(e.redirectTo);r=r.children[se]}}applyRedirectCommands(e,t,i){let r=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t.startsWith("/"))throw new dl(r);return r}applyRedirectCreateUrlTree(e,t,i,r){let o=this.createSegmentGroup(e,t.root,i,r);return new ni(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o.startsWith(":")){let c=o.substring(1);i[r]=t[c]}else i[r]=o}),i}createSegmentGroup(e,t,i,r){let o=this.createSegments(e,t.segments,i,r),s={};return Object.entries(t.children).forEach(([c,l])=>{s[c]=this.createSegmentGroup(e,l,i,r)}),new _e(o,s)}createSegments(e,t,i,r){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new Ae(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},qh={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function wk(n,e,t,i,r){let o=Yh(n,e,t);return o.matched?(i=XA(e,i),vk(i,e,t,r).pipe(te(s=>s===!0?o:V({},qh)))):X(o)}function Yh(n,e,t){if(e.path==="**")return Ik(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?V({},qh):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||_A)(t,n,e);if(!r)return V({},qh);let o={};Object.entries(r.posParams??{}).forEach(([c,l])=>{o[c]=l.path});let s=r.consumed.length>0?V(V({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function Ik(n){return{matched:!0,parameters:n.length>0?zv(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Ov(n,e,t,i){return t.length>0&&Ak(n,t,i)?{segmentGroup:new _e(e,Tk(i,new _e(t,n.children))),slicedSegments:[]}:t.length===0&&kk(n,t,i)?{segmentGroup:new _e(n.segments,Ek(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new _e(n.segments,n.children),slicedSegments:t}}function Ek(n,e,t,i){let r={};for(let o of t)if(fl(n,e,o)&&!i[gn(o)]){let s=new _e([],{});r[gn(o)]=s}return V(V({},i),r)}function Tk(n,e){let t={};t[se]=e;for(let i of n)if(i.path===""&&gn(i)!==se){let r=new _e([],{});t[gn(i)]=r}return t}function Ak(n,e,t){return t.some(i=>fl(n,e,i)&&gn(i)!==se)}function kk(n,e,t){return t.some(i=>fl(n,e,i))}function fl(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Ck(n,e,t,i){return gn(n)!==i&&(i===se||!fl(e,t,n))?!1:Yh(e,n,t).matched}function Dk(n,e,t){return e.length===0&&!n.children[t]}var $h=class{};function Sk(n,e,t,i,r,o,s="emptyOnly"){return new Gh(n,e,t,i,r,s,o).recognize()}var Rk=31,Gh=class{constructor(e,t,i,r,o,s,c){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=c,this.applyRedirects=new Bh(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Ae(4002,`'${e.segmentGroup}'`)}recognize(){let e=Ov(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(te(t=>{let i=new qs([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,{},se,this.rootComponentType,null,{}),r=new Ut(i,t),o=new cl("",r),s=VA(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,se).pipe(Ar(i=>{if(i instanceof dl)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Gs?this.noMatchError(i):i}))}inheritParamsAndData(e,t){let i=e.value,r=Kh(i,t,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o,i))}processSegmentGroup(e,t,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r,!0).pipe(te(o=>o instanceof Ut?[o]:[]))}processChildren(e,t,i){let r=[];for(let o of Object.keys(i.children))o==="primary"?r.unshift(o):r.push(o);return Me(r).pipe(Ni(o=>{let s=i.children[o],c=ZA(t,o);return this.processSegmentGroup(e,c,s,o)}),kr((o,s)=>(o.push(...s),o)),Pu(null),Zb(),Lt(o=>{if(o===null)return Lr(i);let s=cy(o);return Mk(s),X(s)}))}processSegment(e,t,i,r,o,s){return Me(t).pipe(Ni(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,i,r,o,s).pipe(Ar(l=>{if(l instanceof Gs)return X(null);throw l}))),dn(c=>!!c),Ar(c=>{if(sy(c))return Dk(i,r,o)?X(new $h):Lr(i);throw c}))}processSegmentAgainstRoute(e,t,i,r,o,s,c){return Ck(i,r,o,s)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,s):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,o,s):Lr(r):Lr(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s){let{matched:c,consumedSegments:l,positionalParamSegments:u,remainingSegments:m}=Yh(t,r,o);if(!c)return Lr(t);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Rk&&(this.allowRedirects=!1));let f=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,u);return this.applyRedirects.lineralizeSegments(r,f).pipe(Lt(g=>this.processSegment(e,i,t,g.concat(m),s,!1)))}matchSegmentAgainstRoute(e,t,i,r,o){let s=wk(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),s.pipe(rt(c=>c.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(rt(({routes:l})=>{let u=i._loadedInjector??e,{consumedSegments:m,remainingSegments:f,parameters:g}=c,w=new qs(m,g,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Nk(i),gn(i),i.component??i._loadedComponent??null,i,Fk(i)),{segmentGroup:R,slicedSegments:S}=Ov(t,m,f,l);if(S.length===0&&R.hasChildren())return this.processChildren(u,l,R).pipe(te(q=>q===null?null:new Ut(w,q)));if(l.length===0&&S.length===0)return X(new Ut(w,[]));let M=gn(i)===o;return this.processSegment(u,l,R,S,M?se:o,!0).pipe(te(q=>new Ut(w,q instanceof Ut?[q]:[])))}))):Lr(t)))}getChildConfig(e,t,i){return t.children?X({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?X({routes:t._loadedRoutes,injector:t._loadedInjector}):_k(e,t,i,this.urlSerializer).pipe(Lt(r=>r?this.configLoader.loadChildren(e,t).pipe(He(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):xk(t))):X({routes:[],injector:e})}};function Mk(n){n.sort((e,t)=>e.value.outlet===se?-1:t.value.outlet===se?1:e.value.outlet.localeCompare(t.value.outlet))}function Pk(n){let e=n.value.routeConfig;return e&&e.path===""}function cy(n){let e=[],t=new Set;for(let i of n){if(!Pk(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=cy(i.children);e.push(new Ut(i.value,r))}return e.filter(i=>!t.has(i))}function Nk(n){return n.data||{}}function Fk(n){return n.resolve||{}}function Ok(n,e,t,i,r,o){return Lt(s=>Sk(n,e,t,i,s.extractedUrl,r,o).pipe(te(({state:c,tree:l})=>De(V({},s),{targetSnapshot:c,urlAfterRedirects:l}))))}function Vk(n,e){return Lt(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return X(t);let o=new Set(r.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let u of ly(l))s.add(u);let c=0;return Me(s).pipe(Ni(l=>o.has(l)?Lk(l,i,n,e):(l.data=Kh(l,l.parent,n).resolve,X(void 0))),He(()=>c++),Nu(1),Lt(l=>c===s.size?X(t):ln))})}function ly(n){let e=n.children.map(t=>ly(t)).flat();return[n,...e]}function Lk(n,e,t,i){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!ty(r)&&(o[Hs]=r.title),jk(o,n,e,i).pipe(te(s=>(n._resolvedData=s,n.data=Kh(n,n.parent,t).resolve,null)))}function jk(n,e,t,i){let r=wh(n);if(r.length===0)return X({});let o={};return Me(r).pipe(Lt(s=>zk(n[s],e,t,i).pipe(dn(),He(c=>{o[s]=c}))),Nu(1),Xb(o),Ar(s=>sy(s)?ln:cs(s)))}function zk(n,e,t,i){let r=Qs(e)??i,o=Kr(n,r),s=o.resolve?o.resolve(e,t):Pn(r,()=>o(e,t));return oi(s)}function yh(n){return rt(e=>{let t=n(e);return t?Me(t).pipe(te(()=>e)):X(e)})}var dy=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===se);return i}getResolvedTitleForRoute(t){return t.data[Hs]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Y({token:n,factory:()=>U(Uk),providedIn:"root"})}}return n})(),Uk=(()=>{class n extends dy{constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||n)(F(nv))}}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Xs=new K("",{providedIn:"root",factory:()=>({})}),ul=new K(""),Xh=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=U(Ac)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return X(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let i=oi(t.loadComponent()).pipe(te(uy),He(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),ls(()=>{this.componentLoaders.delete(t)})),r=new Du(i,()=>new Le).pipe(Cu());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return X({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=Bk(i,this.compiler,t,this.onLoadEndListener).pipe(ls(()=>{this.childrenLoaders.delete(i)})),s=new Du(o,()=>new Le).pipe(Cu());return this.childrenLoaders.set(i,s),s}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Bk(n,e,t,i){return oi(n.loadChildren()).pipe(te(uy),Lt(r=>r instanceof c_||Array.isArray(r)?X(r):Me(e.compileModuleAsync(r))),te(r=>{i&&i(n);let o,s,c=!1;return Array.isArray(r)?(s=r,c=!0):(o=r.create(t).injector,s=o.get(ul,[],{optional:!0,self:!0}).flat()),{routes:s.map(Qh),injector:o}}))}function qk(n){return n&&typeof n=="object"&&"default"in n}function uy(n){return qk(n)?n.default:n}var Zh=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Y({token:n,factory:()=>U($k),providedIn:"root"})}}return n})(),$k=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),hy=new K(""),my=new K("");function Gk(n,e,t){let i=n.get(my),r=n.get(Se);return n.get(J).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(u=>setTimeout(u));let o,s=new Promise(u=>{o=u}),c=r.startViewTransition(()=>(o(),Hk(n))),{onViewTransitionCreated:l}=i;return l&&Pn(n,()=>l({transition:c,from:e,to:t})),s})}function Hk(n){return new Promise(e=>{Lu(e,{injector:n})})}var Jh=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Le,this.transitionAbortSubject=new Le,this.configLoader=U(Xh),this.environmentInjector=U(Dr),this.urlSerializer=U(Ks),this.rootContexts=U(Ws),this.location=U(xs),this.inputBindingEnabled=U(ml,{optional:!0})!==null,this.titleStrategy=U(dy),this.options=U(Xs,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=U(Zh),this.createViewTransition=U(hy,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>X(void 0),this.rootComponentType=null;let t=r=>this.events.next(new Sh(r)),i=r=>this.events.next(new Rh(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;this.transitions?.next(De(V(V({},this.transitions.value),t),{id:i}))}setupNavigations(t,i,r){return this.transitions=new Pt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Os,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(vt(o=>o.id!==0),te(o=>De(V({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),rt(o=>{let s=!1,c=!1;return X(o).pipe(rt(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Bt.SupersededByNewNavigation),ln;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?De(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),m=l.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!u&&m!=="reload"){let f="";return this.events.next(new ri(l.id,this.urlSerializer.serialize(l.rawUrl),f,il.IgnoredSameUrlNavigation)),l.resolve(null),ln}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return X(l).pipe(rt(f=>{let g=this.transitions?.getValue();return this.events.next(new $r(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),g!==this.transitions?.getValue()?ln:Promise.resolve(f)}),Ok(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),He(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=De(V({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let g=new rl(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:f,extractedUrl:g,source:w,restoredState:R,extras:S}=l,M=new $r(f,this.urlSerializer.serialize(g),w,R);this.events.next(M);let q=Jv(this.rootComponentType).snapshot;return this.currentTransition=o=De(V({},l),{targetSnapshot:q,urlAfterRedirects:g,extras:De(V({},S),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,X(o)}else{let f="";return this.events.next(new ri(l.id,this.urlSerializer.serialize(l.extractedUrl),f,il.IgnoredByUrlHandlingStrategy)),l.resolve(null),ln}}),He(l=>{let u=new Ah(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),te(l=>(this.currentTransition=o=De(V({},l),{guards:ek(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),dk(this.environmentInjector,l=>this.events.next(l)),He(l=>{if(o.guardsResult=l.guardsResult,qr(l.guardsResult))throw iy(this.urlSerializer,l.guardsResult);let u=new kh(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),vt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Bt.GuardRejected),!1)),yh(l=>{if(l.guards.canActivateChecks.length)return X(l).pipe(He(u=>{let m=new Ch(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(m)}),rt(u=>{let m=!1;return X(u).pipe(Vk(this.paramsInheritanceStrategy,this.environmentInjector),He({next:()=>m=!0,complete:()=>{m||this.cancelNavigationTransition(u,"",Bt.NoDataFromResolver)}}))}),He(u=>{let m=new Dh(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(m)}))}),yh(l=>{let u=m=>{let f=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(m.routeConfig).pipe(He(g=>{m.component=g}),te(()=>{})));for(let g of m.children)f.push(...u(g));return f};return Tr(u(l.targetSnapshot.root)).pipe(Pu(null),Mn(1))}),yh(()=>this.afterPreactivation()),rt(()=>{let{currentSnapshot:l,targetSnapshot:u}=o,m=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return m?Me(m).pipe(te(()=>o)):X(o)}),te(l=>{let u=HA(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=De(V({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),He(()=>{this.events.next(new Us)}),JA(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Mn(1),He({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Vn(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),Gt(this.transitionAbortSubject.pipe(He(l=>{throw l}))),ls(()=>{!s&&!c&&this.cancelNavigationTransition(o,"",Bt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ar(l=>{if(c=!0,oy(l))this.events.next(new ii(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),QA(l)?this.events.next(new Bs(l.url)):o.resolve(!1);else{this.events.next(new zs(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(t.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return ln}))}))}cancelNavigationTransition(t,i,r){let o=new ii(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Kk(n){return n!==Os}var Wk=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Y({token:n,factory:()=>U(Qk),providedIn:"root"})}}return n})(),Hh=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Qk=(()=>{class n extends Hh{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Sr(n)))(r||n)}})()}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),fy=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Y({token:n,factory:()=>U(Yk),providedIn:"root"})}}return n})(),Yk=(()=>{class n extends fy{constructor(){super(...arguments),this.location=U(xs),this.urlSerializer=U(Ks),this.options=U(Xs,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=U(Zh),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ni,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Jv(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&t(i.url,i.state)})}handleRouterEvent(t,i){if(t instanceof $r)this.stateMemento=this.createStateMemento();else if(t instanceof ri)this.rawUrlTree=i.initialUrl;else if(t instanceof rl){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(r,i)}}else t instanceof Us?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):t instanceof ii&&(t.code===Bt.GuardRejected||t.code===Bt.NoDataFromResolver)?this.restoreHistory(i):t instanceof zs?this.restoreHistory(i,!0):t instanceof Vn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,i){let r=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){let o=this.browserPageId,s=V(V({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(r,"",s)}else{let o=V(V({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(r,"",o)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Sr(n)))(r||n)}})()}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ns=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ns||{});function py(n,e){n.events.pipe(vt(t=>t instanceof Vn||t instanceof ii||t instanceof zs||t instanceof ri),te(t=>t instanceof Vn||t instanceof ri?Ns.COMPLETE:(t instanceof ii?t.code===Bt.Redirect||t.code===Bt.SupersededByNewNavigation:!1)?Ns.REDIRECTING:Ns.FAILED),vt(t=>t!==Ns.REDIRECTING),Mn(1)).subscribe(()=>{e()})}function Xk(n){throw n}var Zk={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Jk={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},qi=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=U(xc),this.stateManager=U(fy),this.options=U(Xs,{optional:!0})||{},this.pendingTasks=U(zu),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=U(Jh),this.urlSerializer=U(Ks),this.location=U(xs),this.urlHandlingStrategy=U(Zh),this._events=new Le,this.errorHandler=this.options.errorHandler||Xk,this.navigated=!1,this.routeReuseStrategy=U(Wk),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=U(ul,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!U(ml,{optional:!0}),this.eventsSubscription=new as,this.isNgZoneEnabled=U(J)instanceof J&&J.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof ii&&i.code!==Bt.Redirect&&i.code!==Bt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Vn)this.navigated=!0;else if(i instanceof Bs){let s=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),c={info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||Kk(r.source)};this.scheduleNavigation(s,Os,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}tC(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Os,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",i)},0)})}navigateToSyncWithBrowser(t,i,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let l=V({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(t);this.scheduleNavigation(c,i,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Qh),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:c,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:s,m=null;switch(c){case"merge":m=V(V({},this.currentUrlTree.queryParams),o);break;case"preserve":m=this.currentUrlTree.queryParams;break;default:m=o||null}m!==null&&(m=this.removeEmptyProps(m));let f;try{let g=r?r.snapshot:this.routerState.snapshot.root;f=Qv(g)}catch{(typeof t[0]!="string"||!t[0].startsWith("/"))&&(t=[]),f=this.currentUrlTree.root}return Yv(f,t,m,u??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=qr(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,Os,null,i)}navigate(t,i={skipLocationChange:!1}){return eC(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=V({},Zk):i===!1?r=V({},Jk):r=i,qr(t))return Rv(this.currentUrlTree,t,r);let o=this.parseUrl(t);return Rv(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(t,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let c,l,u;s?(c=s.resolve,l=s.reject,u=s.promise):u=new Promise((f,g)=>{c=f,l=g});let m=this.pendingTasks.add();return py(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(m))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function eC(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Ae(4008,!1)}function tC(n){return!(n instanceof Us)&&!(n instanceof Bs)}var hl=class{};var nC=(()=>{class n{constructor(t,i,r,o,s){this.router=t,this.injector=r,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(vt(t=>t instanceof Vn),Ni(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){let r=[];for(let o of i){o.providers&&!o._injector&&(o._injector=ju(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,c=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(c,o.children??o._loadedRoutes))}return Me(r).pipe(Su())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(t,i):r=X(null);let o=r.pipe(Lt(s=>s===null?X(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(i.loadComponent&&!i._loadedComponent){let s=this.loader.loadComponent(i);return Me([o,s]).pipe(Su())}else return o})}static{this.\u0275fac=function(i){return new(i||n)(F(qi),F(Ac),F(Dr),F(hl),F(Xh))}}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),gy=new K(""),iC=(()=>{class n{constructor(t,i,r,o,s={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=U(Dr),s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof $r?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Vn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof ri&&t.code===il.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ol&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>k(this,null,function*(){yield new Promise(r=>{setTimeout(()=>{r()}),Lu(()=>{r()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new ol(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(i){Rr()}}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac})}}return n})();function rC(n){return n.routerState.root}function Zs(n,e){return{\u0275kind:n,\u0275providers:e}}function oC(){let n=U(pc);return e=>{let t=n.get(ys);if(e!==t.components[0])return;let i=n.get(qi),r=n.get(by);n.get(em)===1&&i.initialNavigation(),n.get(_y,null,Ou.Optional)?.setUpPreloading(),n.get(gy,null,Ou.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var by=new K("",{factory:()=>new Le}),em=new K("",{providedIn:"root",factory:()=>1});function sC(){return Zs(2,[{provide:em,useValue:0},{provide:Bu,multi:!0,deps:[pc],useFactory:e=>{let t=e.get(y_,Promise.resolve());return()=>t.then(()=>new Promise(i=>{let r=e.get(qi),o=e.get(by);py(r,()=>{i(!0)}),e.get(Jh).afterPreactivation=()=>(i(!0),o.closed?X(void 0):o),r.initialNavigation()}))}}])}function aC(){return Zs(3,[{provide:Bu,multi:!0,useFactory:()=>{let e=U(qi);return()=>{e.setUpLocationChangeListener()}}},{provide:em,useValue:2}])}var _y=new K("");function cC(n){return Zs(0,[{provide:_y,useExisting:nC},{provide:hl,useExisting:n}])}function lC(){return Zs(8,[Fv,{provide:ml,useExisting:Fv}])}function dC(n){let e=[{provide:hy,useValue:Gk},{provide:my,useValue:V({skipNextTransition:!!n?.skipInitialTransition},n)}];return Zs(9,e)}var Vv=new K("ROUTER_FORROOT_GUARD"),uC=[xs,{provide:Ks,useClass:Ls},qi,Ws,{provide:Gr,useFactory:rC,deps:[qi]},Xh,[]],tm=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[uC,[],{provide:ul,multi:!0,useValue:t},{provide:Vv,useFactory:pC,deps:[[qi,new us,new e_]]},{provide:Xs,useValue:i||{}},i?.useHash?mC():fC(),hC(),i?.preloadingStrategy?cC(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?gC(i):[],i?.bindToComponentInputs?lC().\u0275providers:[],i?.enableViewTransitions?dC().\u0275providers:[],bC()]}}static forChild(t){return{ngModule:n,providers:[{provide:ul,multi:!0,useValue:t}]}}static{this.\u0275fac=function(i){return new(i||n)(F(Vv,8))}}static{this.\u0275mod=ce({type:n})}static{this.\u0275inj=ae({})}}return n})();function hC(){return{provide:gy,useFactory:()=>{let n=U(A_),e=U(J),t=U(Xs),i=U(Jh),r=U(Ks);return t.scrollOffset&&n.setOffset(t.scrollOffset),new iC(r,i,n,e,t)}}}function mC(){return{provide:Gu,useClass:w_}}function fC(){return{provide:Gu,useClass:x_}}function pC(n){return"guarded"}function gC(n){return[n.initialNavigation==="disabled"?aC().\u0275providers:[],n.initialNavigation==="enabledBlocking"?sC().\u0275providers:[]]}var Lv=new K("");function bC(){return[{provide:Lv,useFactory:oC},{provide:Tc,multi:!0,useExisting:Lv}]}var _C=[],vy=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ce({type:n})}static{this.\u0275inj=ae({imports:[tm.forRoot(_C),tm]})}}return n})();var im;try{im=typeof Intl<"u"&&Intl.v8BreakIterator}catch{im=!1}var at=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?T_(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||im)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(i){return new(i||n)(F(Ct))}}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Wr,yy=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function rm(){if(Wr)return Wr;if(typeof document!="object"||!document)return Wr=new Set(yy),Wr;let n=document.createElement("input");return Wr=new Set(yy.filter(e=>(n.setAttribute("type",e),n.type===e))),Wr}var Js;function vC(){if(Js==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Js=!0}))}finally{Js=Js||!1}return Js}function si(n){return vC()?n:!!n.capture}var nm;function yC(){if(nm==null){let n=typeof document<"u"?document.head:null;nm=!!(n&&(n.createShadowRoot||n.attachShadow))}return nm}function xy(n){if(yC()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function ai(n){return n.composedPath?n.composedPath()[0]:n.target}function wy(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function bn(n){return n!=null&&`${n}`!="false"}function om(n){return Array.isArray(n)?n:[n]}function _n(n){return n instanceof Pe?n.nativeElement:n}var xC=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Iy=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ce({type:n})}static{this.\u0275inj=ae({providers:[xC]})}}return n})();var Ey=new Set,Gi,wC=(()=>{class n{constructor(t,i){this._platform=t,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):EC}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&IC(t,this._nonce),this._matchMedia(t)}static{this.\u0275fac=function(i){return new(i||n)(F(at),F(fs,8))}}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function IC(n,e){if(!Ey.has(n))try{Gi||(Gi=document.createElement("style"),e&&Gi.setAttribute("nonce",e),Gi.setAttribute("type","text/css"),document.head.appendChild(Gi)),Gi.sheet&&(Gi.sheet.insertRule(`@media ${n} {body{ }}`,0),Ey.add(n))}catch(t){console.error(t)}}function EC(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var Ay=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new Le}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return Ty(om(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let r=Ty(om(t)).map(s=>this._registerQuery(s).observable),o=Tr(r);return o=lc(o.pipe(Mn(1)),o.pipe(mc(1),Mu(0))),o.pipe(te(s=>{let c={matches:!1,breakpoints:{}};return s.forEach(({matches:l,query:u})=>{c.matches=c.matches||l,c.breakpoints[u]=l}),c}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);let i=this._mediaMatcher.matchMedia(t),o={observable:new Jt(s=>{let c=l=>this._zone.run(()=>s.next(l));return i.addListener(c),()=>{i.removeListener(c)}}).pipe(Zn(i),te(({matches:s})=>({query:t,matches:s})),Gt(this._destroySubject)),mql:i};return this._queries.set(t,o),o}static{this.\u0275fac=function(i){return new(i||n)(F(wC),F(J))}}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Ty(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function am(n){return n.buttons===0||n.detail===0}function cm(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var TC=new K("cdk-input-modality-detector-options"),AC={ignoreKeys:[18,17,224,91,16]},Dy=650,Qr=si({passive:!0,capture:!0}),kC=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,i,r,o){this._platform=t,this._mostRecentTarget=null,this._modality=new Pt(null),this._lastTouchMs=0,this._onKeydown=s=>{this._options?.ignoreKeys?.some(c=>c===s.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=ai(s))},this._onMousedown=s=>{Date.now()-this._lastTouchMs<Dy||(this._modality.next(am(s)?"keyboard":"mouse"),this._mostRecentTarget=ai(s))},this._onTouchstart=s=>{if(cm(s)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ai(s)},this._options=V(V({},AC),o),this.modalityDetected=this._modality.pipe(mc(1)),this.modalityChanged=this.modalityDetected.pipe(uc()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Qr),r.addEventListener("mousedown",this._onMousedown,Qr),r.addEventListener("touchstart",this._onTouchstart,Qr)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Qr),document.removeEventListener("mousedown",this._onMousedown,Qr),document.removeEventListener("touchstart",this._onTouchstart,Qr))}static{this.\u0275fac=function(i){return new(i||n)(F(at),F(J),F(Se),F(TC,8))}}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var gl=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(gl||{}),CC=new K("cdk-focus-monitor-default-options"),pl=si({passive:!0,capture:!0}),Sy=(()=>{class n{constructor(t,i,r,o,s){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Le,this._rootNodeFocusAndBlurListener=c=>{let l=ai(c);for(let u=l;u;u=u.parentElement)c.type==="focus"?this._onFocus(c,u):this._onBlur(c,u)},this._document=o,this._detectionMode=s?.detectionMode||gl.IMMEDIATE}monitor(t,i=!1){let r=_n(t);if(!this._platform.isBrowser||r.nodeType!==1)return X();let o=xy(r)||this._getDocument(),s=this._elementInfo.get(r);if(s)return i&&(s.checkChildren=!0),s.subject;let c={checkChildren:i,subject:new Le,rootNode:o};return this._elementInfo.set(r,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(t){let i=_n(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){let o=_n(t),s=this._getDocument().activeElement;o===s?this._getClosestElementsInfo(o).forEach(([c,l])=>this._originChanged(c,i,l)):(this._setOrigin(i),typeof o.focus=="function"&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===gl.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused",i==="touch"),t.classList.toggle("cdk-keyboard-focused",i==="keyboard"),t.classList.toggle("cdk-mouse-focused",i==="mouse"),t.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=t,this._originFromTouchInteraction=t==="touch"&&i,this._detectionMode===gl.IMMEDIATE){clearTimeout(this._originTimeoutId);let r=this._originFromTouchInteraction?Dy:1;this._originTimeoutId=setTimeout(()=>this._origin=null,r)}})}_onFocus(t,i){let r=this._elementInfo.get(i),o=ai(t);!r||!r.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),r)}_onBlur(t,i){let r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;let i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,pl),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,pl)}),this._rootNodeFocusListenerCount.set(i,r+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Gt(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){let i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,pl),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,pl),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){let i=[];return this._elementInfo.forEach((r,o)=>{(o===t||r.checkChildren&&o.contains(t))&&i.push([o,r])}),i}_isLastInteractionFromInputLabel(t){let{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if(r!=="mouse"||!i||i===t||t.nodeName!=="INPUT"&&t.nodeName!=="TEXTAREA"||t.disabled)return!1;let o=t.labels;if(o){for(let s=0;s<o.length;s++)if(o[s].contains(i))return!0}return!1}static{this.\u0275fac=function(i){return new(i||n)(F(J),F(at),F(kC),F(Se,8),F(CC,8))}}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Hi=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(Hi||{}),ky="cdk-high-contrast-black-on-white",Cy="cdk-high-contrast-white-on-black",sm="cdk-high-contrast-active",Ry=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=U(Ay).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Hi.NONE;let t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);let i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Hi.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Hi.BLACK_ON_WHITE}return Hi.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let t=this._document.body.classList;t.remove(sm,ky,Cy),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===Hi.BLACK_ON_WHITE?t.add(sm,ky):i===Hi.WHITE_ON_BLACK&&t.add(sm,Cy)}}static{this.\u0275fac=function(i){return new(i||n)(F(at),F(Se))}}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var SC=new K("cdk-dir-doc",{providedIn:"root",factory:RC});function RC(){return U(Se)}var MC=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function PC(n){let e=n?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?MC.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var My=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new dt,t){let i=t.body?t.body.dir:null,r=t.documentElement?t.documentElement.dir:null;this.value=PC(i||r||"ltr")}}ngOnDestroy(){this.change.complete()}static{this.\u0275fac=function(i){return new(i||n)(F(SC,8))}}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var lm=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ce({type:n})}static{this.\u0275inj=ae({})}}return n})();var OC=["mat-internal-form-field",""],VC=["*"];function LC(){return!0}var jC=new K("mat-sanity-checks",{providedIn:"root",factory:LC}),Je=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return wy()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[t]}static{this.\u0275fac=function(i){return new(i||n)(F(Ry),F(jC,8),F(Se))}}static{this.\u0275mod=ce({type:n})}static{this.\u0275inj=ae({imports:[lm,lm]})}}return n})();var _l=class{constructor(e,t,i,r,o){this._defaultMatcher=e,this.ngControl=t,this._parentFormGroup=i,this._parentForm=r,this._stateChanges=o,this.errorState=!1}updateErrorState(){let e=this.errorState,t=this._parentFormGroup||this._parentForm,i=this.matcher||this._defaultMatcher,r=this.ngControl?this.ngControl.control:null,o=i?.isErrorState(r,t)??!1;o!==e&&(this.errorState=o,this._stateChanges.next())}};var Uy=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Wt=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(Wt||{}),hm=class{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=Wt.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},Py=si({passive:!0,capture:!0}),mm=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let t=ai(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(o=>o.handleEvent(e))})}}addHandler(e,t,i,r){let o=this._events.get(t);if(o){let s=o.get(i);s?s.add(r):o.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,Py)})}removeHandler(e,t,i){let r=this._events.get(e);if(!r)return;let o=r.get(t);o&&(o.delete(i),o.size===0&&r.delete(t),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,Py)))}},Ny={enterDuration:225,exitDuration:150},zC=800,Fy=si({passive:!0,capture:!0}),Oy=["mousedown","touchstart"],Vy=["mouseup","mouseleave","touchend","touchcancel"],fm=class n{static{this._eventManager=new mm}constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=_n(i))}fadeInRipple(e,t,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=V(V({},Ny),i.animation);i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);let s=i.radius||UC(e,t,r),c=e-r.left,l=t-r.top,u=o.enterDuration,m=document.createElement("div");m.classList.add("mat-ripple-element"),m.style.left=`${c-s}px`,m.style.top=`${l-s}px`,m.style.height=`${s*2}px`,m.style.width=`${s*2}px`,i.color!=null&&(m.style.backgroundColor=i.color),m.style.transitionDuration=`${u}ms`,this._containerElement.appendChild(m);let f=window.getComputedStyle(m),g=f.transitionProperty,w=f.transitionDuration,R=g==="none"||w==="0s"||w==="0s, 0s"||r.width===0&&r.height===0,S=new hm(this,m,i,R);m.style.transform="scale3d(1, 1, 1)",S.state=Wt.FADING_IN,i.persistent||(this._mostRecentTransientRipple=S);let M=null;return!R&&(u||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let q=()=>this._finishRippleTransition(S),Q=()=>this._destroyRipple(S);m.addEventListener("transitionend",q),m.addEventListener("transitioncancel",Q),M={onTransitionEnd:q,onTransitionCancel:Q}}),this._activeRipples.set(S,M),(R||!u)&&this._finishRippleTransition(S),S}fadeOutRipple(e){if(e.state===Wt.FADING_OUT||e.state===Wt.HIDDEN)return;let t=e.element,i=V(V({},Ny),e.config.animation);t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=Wt.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let t=_n(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,Oy.forEach(i=>{n._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Vy.forEach(t=>{this._triggerElement.addEventListener(t,this,Fy)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Wt.FADING_IN?this._startFadeOutTransition(e):e.state===Wt.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=Wt.VISIBLE,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Wt.HIDDEN,t!==null&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){let t=am(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+zC;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!cm(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let t=e.state===Wt.VISIBLE||e.config.terminateOnPointerUp&&e.state===Wt.FADING_IN;!e.config.persistent&&t&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(Oy.forEach(t=>n._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(Vy.forEach(t=>e.removeEventListener(t,this,Fy)),this._pointerUpEventsRegistered=!1))}};function UC(n,e,t){let i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}var By=new K("mat-ripple-global-options"),vl=(()=>{class n{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,i,r,o,s){this._elementRef=t,this._animationMode=s,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new fm(this,i,t,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:V(V(V({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return typeof t=="number"?this._rippleRenderer.fadeInRipple(t,i,V(V({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,V(V({},this.rippleConfig),t))}static{this.\u0275fac=function(i){return new(i||n)(B(Pe),B(J),B(at),B(By,8),B(en,8))}}static{this.\u0275dir=be({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){i&2&&Fe("mat-ripple-unbounded",r.unbounded)},inputs:{color:[de.None,"matRippleColor","color"],unbounded:[de.None,"matRippleUnbounded","unbounded"],centered:[de.None,"matRippleCentered","centered"],radius:[de.None,"matRippleRadius","radius"],animation:[de.None,"matRippleAnimation","animation"],disabled:[de.None,"matRippleDisabled","disabled"],trigger:[de.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0})}}return n})(),qy=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ce({type:n})}static{this.\u0275inj=ae({imports:[Je,Je]})}}return n})();var Ly={capture:!0},jy=["focus","click","mouseenter","touchstart"],dm="mat-ripple-loader-uninitialized",um="mat-ripple-loader-class-name",zy="mat-ripple-loader-centered",bl="mat-ripple-loader-disabled",$y=(()=>{class n{constructor(){this._document=U(Se,{optional:!0}),this._animationMode=U(en,{optional:!0}),this._globalRippleOptions=U(By,{optional:!0}),this._platform=U(at),this._ngZone=U(J),this._hosts=new Map,this._onInteraction=t=>{if(!(t.target instanceof HTMLElement))return;let r=t.target.closest(`[${dm}]`);r&&this._createRipple(r)},this._ngZone.runOutsideAngular(()=>{for(let t of jy)this._document?.addEventListener(t,this._onInteraction,Ly)})}ngOnDestroy(){let t=this._hosts.keys();for(let i of t)this.destroyRipple(i);for(let i of jy)this._document?.removeEventListener(i,this._onInteraction,Ly)}configureRipple(t,i){t.setAttribute(dm,""),(i.className||!t.hasAttribute(um))&&t.setAttribute(um,i.className||""),i.centered&&t.setAttribute(zy,""),i.disabled&&t.setAttribute(bl,"")}getRipple(t){return this._hosts.get(t)||this._createRipple(t)}setDisabled(t,i){let r=this._hosts.get(t);if(r){r.disabled=i;return}i?t.setAttribute(bl,""):t.removeAttribute(bl)}_createRipple(t){if(!this._document)return;let i=this._hosts.get(t);if(i)return i;t.querySelector(".mat-ripple")?.remove();let r=this._document.createElement("span");r.classList.add("mat-ripple",t.getAttribute(um)),t.append(r);let o=new vl(new Pe(r),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return o._isInitialized=!0,o.trigger=t,o.centered=t.hasAttribute(zy),o.disabled=t.hasAttribute(bl),this.attachRipple(t,o),o}attachRipple(t,i){t.removeAttribute(dm),this._hosts.set(t,i)}destroyRipple(t){let i=this._hosts.get(t);i&&(i.ngOnDestroy(),this._hosts.delete(t))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Gy=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=$e({type:n,selectors:[["div","mat-internal-form-field",""]],hostAttrs:[1,"mdc-form-field","mat-internal-form-field"],hostVars:2,hostBindings:function(i,r){i&2&&Fe("mdc-form-field--align-end",r.labelPosition==="before")},inputs:{labelPosition:"labelPosition"},standalone:!0,features:[xt],attrs:OC,ngContentSelectors:VC,decls:1,vars:0,template:function(i,r){i&1&&(Ht(),Oe(0))},styles:[".mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mdc-form-field{font-family:var(--mdc-form-field-label-text-font);line-height:var(--mdc-form-field-label-text-line-height);font-size:var(--mdc-form-field-label-text-size);font-weight:var(--mdc-form-field-label-text-weight);letter-spacing:var(--mdc-form-field-label-text-tracking);color:var(--mdc-form-field-label-text-color)}.mat-internal-form-field{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}"],encapsulation:2,changeDetection:0})}}return n})();var qC=["*"];var $C=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],GC=["[mat-card-avatar], [matCardAvatar]",`mat-card-title, mat-card-subtitle,
      [mat-card-title], [mat-card-subtitle],
      [matCardTitle], [matCardSubtitle]`,"*"],HC=new K("MAT_CARD_CONFIG"),Hy=(()=>{class n{constructor(t){this.appearance=t?.appearance||"raised"}static{this.\u0275fac=function(i){return new(i||n)(B(HC,8))}}static{this.\u0275cmp=$e({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(i,r){i&2&&Fe("mat-mdc-card-outlined",r.appearance==="outlined")("mdc-card--outlined",r.appearance==="outlined")},inputs:{appearance:"appearance"},exportAs:["matCard"],standalone:!0,features:[xt],ngContentSelectors:qC,decls:1,vars:0,template:function(i,r){i&1&&(Ht(),Oe(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{color:rgba(0, 0, 0, 0.6);flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mdc-card__action--icon:not(:disabled){color:rgba(0, 0, 0, 0.6)}.mat-mdc-card{border-radius:var(--mdc-elevated-card-container-shape);background-color:var(--mdc-elevated-card-container-color);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color);box-shadow:var(--mdc-elevated-card-container-elevation)}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape)}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width);border-style:solid;border-color:var(--mdc-outlined-card-outline-color);border-radius:var(--mdc-outlined-card-container-shape);background-color:var(--mdc-outlined-card-container-color);box-shadow:var(--mdc-outlined-card-container-elevation)}.mat-mdc-card-outlined .mdc-card::after{border-radius:var(--mdc-outlined-card-container-shape)}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font);line-height:var(--mat-card-title-text-line-height);font-size:var(--mat-card-title-text-size);letter-spacing:var(--mat-card-title-text-tracking);font-weight:var(--mat-card-title-text-weight)}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color);font-family:var(--mat-card-subtitle-text-font);line-height:var(--mat-card-subtitle-text-line-height);font-size:var(--mat-card-subtitle-text-size);letter-spacing:var(--mat-card-subtitle-text-tracking);font-weight:var(--mat-card-subtitle-text-weight)}.mat-mdc-card{position:relative}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0})}}return n})(),Ky=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=be({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"],standalone:!0})}}return n})();var Wy=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=be({type:n,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-mdc-card-subtitle"],standalone:!0})}}return n})();var Qy=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=$e({type:n,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-mdc-card-header"],standalone:!0,features:[xt],ngContentSelectors:GC,decls:4,vars:0,consts:[[1,"mat-mdc-card-header-text"]],template:function(i,r){i&1&&(Ht($C),Oe(0),G(1,"div",0),Oe(2,1),H(),Oe(3,2))},encapsulation:2,changeDetection:0})}}return n})();var Yy=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=be({type:n,selectors:[["","mat-card-avatar",""],["","matCardAvatar",""]],hostAttrs:[1,"mat-mdc-card-avatar"],standalone:!0})}}return n})();var Xy=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ce({type:n})}static{this.\u0275inj=ae({imports:[Je,Fr,Je]})}}return n})();var yl=(()=>{class n{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(t){this._vertical=bn(t)}get inset(){return this._inset}set inset(t){this._inset=bn(t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=$e({type:n,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(i,r){i&2&&(yt("aria-orientation",r.vertical?"vertical":"horizontal"),Fe("mat-divider-vertical",r.vertical)("mat-divider-horizontal",!r.vertical)("mat-divider-inset",r.inset))},inputs:{vertical:"vertical",inset:"inset"},standalone:!0,features:[xt],decls:0,vars:0,template:function(i,r){},styles:[".mat-divider{display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color);border-top-width:var(--mat-divider-width)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color);border-right-width:var(--mat-divider-width)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0})}}return n})(),Zy=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ce({type:n})}static{this.\u0275inj=ae({imports:[Je,Je]})}}return n})();var WC="firebase",QC="10.14.1";ei(WC,QC,"app");var Yr=new Nr("ANGULARFIRE2_VERSION");var YC=(n,e)=>{let t=e?[e]:P_(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(s=>{i.includes(s)||i.push(s)})}),i},Ki=class{constructor(){return YC(XC)}},XC="app-check";function pm(){}var xl=class{zone;delegate;constructor(e,t=Kb){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){let r=this.zone,o=function(s){r.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,i)}},gm=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",pm,{},pm,pm)),t.pipe(He({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},wl=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new xl(Zone.current)),this.insideAngular=t.run(()=>new xl(Zone.current,ac)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(F(J))};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ZC(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Ft(n){return JC(ZC())(n)}function JC(n){return function(t){return t=t.lift(new gm(n.ngZone)),t.pipe(Er(n.outsideAngular),Pi(n.insideAngular))}}var nD=new Map,iD={activated:!1,tokenObservers:[]},rD={initialized:!1,enabled:!1};function nn(n){return nD.get(n)||Object.assign({},iD)}function o0(){return rD}var oD="https://content-firebaseappcheck.googleapis.com/v1";var sD="exchangeDebugToken",t0={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},lF=24*60*60*1e3;var _m=class{constructor(e,t,i,r,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return k(this,null,function*(){this.stop();try{this.pending=new Ku,this.pending.promise.catch(t=>{}),yield aD(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Ku,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function aD(n){return new Promise(e=>{setTimeout(e,n)})}var cD={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},ci=new R_("appCheck","AppCheck",cD);function s0(n){if(!nn(n).activated)throw ci.create("use-before-activation",{appName:n.name})}function a0(i,r){return k(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let w=yield s.getHeartbeatsHeader();w&&(o["X-Firebase-Client"]=w)}let c={method:"POST",body:JSON.stringify(e),headers:o},l;try{l=yield fetch(n,c)}catch(w){throw ci.create("fetch-network-error",{originalErrorMessage:w?.message})}if(l.status!==200)throw ci.create("fetch-status-error",{httpStatus:l.status});let u;try{u=yield l.json()}catch(w){throw ci.create("fetch-parse-error",{originalErrorMessage:w?.message})}let m=u.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw ci.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let f=Number(m[1])*1e3,g=Date.now();return{token:u.token,expireTimeMillis:g+f,issuedAtTimeMillis:g}})}function c0(n,e){let{projectId:t,appId:i,apiKey:r}=n.options;return{url:`${oD}/projects/${t}/apps/${i}:${sD}?key=${r}`,body:{debug_token:e}}}var lD="firebase-app-check-database",dD=1,vm="firebase-app-check-store";var Il=null;function uD(){return Il||(Il=new Promise((n,e)=>{try{let t=indexedDB.open(lD,dD);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var r;e(ci.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},t.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(vm,{keyPath:"compositeKey"})}}}catch(t){e(ci.create("storage-open",{originalErrorMessage:t?.message}))}}),Il)}function hD(n,e){return mD(fD(n),e)}function mD(n,e){return k(this,null,function*(){let i=(yield uD()).transaction(vm,"readwrite"),o=i.objectStore(vm).put({compositeKey:n,value:e});return new Promise((s,c)=>{o.onsuccess=l=>{s()},i.onerror=l=>{var u;c(ci.create("storage-set",{originalErrorMessage:(u=l.target.error)===null||u===void 0?void 0:u.message}))}})})}function fD(n){return`${n.options.appId}-${n.name}`}var ym=new Sc("@firebase/app-check");function bm(n,e){return Dc()?hD(n,e).catch(t=>{ym.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function l0(){return o0().enabled}function d0(){return k(this,null,function*(){let n=o0();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var pD={error:"UNKNOWN_ERROR"};function gD(n){return C_.encodeString(JSON.stringify(n),!1)}function xm(n,e=!1){return k(this,null,function*(){let t=n.app;s0(t);let i=nn(t),r=i.token,o;if(r&&!ea(r)&&(i.token=void 0,r=void 0),!r){let l=yield i.cachedTokenPromise;l&&(ea(l)?r=l:yield bm(t,void 0))}if(!e&&r&&ea(r))return{token:r.token};let s=!1;if(l0()){i.exchangeTokenPromise||(i.exchangeTokenPromise=a0(c0(t,yield d0()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),s=!0);let l=yield i.exchangeTokenPromise;return yield bm(t,l),i.token=l,{token:l.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),s=!0),r=yield nn(t).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?ym.warn(l.message):ym.error(l),o=l}let c;return r?o?ea(r)?c={token:r.token,internalError:o}:c=i0(o):(c={token:r.token},i.token=r,yield bm(t,r)):c=i0(o),s&&yD(t,c),c})}function bD(n){return k(this,null,function*(){let e=n.app;s0(e);let{provider:t}=nn(e);if(l0()){let i=yield d0(),{token:r}=yield a0(c0(e,i),n.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield t.getToken();return{token:i}}})}function _D(n,e,t,i){let{app:r}=n,o=nn(r),s={next:t,error:i,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&ea(o.token)){let c=o.token;Promise.resolve().then(()=>{t({token:c.token}),n0(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>n0(n))}function u0(n,e){let t=nn(n),i=t.tokenObservers.filter(r=>r.next!==e);i.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function n0(n){let{app:e}=n,t=nn(e),i=t.tokenRefresher;i||(i=vD(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function vD(n){let{app:e}=n;return new _m(()=>k(this,null,function*(){let t=nn(e),i;if(t.token?i=yield xm(n,!0):i=yield xm(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let t=nn(e);if(t.token){let i=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,r=t.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},t0.RETRIAL_MIN_WAIT,t0.RETRIAL_MAX_WAIT)}function yD(n,e){let t=nn(n).tokenObservers;for(let i of t)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function ea(n){return n.expireTimeMillis-Date.now()>0}function i0(n){return{token:gD(pD),error:n}}var wm=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=nn(this.app);for(let t of e)u0(this.app,t.next);return Promise.resolve()}};function xD(n,e){return new wm(n,e)}function wD(n){return{getToken:e=>xm(n,e),getLimitedUseToken:()=>bD(n),addTokenListener:e=>_D(n,"INTERNAL",e),removeTokenListener:e=>u0(n.app,e)}}var ID="@firebase/app-check",ED="0.8.8";var TD="app-check",r0="app-check-internal";function AD(){Is(new Li(TD,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return xD(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(r0).initialize()})),Is(new Li(r0,n=>{let e=n.getProvider("app-check").getImmediate();return wD(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ei(ID,ED)}AD();var kD=["localhost","0.0.0.0","127.0.0.1"],xF=typeof window<"u"&&kD.includes(window.location.hostname);var CD="firebase",DD="10.14.1";Nt.registerVersion(CD,DD,"app-compat");var SD=["ngOnDestroy"],f0=(n,e,t,i={})=>new Proxy(n,{get:(r,o)=>t.runOutsideAngular(()=>{if(n[o])return i?.spy?.get&&i.spy.get(o,n[o]),n[o];if(SD.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(c=>{let l=c?.[o];return typeof l=="function"?l.bind(c):l?.then?l.then(u=>t.run(()=>u)):t.run(()=>l)});return new Proxy(()=>{},{get:(c,l)=>s[l],apply:(c,l,u)=>s.then(m=>{let f=m?.(...u);return i?.spy?.apply&&i.spy.apply(o,u,f),f})})})});var El=class{constructor(e){return e}},Xr=new K("angularfire2.app.options"),Zr=new K("angularfire2.app.name");function ta(n,e,t){let i=typeof t=="string"&&t||"[DEFAULT]",r=typeof t=="object"&&t||{};r.name=r.name||i;let s=Nt.apps.filter(c=>c&&c.name===r.name)[0]||e.runOutsideAngular(()=>Nt.initializeApp(n,r));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let c=!!module.hot;RD("error",`${s.name} Firebase App already initialized with different options${c?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new El(s)}var RD=(n,...e)=>{qu()&&typeof console<"u"&&console[n](...e)},MD={provide:El,useFactory:ta,deps:[Xr,J,[new us,Zr]]},p0=(()=>{class n{static initializeApp(t,i){return{ngModule:n,providers:[{provide:Xr,useValue:t},{provide:Zr,useValue:i}]}}constructor(t){Nt.registerVersion("angularfire",Yr.full,"core"),Nt.registerVersion("angularfire",Yr.full,"app-compat"),Nt.registerVersion("angular",d_.full,t.toString())}static \u0275fac=function(i){return new(i||n)(F(Ct))};static \u0275mod=ce({type:n});static \u0275inj=ae({providers:[MD]})}return n})();function Tl(n,e,t,i,r){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(c=>c[0]===n)||[];if(o)return PD(r,s)||(m0("error",`${e} was already initialized on the ${t} Firebase App with different settings.${ND?" You may need to reload as Firebase is not HMR aware.":""}`),m0("warn",{is:r,was:s})),o;{let c=i();return globalThis.\u0275AngularfireInstanceCache.push([n,c,r]),c}}function PD(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var ND=typeof module<"u"&&!!module.hot,m0=(n,...e)=>{qu()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Im=new K("angularfire2.auth.use-emulator"),Em=new K("angularfire2.auth.settings"),Tm=new K("angularfire2.auth.tenant-id"),Am=new K("angularfire2.auth.langugage-code"),km=new K("angularfire2.auth.use-device-language"),Cm=new K("angularfire.auth.persistence"),Dm=(n,e,t,i,r,o,s,c)=>Tl(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let l=e.runOutsideAngular(()=>n.auth());if(t&&l.useEmulator(...t),i&&(l.tenantId=i),l.languageCode=r,o&&l.useDeviceLanguage(),s)for(let[u,m]of Object.entries(s))l.settings[u]=m;return c&&l.setPersistence(c),l},[t,i,r,o,s,c]),g0=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,i,r,o,s,c,l,u,m,f,g,w){let R=new Le,S=X(void 0).pipe(Pi(s.outsideAngular),rt(()=>o.runOutsideAngular(()=>import("./chunk-KNZAIXMN.js"))),te(()=>ta(t,o,i)),te(M=>Dm(M,o,c,u,m,f,l,g)),ds({bufferSize:1,refCount:!1}));if(On(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=X(null);else{S.pipe(dn()).subscribe();let M=S.pipe(rt(L=>L.getRedirectResult().then(ee=>ee,()=>null)),Ft,ds({bufferSize:1,refCount:!1})),q=S.pipe(rt(L=>new Jt(ee=>({unsubscribe:o.runOutsideAngular(()=>L.onAuthStateChanged(ie=>ee.next(ie),ie=>ee.error(ie),()=>ee.complete()))})))),Q=S.pipe(rt(L=>new Jt(ee=>({unsubscribe:o.runOutsideAngular(()=>L.onIdTokenChanged(ie=>ee.next(ie),ie=>ee.error(ie),()=>ee.complete()))}))));this.authState=M.pipe(Fu(q),Er(s.outsideAngular),Pi(s.insideAngular)),this.user=M.pipe(Fu(Q),Er(s.outsideAngular),Pi(s.insideAngular)),this.idToken=this.user.pipe(rt(L=>L?Me(L.getIdToken()):X(null))),this.idTokenResult=this.user.pipe(rt(L=>L?Me(L.getIdTokenResult()):X(null))),this.credential=dc(M,R,this.authState.pipe(vt(L=>!L))).pipe(te(L=>L?.user?L:null),Er(s.outsideAngular),Pi(s.insideAngular))}return f0(this,S,o,{spy:{apply:(M,q,Q)=>{(M.startsWith("signIn")||M.startsWith("createUser"))&&Q.then(L=>R.next(L))}}})}static \u0275fac=function(i){return new(i||n)(F(Xr),F(Zr,8),F(Ct),F(J),F(wl),F(Im,8),F(Em,8),F(Tm,8),F(Am,8),F(km,8),F(Cm,8),F(Ki,8))};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var b0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_0={};var li,Sm;(function(){var n;function e(y,b){function v(){}v.prototype=b.prototype,y.D=b.prototype,y.prototype=new v,y.prototype.constructor=y,y.C=function(x,I,T){for(var _=Array(arguments.length-2),Dn=2;Dn<arguments.length;Dn++)_[Dn-2]=arguments[Dn];return b.prototype[I].apply(x,_)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(y,b,v){v||(v=0);var x=Array(16);if(typeof b=="string")for(var I=0;16>I;++I)x[I]=b.charCodeAt(v++)|b.charCodeAt(v++)<<8|b.charCodeAt(v++)<<16|b.charCodeAt(v++)<<24;else for(I=0;16>I;++I)x[I]=b[v++]|b[v++]<<8|b[v++]<<16|b[v++]<<24;b=y.g[0],v=y.g[1],I=y.g[2];var T=y.g[3],_=b+(T^v&(I^T))+x[0]+3614090360&4294967295;b=v+(_<<7&4294967295|_>>>25),_=T+(I^b&(v^I))+x[1]+3905402710&4294967295,T=b+(_<<12&4294967295|_>>>20),_=I+(v^T&(b^v))+x[2]+606105819&4294967295,I=T+(_<<17&4294967295|_>>>15),_=v+(b^I&(T^b))+x[3]+3250441966&4294967295,v=I+(_<<22&4294967295|_>>>10),_=b+(T^v&(I^T))+x[4]+4118548399&4294967295,b=v+(_<<7&4294967295|_>>>25),_=T+(I^b&(v^I))+x[5]+1200080426&4294967295,T=b+(_<<12&4294967295|_>>>20),_=I+(v^T&(b^v))+x[6]+2821735955&4294967295,I=T+(_<<17&4294967295|_>>>15),_=v+(b^I&(T^b))+x[7]+4249261313&4294967295,v=I+(_<<22&4294967295|_>>>10),_=b+(T^v&(I^T))+x[8]+1770035416&4294967295,b=v+(_<<7&4294967295|_>>>25),_=T+(I^b&(v^I))+x[9]+2336552879&4294967295,T=b+(_<<12&4294967295|_>>>20),_=I+(v^T&(b^v))+x[10]+4294925233&4294967295,I=T+(_<<17&4294967295|_>>>15),_=v+(b^I&(T^b))+x[11]+2304563134&4294967295,v=I+(_<<22&4294967295|_>>>10),_=b+(T^v&(I^T))+x[12]+1804603682&4294967295,b=v+(_<<7&4294967295|_>>>25),_=T+(I^b&(v^I))+x[13]+4254626195&4294967295,T=b+(_<<12&4294967295|_>>>20),_=I+(v^T&(b^v))+x[14]+2792965006&4294967295,I=T+(_<<17&4294967295|_>>>15),_=v+(b^I&(T^b))+x[15]+1236535329&4294967295,v=I+(_<<22&4294967295|_>>>10),_=b+(I^T&(v^I))+x[1]+4129170786&4294967295,b=v+(_<<5&4294967295|_>>>27),_=T+(v^I&(b^v))+x[6]+3225465664&4294967295,T=b+(_<<9&4294967295|_>>>23),_=I+(b^v&(T^b))+x[11]+643717713&4294967295,I=T+(_<<14&4294967295|_>>>18),_=v+(T^b&(I^T))+x[0]+3921069994&4294967295,v=I+(_<<20&4294967295|_>>>12),_=b+(I^T&(v^I))+x[5]+3593408605&4294967295,b=v+(_<<5&4294967295|_>>>27),_=T+(v^I&(b^v))+x[10]+38016083&4294967295,T=b+(_<<9&4294967295|_>>>23),_=I+(b^v&(T^b))+x[15]+3634488961&4294967295,I=T+(_<<14&4294967295|_>>>18),_=v+(T^b&(I^T))+x[4]+3889429448&4294967295,v=I+(_<<20&4294967295|_>>>12),_=b+(I^T&(v^I))+x[9]+568446438&4294967295,b=v+(_<<5&4294967295|_>>>27),_=T+(v^I&(b^v))+x[14]+3275163606&4294967295,T=b+(_<<9&4294967295|_>>>23),_=I+(b^v&(T^b))+x[3]+4107603335&4294967295,I=T+(_<<14&4294967295|_>>>18),_=v+(T^b&(I^T))+x[8]+1163531501&4294967295,v=I+(_<<20&4294967295|_>>>12),_=b+(I^T&(v^I))+x[13]+2850285829&4294967295,b=v+(_<<5&4294967295|_>>>27),_=T+(v^I&(b^v))+x[2]+4243563512&4294967295,T=b+(_<<9&4294967295|_>>>23),_=I+(b^v&(T^b))+x[7]+1735328473&4294967295,I=T+(_<<14&4294967295|_>>>18),_=v+(T^b&(I^T))+x[12]+2368359562&4294967295,v=I+(_<<20&4294967295|_>>>12),_=b+(v^I^T)+x[5]+4294588738&4294967295,b=v+(_<<4&4294967295|_>>>28),_=T+(b^v^I)+x[8]+2272392833&4294967295,T=b+(_<<11&4294967295|_>>>21),_=I+(T^b^v)+x[11]+1839030562&4294967295,I=T+(_<<16&4294967295|_>>>16),_=v+(I^T^b)+x[14]+4259657740&4294967295,v=I+(_<<23&4294967295|_>>>9),_=b+(v^I^T)+x[1]+2763975236&4294967295,b=v+(_<<4&4294967295|_>>>28),_=T+(b^v^I)+x[4]+1272893353&4294967295,T=b+(_<<11&4294967295|_>>>21),_=I+(T^b^v)+x[7]+4139469664&4294967295,I=T+(_<<16&4294967295|_>>>16),_=v+(I^T^b)+x[10]+3200236656&4294967295,v=I+(_<<23&4294967295|_>>>9),_=b+(v^I^T)+x[13]+681279174&4294967295,b=v+(_<<4&4294967295|_>>>28),_=T+(b^v^I)+x[0]+3936430074&4294967295,T=b+(_<<11&4294967295|_>>>21),_=I+(T^b^v)+x[3]+3572445317&4294967295,I=T+(_<<16&4294967295|_>>>16),_=v+(I^T^b)+x[6]+76029189&4294967295,v=I+(_<<23&4294967295|_>>>9),_=b+(v^I^T)+x[9]+3654602809&4294967295,b=v+(_<<4&4294967295|_>>>28),_=T+(b^v^I)+x[12]+3873151461&4294967295,T=b+(_<<11&4294967295|_>>>21),_=I+(T^b^v)+x[15]+530742520&4294967295,I=T+(_<<16&4294967295|_>>>16),_=v+(I^T^b)+x[2]+3299628645&4294967295,v=I+(_<<23&4294967295|_>>>9),_=b+(I^(v|~T))+x[0]+4096336452&4294967295,b=v+(_<<6&4294967295|_>>>26),_=T+(v^(b|~I))+x[7]+1126891415&4294967295,T=b+(_<<10&4294967295|_>>>22),_=I+(b^(T|~v))+x[14]+2878612391&4294967295,I=T+(_<<15&4294967295|_>>>17),_=v+(T^(I|~b))+x[5]+4237533241&4294967295,v=I+(_<<21&4294967295|_>>>11),_=b+(I^(v|~T))+x[12]+1700485571&4294967295,b=v+(_<<6&4294967295|_>>>26),_=T+(v^(b|~I))+x[3]+2399980690&4294967295,T=b+(_<<10&4294967295|_>>>22),_=I+(b^(T|~v))+x[10]+4293915773&4294967295,I=T+(_<<15&4294967295|_>>>17),_=v+(T^(I|~b))+x[1]+2240044497&4294967295,v=I+(_<<21&4294967295|_>>>11),_=b+(I^(v|~T))+x[8]+1873313359&4294967295,b=v+(_<<6&4294967295|_>>>26),_=T+(v^(b|~I))+x[15]+4264355552&4294967295,T=b+(_<<10&4294967295|_>>>22),_=I+(b^(T|~v))+x[6]+2734768916&4294967295,I=T+(_<<15&4294967295|_>>>17),_=v+(T^(I|~b))+x[13]+1309151649&4294967295,v=I+(_<<21&4294967295|_>>>11),_=b+(I^(v|~T))+x[4]+4149444226&4294967295,b=v+(_<<6&4294967295|_>>>26),_=T+(v^(b|~I))+x[11]+3174756917&4294967295,T=b+(_<<10&4294967295|_>>>22),_=I+(b^(T|~v))+x[2]+718787259&4294967295,I=T+(_<<15&4294967295|_>>>17),_=v+(T^(I|~b))+x[9]+3951481745&4294967295,y.g[0]=y.g[0]+b&4294967295,y.g[1]=y.g[1]+(I+(_<<21&4294967295|_>>>11))&4294967295,y.g[2]=y.g[2]+I&4294967295,y.g[3]=y.g[3]+T&4294967295}i.prototype.u=function(y,b){b===void 0&&(b=y.length);for(var v=b-this.blockSize,x=this.B,I=this.h,T=0;T<b;){if(I==0)for(;T<=v;)r(this,y,T),T+=this.blockSize;if(typeof y=="string"){for(;T<b;)if(x[I++]=y.charCodeAt(T++),I==this.blockSize){r(this,x),I=0;break}}else for(;T<b;)if(x[I++]=y[T++],I==this.blockSize){r(this,x),I=0;break}}this.h=I,this.o+=b},i.prototype.v=function(){var y=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);y[0]=128;for(var b=1;b<y.length-8;++b)y[b]=0;var v=8*this.o;for(b=y.length-8;b<y.length;++b)y[b]=v&255,v/=256;for(this.u(y),y=Array(16),b=v=0;4>b;++b)for(var x=0;32>x;x+=8)y[v++]=this.g[b]>>>x&255;return y};function o(y,b){var v=c;return Object.prototype.hasOwnProperty.call(v,y)?v[y]:v[y]=b(y)}function s(y,b){this.h=b;for(var v=[],x=!0,I=y.length-1;0<=I;I--){var T=y[I]|0;x&&T==b||(v[I]=T,x=!1)}this.g=v}var c={};function l(y){return-128<=y&&128>y?o(y,function(b){return new s([b|0],0>b?-1:0)}):new s([y|0],0>y?-1:0)}function u(y){if(isNaN(y)||!isFinite(y))return f;if(0>y)return M(u(-y));for(var b=[],v=1,x=0;y>=v;x++)b[x]=y/v|0,v*=4294967296;return new s(b,0)}function m(y,b){if(y.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(y.charAt(0)=="-")return M(m(y.substring(1),b));if(0<=y.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=u(Math.pow(b,8)),x=f,I=0;I<y.length;I+=8){var T=Math.min(8,y.length-I),_=parseInt(y.substring(I,I+T),b);8>T?(T=u(Math.pow(b,T)),x=x.j(T).add(u(_))):(x=x.j(v),x=x.add(u(_)))}return x}var f=l(0),g=l(1),w=l(16777216);n=s.prototype,n.m=function(){if(S(this))return-M(this).m();for(var y=0,b=1,v=0;v<this.g.length;v++){var x=this.i(v);y+=(0<=x?x:4294967296+x)*b,b*=4294967296}return y},n.toString=function(y){if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(R(this))return"0";if(S(this))return"-"+M(this).toString(y);for(var b=u(Math.pow(y,6)),v=this,x="";;){var I=ee(v,b).g;v=q(v,I.j(b));var T=((0<v.g.length?v.g[0]:v.h)>>>0).toString(y);if(v=I,R(v))return T+x;for(;6>T.length;)T="0"+T;x=T+x}},n.i=function(y){return 0>y?0:y<this.g.length?this.g[y]:this.h};function R(y){if(y.h!=0)return!1;for(var b=0;b<y.g.length;b++)if(y.g[b]!=0)return!1;return!0}function S(y){return y.h==-1}n.l=function(y){return y=q(this,y),S(y)?-1:R(y)?0:1};function M(y){for(var b=y.g.length,v=[],x=0;x<b;x++)v[x]=~y.g[x];return new s(v,~y.h).add(g)}n.abs=function(){return S(this)?M(this):this},n.add=function(y){for(var b=Math.max(this.g.length,y.g.length),v=[],x=0,I=0;I<=b;I++){var T=x+(this.i(I)&65535)+(y.i(I)&65535),_=(T>>>16)+(this.i(I)>>>16)+(y.i(I)>>>16);x=_>>>16,T&=65535,_&=65535,v[I]=_<<16|T}return new s(v,v[v.length-1]&-2147483648?-1:0)};function q(y,b){return y.add(M(b))}n.j=function(y){if(R(this)||R(y))return f;if(S(this))return S(y)?M(this).j(M(y)):M(M(this).j(y));if(S(y))return M(this.j(M(y)));if(0>this.l(w)&&0>y.l(w))return u(this.m()*y.m());for(var b=this.g.length+y.g.length,v=[],x=0;x<2*b;x++)v[x]=0;for(x=0;x<this.g.length;x++)for(var I=0;I<y.g.length;I++){var T=this.i(x)>>>16,_=this.i(x)&65535,Dn=y.i(I)>>>16,Bo=y.i(I)&65535;v[2*x+2*I]+=_*Bo,Q(v,2*x+2*I),v[2*x+2*I+1]+=T*Bo,Q(v,2*x+2*I+1),v[2*x+2*I+1]+=_*Dn,Q(v,2*x+2*I+1),v[2*x+2*I+2]+=T*Dn,Q(v,2*x+2*I+2)}for(x=0;x<b;x++)v[x]=v[2*x+1]<<16|v[2*x];for(x=b;x<2*b;x++)v[x]=0;return new s(v,0)};function Q(y,b){for(;(y[b]&65535)!=y[b];)y[b+1]+=y[b]>>>16,y[b]&=65535,b++}function L(y,b){this.g=y,this.h=b}function ee(y,b){if(R(b))throw Error("division by zero");if(R(y))return new L(f,f);if(S(y))return b=ee(M(y),b),new L(M(b.g),M(b.h));if(S(b))return b=ee(y,M(b)),new L(M(b.g),b.h);if(30<y.g.length){if(S(y)||S(b))throw Error("slowDivide_ only works with positive integers.");for(var v=g,x=b;0>=x.l(y);)v=ie(v),x=ie(x);var I=re(v,1),T=re(x,1);for(x=re(x,2),v=re(v,2);!R(x);){var _=T.add(x);0>=_.l(y)&&(I=I.add(v),T=_),x=re(x,1),v=re(v,1)}return b=q(y,I.j(b)),new L(I,b)}for(I=f;0<=y.l(b);){for(v=Math.max(1,Math.floor(y.m()/b.m())),x=Math.ceil(Math.log(v)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),T=u(v),_=T.j(b);S(_)||0<_.l(y);)v-=x,T=u(v),_=T.j(b);R(T)&&(T=g),I=I.add(T),y=q(y,_)}return new L(I,y)}n.A=function(y){return ee(this,y).h},n.and=function(y){for(var b=Math.max(this.g.length,y.g.length),v=[],x=0;x<b;x++)v[x]=this.i(x)&y.i(x);return new s(v,this.h&y.h)},n.or=function(y){for(var b=Math.max(this.g.length,y.g.length),v=[],x=0;x<b;x++)v[x]=this.i(x)|y.i(x);return new s(v,this.h|y.h)},n.xor=function(y){for(var b=Math.max(this.g.length,y.g.length),v=[],x=0;x<b;x++)v[x]=this.i(x)^y.i(x);return new s(v,this.h^y.h)};function ie(y){for(var b=y.g.length+1,v=[],x=0;x<b;x++)v[x]=y.i(x)<<1|y.i(x-1)>>>31;return new s(v,y.h)}function re(y,b){var v=b>>5;b%=32;for(var x=y.g.length-v,I=[],T=0;T<x;T++)I[T]=0<b?y.i(T+v)>>>b|y.i(T+v+1)<<32-b:y.i(T+v);return new s(I,y.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Sm=_0.Md5=i,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=m,li=_0.Integer=s}).apply(typeof b0<"u"?b0:typeof self<"u"?self:typeof window<"u"?window:{});var Al=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ln={};var Rm,OD,Jr,Mm,na,kl,Pm,Nm,Fm;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,h){return a==Array.prototype||a==Object.prototype||(a[d]=h.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Al=="object"&&Al];for(var d=0;d<a.length;++d){var h=a[d];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var i=t(this);function r(a,d){if(d)e:{var h=i;a=a.split(".");for(var p=0;p<a.length-1;p++){var E=a[p];if(!(E in h))break e;h=h[E]}a=a[a.length-1],p=h[a],d=d(p),d!=p&&d!=null&&e(h,a,{configurable:!0,writable:!0,value:d})}}function o(a,d){a instanceof String&&(a+="");var h=0,p=!1,E={next:function(){if(!p&&h<a.length){var C=h++;return{value:d(C,a[C]),done:!1}}return p=!0,{done:!0,value:void 0}}};return E[Symbol.iterator]=function(){return E},E}r("Array.prototype.values",function(a){return a||function(){return o(this,function(d,h){return h})}});var s=s||{},c=this||self;function l(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function u(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function m(a,d,h){return a.call.apply(a.bind,arguments)}function f(a,d,h){if(!a)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var E=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(E,p),a.apply(d,E)}}return function(){return a.apply(d,arguments)}}function g(a,d,h){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:f,g.apply(null,arguments)}function w(a,d){var h=Array.prototype.slice.call(arguments,1);return function(){var p=h.slice();return p.push.apply(p,arguments),a.apply(this,p)}}function R(a,d){function h(){}h.prototype=d.prototype,a.aa=d.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(p,E,C){for(var O=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)O[Ie-2]=arguments[Ie];return d.prototype[E].apply(p,O)}}function S(a){let d=a.length;if(0<d){let h=Array(d);for(let p=0;p<d;p++)h[p]=a[p];return h}return[]}function M(a,d){for(let h=1;h<arguments.length;h++){let p=arguments[h];if(l(p)){let E=a.length||0,C=p.length||0;a.length=E+C;for(let O=0;O<C;O++)a[E+O]=p[O]}else a.push(p)}}class q{constructor(d,h){this.i=d,this.j=h,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function Q(a){return/^[\s\xa0]*$/.test(a)}function L(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function ee(a){return ee[" "](a),a}ee[" "]=function(){};var ie=L().indexOf("Gecko")!=-1&&!(L().toLowerCase().indexOf("webkit")!=-1&&L().indexOf("Edge")==-1)&&!(L().indexOf("Trident")!=-1||L().indexOf("MSIE")!=-1)&&L().indexOf("Edge")==-1;function re(a,d,h){for(let p in a)d.call(h,a[p],p,a)}function y(a,d){for(let h in a)d.call(void 0,a[h],h,a)}function b(a){let d={};for(let h in a)d[h]=a[h];return d}let v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(a,d){let h,p;for(let E=1;E<arguments.length;E++){p=arguments[E];for(h in p)a[h]=p[h];for(let C=0;C<v.length;C++)h=v[C],Object.prototype.hasOwnProperty.call(p,h)&&(a[h]=p[h])}}function I(a){var d=1;a=a.split(":");let h=[];for(;0<d&&a.length;)h.push(a.shift()),d--;return a.length&&h.push(a.join(":")),h}function T(a){c.setTimeout(()=>{throw a},0)}function _(){var a=nu;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class Dn{constructor(){this.h=this.g=null}add(d,h){let p=Bo.get();p.set(d,h),this.h?this.h.next=p:this.g=p,this.h=p}}var Bo=new q(()=>new DE,a=>a.reset());class DE{constructor(){this.next=this.g=this.h=null}set(d,h){this.h=d,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let qo,$o=!1,nu=new Dn,$g=()=>{let a=c.Promise.resolve(void 0);qo=()=>{a.then(SE)}};var SE=()=>{for(var a;a=_();){try{a.h.call(a.g)}catch(h){T(h)}var d=Bo;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}$o=!1};function Wn(){this.s=this.s,this.C=this.C}Wn.prototype.s=!1,Wn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Wn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pt(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}pt.prototype.h=function(){this.defaultPrevented=!0};var RE=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};c.addEventListener("test",h,d),c.removeEventListener("test",h,d)}catch{}return a}();function Go(a,d){if(pt.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,p=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(ie){e:{try{ee(d.nodeName);var E=!0;break e}catch{}E=!1}E||(d=null)}}else h=="mouseover"?d=a.fromElement:h=="mouseout"&&(d=a.toElement);this.relatedTarget=d,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:ME[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Go.aa.h.call(this)}}R(Go,pt);var ME={2:"touch",3:"pen",4:"mouse"};Go.prototype.h=function(){Go.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Ho="closure_listenable_"+(1e6*Math.random()|0),PE=0;function NE(a,d,h,p,E){this.listener=a,this.proxy=null,this.src=d,this.type=h,this.capture=!!p,this.ha=E,this.key=++PE,this.da=this.fa=!1}function $a(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Ga(a){this.src=a,this.g={},this.h=0}Ga.prototype.add=function(a,d,h,p,E){var C=a.toString();a=this.g[C],a||(a=this.g[C]=[],this.h++);var O=ru(a,d,p,E);return-1<O?(d=a[O],h||(d.fa=!1)):(d=new NE(d,this.src,C,!!p,E),d.fa=h,a.push(d)),d};function iu(a,d){var h=d.type;if(h in a.g){var p=a.g[h],E=Array.prototype.indexOf.call(p,d,void 0),C;(C=0<=E)&&Array.prototype.splice.call(p,E,1),C&&($a(d),a.g[h].length==0&&(delete a.g[h],a.h--))}}function ru(a,d,h,p){for(var E=0;E<a.length;++E){var C=a[E];if(!C.da&&C.listener==d&&C.capture==!!h&&C.ha==p)return E}return-1}var ou="closure_lm_"+(1e6*Math.random()|0),su={};function Gg(a,d,h,p,E){if(p&&p.once)return Kg(a,d,h,p,E);if(Array.isArray(d)){for(var C=0;C<d.length;C++)Gg(a,d[C],h,p,E);return null}return h=du(h),a&&a[Ho]?a.K(d,h,u(p)?!!p.capture:!!p,E):Hg(a,d,h,!1,p,E)}function Hg(a,d,h,p,E,C){if(!d)throw Error("Invalid event type");var O=u(E)?!!E.capture:!!E,Ie=cu(a);if(Ie||(a[ou]=Ie=new Ga(a)),h=Ie.add(d,h,p,O,C),h.proxy)return h;if(p=FE(),h.proxy=p,p.src=a,p.listener=h,a.addEventListener)RE||(E=O),E===void 0&&(E=!1),a.addEventListener(d.toString(),p,E);else if(a.attachEvent)a.attachEvent(Qg(d.toString()),p);else if(a.addListener&&a.removeListener)a.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return h}function FE(){function a(h){return d.call(a.src,a.listener,h)}let d=OE;return a}function Kg(a,d,h,p,E){if(Array.isArray(d)){for(var C=0;C<d.length;C++)Kg(a,d[C],h,p,E);return null}return h=du(h),a&&a[Ho]?a.L(d,h,u(p)?!!p.capture:!!p,E):Hg(a,d,h,!0,p,E)}function Wg(a,d,h,p,E){if(Array.isArray(d))for(var C=0;C<d.length;C++)Wg(a,d[C],h,p,E);else p=u(p)?!!p.capture:!!p,h=du(h),a&&a[Ho]?(a=a.i,d=String(d).toString(),d in a.g&&(C=a.g[d],h=ru(C,h,p,E),-1<h&&($a(C[h]),Array.prototype.splice.call(C,h,1),C.length==0&&(delete a.g[d],a.h--)))):a&&(a=cu(a))&&(d=a.g[d.toString()],a=-1,d&&(a=ru(d,h,p,E)),(h=-1<a?d[a]:null)&&au(h))}function au(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Ho])iu(d.i,a);else{var h=a.type,p=a.proxy;d.removeEventListener?d.removeEventListener(h,p,a.capture):d.detachEvent?d.detachEvent(Qg(h),p):d.addListener&&d.removeListener&&d.removeListener(p),(h=cu(d))?(iu(h,a),h.h==0&&(h.src=null,d[ou]=null)):$a(a)}}}function Qg(a){return a in su?su[a]:su[a]="on"+a}function OE(a,d){if(a.da)a=!0;else{d=new Go(d,this);var h=a.listener,p=a.ha||a.src;a.fa&&au(a),a=h.call(p,d)}return a}function cu(a){return a=a[ou],a instanceof Ga?a:null}var lu="__closure_events_fn_"+(1e9*Math.random()>>>0);function du(a){return typeof a=="function"?a:(a[lu]||(a[lu]=function(d){return a.handleEvent(d)}),a[lu])}function gt(){Wn.call(this),this.i=new Ga(this),this.M=this,this.F=null}R(gt,Wn),gt.prototype[Ho]=!0,gt.prototype.removeEventListener=function(a,d,h,p){Wg(this,a,d,h,p)};function At(a,d){var h,p=a.F;if(p)for(h=[];p;p=p.F)h.push(p);if(a=a.M,p=d.type||d,typeof d=="string")d=new pt(d,a);else if(d instanceof pt)d.target=d.target||a;else{var E=d;d=new pt(p,a),x(d,E)}if(E=!0,h)for(var C=h.length-1;0<=C;C--){var O=d.g=h[C];E=Ha(O,p,!0,d)&&E}if(O=d.g=a,E=Ha(O,p,!0,d)&&E,E=Ha(O,p,!1,d)&&E,h)for(C=0;C<h.length;C++)O=d.g=h[C],E=Ha(O,p,!1,d)&&E}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var h=a.g[d],p=0;p<h.length;p++)$a(h[p]);delete a.g[d],a.h--}}this.F=null},gt.prototype.K=function(a,d,h,p){return this.i.add(String(a),d,!1,h,p)},gt.prototype.L=function(a,d,h,p){return this.i.add(String(a),d,!0,h,p)};function Ha(a,d,h,p){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var E=!0,C=0;C<d.length;++C){var O=d[C];if(O&&!O.da&&O.capture==h){var Ie=O.listener,ht=O.ha||O.src;O.fa&&iu(a.i,O),E=Ie.call(ht,p)!==!1&&E}}return E&&!p.defaultPrevented}function Yg(a,d,h){if(typeof a=="function")h&&(a=g(a,h));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:c.setTimeout(a,d||0)}function Xg(a){a.g=Yg(()=>{a.g=null,a.i&&(a.i=!1,Xg(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class VE extends Wn{constructor(d,h){super(),this.m=d,this.l=h,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Xg(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ko(a){Wn.call(this),this.h=a,this.g={}}R(Ko,Wn);var Zg=[];function Jg(a){re(a.g,function(d,h){this.g.hasOwnProperty(h)&&au(d)},a),a.g={}}Ko.prototype.N=function(){Ko.aa.N.call(this),Jg(this)},Ko.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var uu=c.JSON.stringify,LE=c.JSON.parse,jE=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function hu(){}hu.prototype.h=null;function eb(a){return a.h||(a.h=a.i())}function tb(){}var Wo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function mu(){pt.call(this,"d")}R(mu,pt);function fu(){pt.call(this,"c")}R(fu,pt);var Di={},nb=null;function Ka(){return nb=nb||new gt}Di.La="serverreachability";function ib(a){pt.call(this,Di.La,a)}R(ib,pt);function Qo(a){let d=Ka();At(d,new ib(d))}Di.STAT_EVENT="statevent";function rb(a,d){pt.call(this,Di.STAT_EVENT,a),this.stat=d}R(rb,pt);function kt(a){let d=Ka();At(d,new rb(d,a))}Di.Ma="timingevent";function ob(a,d){pt.call(this,Di.Ma,a),this.size=d}R(ob,pt);function Yo(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},d)}function Xo(){this.g=!0}Xo.prototype.xa=function(){this.g=!1};function zE(a,d,h,p,E,C){a.info(function(){if(a.g)if(C)for(var O="",Ie=C.split("&"),ht=0;ht<Ie.length;ht++){var pe=Ie[ht].split("=");if(1<pe.length){var bt=pe[0];pe=pe[1];var _t=bt.split("_");O=2<=_t.length&&_t[1]=="type"?O+(bt+"="+pe+"&"):O+(bt+"=redacted&")}}else O=null;else O=C;return"XMLHTTP REQ ("+p+") [attempt "+E+"]: "+d+`
`+h+`
`+O})}function UE(a,d,h,p,E,C,O){a.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+E+"]: "+d+`
`+h+`
`+C+" "+O})}function yr(a,d,h,p){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+qE(a,h)+(p?" "+p:"")})}function BE(a,d){a.info(function(){return"TIMEOUT: "+d})}Xo.prototype.info=function(){};function qE(a,d){if(!a.g)return d;if(!d)return null;try{var h=JSON.parse(d);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var p=h[a];if(!(2>p.length)){var E=p[1];if(Array.isArray(E)&&!(1>E.length)){var C=E[0];if(C!="noop"&&C!="stop"&&C!="close")for(var O=1;O<E.length;O++)E[O]=""}}}}return uu(h)}catch{return d}}var Wa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},sb={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},pu;function Qa(){}R(Qa,hu),Qa.prototype.g=function(){return new XMLHttpRequest},Qa.prototype.i=function(){return{}},pu=new Qa;function Qn(a,d,h,p){this.j=a,this.i=d,this.l=h,this.R=p||1,this.U=new Ko(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ab}function ab(){this.i=null,this.g="",this.h=!1}var cb={},gu={};function bu(a,d,h){a.L=1,a.v=Ja(Sn(d)),a.m=h,a.P=!0,lb(a,null)}function lb(a,d){a.F=Date.now(),Ya(a),a.A=Sn(a.v);var h=a.A,p=a.R;Array.isArray(p)||(p=[String(p)]),Ib(h.i,"t",p),a.C=0,h=a.j.J,a.h=new ab,a.g=Ub(a.j,h?d:null,!a.m),0<a.O&&(a.M=new VE(g(a.Y,a,a.g),a.O)),d=a.U,h=a.g,p=a.ca;var E="readystatechange";Array.isArray(E)||(E&&(Zg[0]=E.toString()),E=Zg);for(var C=0;C<E.length;C++){var O=Gg(h,E[C],p||d.handleEvent,!1,d.h||d);if(!O)break;d.g[O.key]=O}d=a.H?b(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),Qo(),zE(a.i,a.u,a.A,a.l,a.R,a.m)}Qn.prototype.ca=function(a){a=a.target;let d=this.M;d&&Rn(a)==3?d.j():this.Y(a)},Qn.prototype.Y=function(a){try{if(a==this.g)e:{let _t=Rn(this.g);var d=this.g.Ba();let Ir=this.g.Z();if(!(3>_t)&&(_t!=3||this.g&&(this.h.h||this.g.oa()||Sb(this.g)))){this.J||_t!=4||d==7||(d==8||0>=Ir?Qo(3):Qo(2)),_u(this);var h=this.g.Z();this.X=h;t:if(db(this)){var p=Sb(this.g);a="";var E=p.length,C=Rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Si(this),Zo(this);var O="";break t}this.h.i=new c.TextDecoder}for(d=0;d<E;d++)this.h.h=!0,a+=this.h.i.decode(p[d],{stream:!(C&&d==E-1)});p.length=0,this.h.g+=a,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=h==200,UE(this.i,this.u,this.A,this.l,this.R,_t,h),this.o){if(this.T&&!this.K){t:{if(this.g){var Ie,ht=this.g;if((Ie=ht.g?ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(Ie)){var pe=Ie;break t}}pe=null}if(h=pe)yr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vu(this,h);else{this.o=!1,this.s=3,kt(12),Si(this),Zo(this);break e}}if(this.P){h=!0;let Zt;for(;!this.J&&this.C<O.length;)if(Zt=$E(this,O),Zt==gu){_t==4&&(this.s=4,kt(14),h=!1),yr(this.i,this.l,null,"[Incomplete Response]");break}else if(Zt==cb){this.s=4,kt(15),yr(this.i,this.l,O,"[Invalid Chunk]"),h=!1;break}else yr(this.i,this.l,Zt,null),vu(this,Zt);if(db(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_t!=4||O.length!=0||this.h.h||(this.s=1,kt(16),h=!1),this.o=this.o&&h,!h)yr(this.i,this.l,O,"[Invalid Chunked Response]"),Si(this),Zo(this);else if(0<O.length&&!this.W){this.W=!0;var bt=this.j;bt.g==this&&bt.ba&&!bt.M&&(bt.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),Tu(bt),bt.M=!0,kt(11))}}else yr(this.i,this.l,O,null),vu(this,O);_t==4&&Si(this),this.o&&!this.J&&(_t==4?Vb(this.j,this):(this.o=!1,Ya(this)))}else aT(this.g),h==400&&0<O.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),Si(this),Zo(this)}}}catch{}finally{}};function db(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function $E(a,d){var h=a.C,p=d.indexOf(`
`,h);return p==-1?gu:(h=Number(d.substring(h,p)),isNaN(h)?cb:(p+=1,p+h>d.length?gu:(d=d.slice(p,p+h),a.C=p+h,d)))}Qn.prototype.cancel=function(){this.J=!0,Si(this)};function Ya(a){a.S=Date.now()+a.I,ub(a,a.I)}function ub(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Yo(g(a.ba,a),d)}function _u(a){a.B&&(c.clearTimeout(a.B),a.B=null)}Qn.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(BE(this.i,this.A),this.L!=2&&(Qo(),kt(17)),Si(this),this.s=2,Zo(this)):ub(this,this.S-a)};function Zo(a){a.j.G==0||a.J||Vb(a.j,a)}function Si(a){_u(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,Jg(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function vu(a,d){try{var h=a.j;if(h.G!=0&&(h.g==a||yu(h.h,a))){if(!a.K&&yu(h.h,a)&&h.G==3){try{var p=h.Da.g.parse(d)}catch{p=null}if(Array.isArray(p)&&p.length==3){var E=p;if(E[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)rc(h),nc(h);else break e;Eu(h),kt(18)}}else h.za=E[1],0<h.za-h.T&&37500>E[2]&&h.F&&h.v==0&&!h.C&&(h.C=Yo(g(h.Za,h),6e3));if(1>=fb(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Mi(h,11)}else if((a.K||h.g==a)&&rc(h),!Q(d))for(E=h.Da.g.parse(d),d=0;d<E.length;d++){let pe=E[d];if(h.T=pe[0],pe=pe[1],h.G==2)if(pe[0]=="c"){h.K=pe[1],h.ia=pe[2];let bt=pe[3];bt!=null&&(h.la=bt,h.j.info("VER="+h.la));let _t=pe[4];_t!=null&&(h.Aa=_t,h.j.info("SVER="+h.Aa));let Ir=pe[5];Ir!=null&&typeof Ir=="number"&&0<Ir&&(p=1.5*Ir,h.L=p,h.j.info("backChannelRequestTimeoutMs_="+p)),p=h;let Zt=a.g;if(Zt){let sc=Zt.g?Zt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(sc){var C=p.h;C.g||sc.indexOf("spdy")==-1&&sc.indexOf("quic")==-1&&sc.indexOf("h2")==-1||(C.j=C.l,C.g=new Set,C.h&&(xu(C,C.h),C.h=null))}if(p.D){let Au=Zt.g?Zt.g.getResponseHeader("X-HTTP-Session-Id"):null;Au&&(p.ya=Au,Ce(p.I,p.D,Au))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),p=h;var O=a;if(p.qa=zb(p,p.J?p.ia:null,p.W),O.K){pb(p.h,O);var Ie=O,ht=p.L;ht&&(Ie.I=ht),Ie.B&&(_u(Ie),Ya(Ie)),p.g=O}else Fb(p);0<h.i.length&&ic(h)}else pe[0]!="stop"&&pe[0]!="close"||Mi(h,7);else h.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?Mi(h,7):Iu(h):pe[0]!="noop"&&h.l&&h.l.ta(pe),h.v=0)}}Qo(4)}catch{}}var GE=class{constructor(a,d){this.g=a,this.map=d}};function hb(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mb(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function fb(a){return a.h?1:a.g?a.g.size:0}function yu(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function xu(a,d){a.g?a.g.add(d):a.h=d}function pb(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}hb.prototype.cancel=function(){if(this.i=gb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function gb(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let h of a.g.values())d=d.concat(h.D);return d}return S(a.i)}function HE(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(l(a)){for(var d=[],h=a.length,p=0;p<h;p++)d.push(a[p]);return d}d=[],h=0;for(p in a)d[h++]=a[p];return d}function KE(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(l(a)||typeof a=="string"){var d=[];a=a.length;for(var h=0;h<a;h++)d.push(h);return d}d=[],h=0;for(let p in a)d[h++]=p;return d}}}function bb(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(l(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var h=KE(a),p=HE(a),E=p.length,C=0;C<E;C++)d.call(void 0,p[C],h&&h[C],a)}var _b=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function WE(a,d){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var p=a[h].indexOf("="),E=null;if(0<=p){var C=a[h].substring(0,p);E=a[h].substring(p+1)}else C=a[h];d(C,E?decodeURIComponent(E.replace(/\+/g," ")):"")}}}function Ri(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Ri){this.h=a.h,Xa(this,a.j),this.o=a.o,this.g=a.g,Za(this,a.s),this.l=a.l;var d=a.i,h=new ts;h.i=d.i,d.g&&(h.g=new Map(d.g),h.h=d.h),vb(this,h),this.m=a.m}else a&&(d=String(a).match(_b))?(this.h=!1,Xa(this,d[1]||"",!0),this.o=Jo(d[2]||""),this.g=Jo(d[3]||"",!0),Za(this,d[4]),this.l=Jo(d[5]||"",!0),vb(this,d[6]||"",!0),this.m=Jo(d[7]||"")):(this.h=!1,this.i=new ts(null,this.h))}Ri.prototype.toString=function(){var a=[],d=this.j;d&&a.push(es(d,yb,!0),":");var h=this.g;return(h||d=="file")&&(a.push("//"),(d=this.o)&&a.push(es(d,yb,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(es(h,h.charAt(0)=="/"?XE:YE,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",es(h,JE)),a.join("")};function Sn(a){return new Ri(a)}function Xa(a,d,h){a.j=h?Jo(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Za(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function vb(a,d,h){d instanceof ts?(a.i=d,eT(a.i,a.h)):(h||(d=es(d,ZE)),a.i=new ts(d,a.h))}function Ce(a,d,h){a.i.set(d,h)}function Ja(a){return Ce(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Jo(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function es(a,d,h){return typeof a=="string"?(a=encodeURI(a).replace(d,QE),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function QE(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var yb=/[#\/\?@]/g,YE=/[#\?:]/g,XE=/[#\?]/g,ZE=/[#\?@]/g,JE=/#/g;function ts(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Yn(a){a.g||(a.g=new Map,a.h=0,a.i&&WE(a.i,function(d,h){a.add(decodeURIComponent(d.replace(/\+/g," ")),h)}))}n=ts.prototype,n.add=function(a,d){Yn(this),this.i=null,a=xr(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(d),this.h+=1,this};function xb(a,d){Yn(a),d=xr(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function wb(a,d){return Yn(a),d=xr(a,d),a.g.has(d)}n.forEach=function(a,d){Yn(this),this.g.forEach(function(h,p){h.forEach(function(E){a.call(d,E,p,this)},this)},this)},n.na=function(){Yn(this);let a=Array.from(this.g.values()),d=Array.from(this.g.keys()),h=[];for(let p=0;p<d.length;p++){let E=a[p];for(let C=0;C<E.length;C++)h.push(d[p])}return h},n.V=function(a){Yn(this);let d=[];if(typeof a=="string")wb(this,a)&&(d=d.concat(this.g.get(xr(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)d=d.concat(a[h])}return d},n.set=function(a,d){return Yn(this),this.i=null,a=xr(this,a),wb(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},n.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function Ib(a,d,h){xb(a,d),0<h.length&&(a.i=null,a.g.set(xr(a,d),S(h)),a.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(var h=0;h<d.length;h++){var p=d[h];let C=encodeURIComponent(String(p)),O=this.V(p);for(p=0;p<O.length;p++){var E=C;O[p]!==""&&(E+="="+encodeURIComponent(String(O[p]))),a.push(E)}}return this.i=a.join("&")};function xr(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function eT(a,d){d&&!a.j&&(Yn(a),a.i=null,a.g.forEach(function(h,p){var E=p.toLowerCase();p!=E&&(xb(this,p),Ib(this,E,h))},a)),a.j=d}function tT(a,d){let h=new Xo;if(c.Image){let p=new Image;p.onload=w(Xn,h,"TestLoadImage: loaded",!0,d,p),p.onerror=w(Xn,h,"TestLoadImage: error",!1,d,p),p.onabort=w(Xn,h,"TestLoadImage: abort",!1,d,p),p.ontimeout=w(Xn,h,"TestLoadImage: timeout",!1,d,p),c.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=a}else d(!1)}function nT(a,d){let h=new Xo,p=new AbortController,E=setTimeout(()=>{p.abort(),Xn(h,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:p.signal}).then(C=>{clearTimeout(E),C.ok?Xn(h,"TestPingServer: ok",!0,d):Xn(h,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(E),Xn(h,"TestPingServer: error",!1,d)})}function Xn(a,d,h,p,E){try{E&&(E.onload=null,E.onerror=null,E.onabort=null,E.ontimeout=null),p(h)}catch{}}function iT(){this.g=new jE}function rT(a,d,h){let p=h||"";try{bb(a,function(E,C){let O=E;u(E)&&(O=uu(E)),d.push(p+C+"="+encodeURIComponent(O))})}catch(E){throw d.push(p+"type="+encodeURIComponent("_badmap")),E}}function ns(a){this.l=a.Ub||null,this.j=a.eb||!1}R(ns,hu),ns.prototype.g=function(){return new ec(this.l,this.j)},ns.prototype.i=function(a){return function(){return a}}({});function ec(a,d){gt.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(ec,gt),n=ec.prototype,n.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,rs(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||c).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,is(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,rs(this)),this.g&&(this.readyState=3,rs(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Eb(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Eb(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?is(this):rs(this),this.readyState==3&&Eb(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,is(this))},n.Qa=function(a){this.g&&(this.response=a,is(this))},n.ga=function(){this.g&&is(this)};function is(a){a.readyState=4,a.l=null,a.j=null,a.v=null,rs(a)}n.setRequestHeader=function(a,d){this.u.append(a,d)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var h=d.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=d.next();return a.join(`\r
`)};function rs(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ec.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Tb(a){let d="";return re(a,function(h,p){d+=p,d+=":",d+=h,d+=`\r
`}),d}function wu(a,d,h){e:{for(p in h){var p=!1;break e}p=!0}p||(h=Tb(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):Ce(a,d,h))}function qe(a){gt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(qe,gt);var oT=/^https?$/i,sT=["POST","PUT"];n=qe.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,d,h,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pu.g(),this.v=this.o?eb(this.o):eb(pu),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(C){Ab(this,C);return}if(a=h||"",h=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var E in p)h.set(E,p[E]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(let C of p.keys())h.set(C,p.get(C));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(h.keys()).find(C=>C.toLowerCase()=="content-type"),E=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(sT,d,void 0))||p||E||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[C,O]of h)this.g.setRequestHeader(C,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Db(this),this.u=!0,this.g.send(a),this.u=!1}catch(C){Ab(this,C)}};function Ab(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,kb(a),tc(a)}function kb(a){a.A||(a.A=!0,At(a,"complete"),At(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,At(this,"complete"),At(this,"abort"),tc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tc(this,!0)),qe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Cb(this):this.bb())},n.bb=function(){Cb(this)};function Cb(a){if(a.h&&typeof s<"u"&&(!a.v[1]||Rn(a)!=4||a.Z()!=2)){if(a.u&&Rn(a)==4)Yg(a.Ea,0,a);else if(At(a,"readystatechange"),Rn(a)==4){a.h=!1;try{let O=a.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var h;if(!(h=d)){var p;if(p=O===0){var E=String(a.D).match(_b)[1]||null;!E&&c.self&&c.self.location&&(E=c.self.location.protocol.slice(0,-1)),p=!oT.test(E?E.toLowerCase():"")}h=p}if(h)At(a,"complete"),At(a,"success");else{a.m=6;try{var C=2<Rn(a)?a.g.statusText:""}catch{C=""}a.l=C+" ["+a.Z()+"]",kb(a)}}finally{tc(a)}}}}function tc(a,d){if(a.g){Db(a);let h=a.g,p=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||At(a,"ready");try{h.onreadystatechange=p}catch{}}}function Db(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function Rn(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<Rn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),LE(d)}};function Sb(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function aT(a){let d={};a=(a.g&&2<=Rn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<a.length;p++){if(Q(a[p]))continue;var h=I(a[p]);let E=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let C=d[E]||[];d[E]=C,C.push(h)}y(d,function(p){return p.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function os(a,d,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||d}function Rb(a){this.Aa=0,this.i=[],this.j=new Xo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=os("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=os("baseRetryDelayMs",5e3,a),this.cb=os("retryDelaySeedMs",1e4,a),this.Wa=os("forwardChannelMaxRetries",2,a),this.wa=os("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new hb(a&&a.concurrentRequestLimit),this.Da=new iT,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Rb.prototype,n.la=8,n.G=1,n.connect=function(a,d,h,p){kt(0),this.W=a,this.H=d||{},h&&p!==void 0&&(this.H.OSID=h,this.H.OAID=p),this.F=this.X,this.I=zb(this,null,this.W),ic(this)};function Iu(a){if(Mb(a),a.G==3){var d=a.U++,h=Sn(a.I);if(Ce(h,"SID",a.K),Ce(h,"RID",d),Ce(h,"TYPE","terminate"),ss(a,h),d=new Qn(a,a.j,d),d.L=2,d.v=Ja(Sn(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(d.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=d.v,h=!0),h||(d.g=Ub(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Ya(d)}jb(a)}function nc(a){a.g&&(Tu(a),a.g.cancel(),a.g=null)}function Mb(a){nc(a),a.u&&(c.clearTimeout(a.u),a.u=null),rc(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function ic(a){if(!mb(a.h)&&!a.s){a.s=!0;var d=a.Ga;qo||$g(),$o||(qo(),$o=!0),nu.add(d,a),a.B=0}}function cT(a,d){return fb(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Yo(g(a.Ga,a,d),Lb(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let E=new Qn(this,this.j,a),C=this.o;if(this.S&&(C?(C=b(C),x(C,this.S)):C=this.S),this.m!==null||this.O||(E.H=C,C=null),this.P)e:{for(var d=0,h=0;h<this.i.length;h++){t:{var p=this.i[h];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(d+=p,4096<d){d=h;break e}if(d===4096||h===this.i.length-1){d=h+1;break e}}d=1e3}else d=1e3;d=Nb(this,E,d),h=Sn(this.I),Ce(h,"RID",a),Ce(h,"CVER",22),this.D&&Ce(h,"X-HTTP-Session-Id",this.D),ss(this,h),C&&(this.O?d="headers="+encodeURIComponent(String(Tb(C)))+"&"+d:this.m&&wu(h,this.m,C)),xu(this.h,E),this.Ua&&Ce(h,"TYPE","init"),this.P?(Ce(h,"$req",d),Ce(h,"SID","null"),E.T=!0,bu(E,h,null)):bu(E,h,d),this.G=2}}else this.G==3&&(a?Pb(this,a):this.i.length==0||mb(this.h)||Pb(this))};function Pb(a,d){var h;d?h=d.l:h=a.U++;let p=Sn(a.I);Ce(p,"SID",a.K),Ce(p,"RID",h),Ce(p,"AID",a.T),ss(a,p),a.m&&a.o&&wu(p,a.m,a.o),h=new Qn(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),d&&(a.i=d.D.concat(a.i)),d=Nb(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),xu(a.h,h),bu(h,p,d)}function ss(a,d){a.H&&re(a.H,function(h,p){Ce(d,p,h)}),a.l&&bb({},function(h,p){Ce(d,p,h)})}function Nb(a,d,h){h=Math.min(a.i.length,h);var p=a.l?g(a.l.Na,a.l,a):null;e:{var E=a.i;let C=-1;for(;;){let O=["count="+h];C==-1?0<h?(C=E[0].g,O.push("ofs="+C)):C=0:O.push("ofs="+C);let Ie=!0;for(let ht=0;ht<h;ht++){let pe=E[ht].g,bt=E[ht].map;if(pe-=C,0>pe)C=Math.max(0,E[ht].g-100),Ie=!1;else try{rT(bt,O,"req"+pe+"_")}catch{p&&p(bt)}}if(Ie){p=O.join("&");break e}}}return a=a.i.splice(0,h),d.D=a,p}function Fb(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;qo||$g(),$o||(qo(),$o=!0),nu.add(d,a),a.v=0}}function Eu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Yo(g(a.Fa,a),Lb(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,Ob(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Yo(g(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kt(10),nc(this),Ob(this))};function Tu(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function Ob(a){a.g=new Qn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=Sn(a.qa);Ce(d,"RID","rpc"),Ce(d,"SID",a.K),Ce(d,"AID",a.T),Ce(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ce(d,"TO",a.ja),Ce(d,"TYPE","xmlhttp"),ss(a,d),a.m&&a.o&&wu(d,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=Ja(Sn(d)),h.m=null,h.P=!0,lb(h,a)}n.Za=function(){this.C!=null&&(this.C=null,nc(this),Eu(this),kt(19))};function rc(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function Vb(a,d){var h=null;if(a.g==d){rc(a),Tu(a),a.g=null;var p=2}else if(yu(a.h,d))h=d.D,pb(a.h,d),p=1;else return;if(a.G!=0){if(d.o)if(p==1){h=d.m?d.m.length:0,d=Date.now()-d.F;var E=a.B;p=Ka(),At(p,new ob(p,h)),ic(a)}else Fb(a);else if(E=d.s,E==3||E==0&&0<d.X||!(p==1&&cT(a,d)||p==2&&Eu(a)))switch(h&&0<h.length&&(d=a.h,d.i=d.i.concat(h)),E){case 1:Mi(a,5);break;case 4:Mi(a,10);break;case 3:Mi(a,6);break;default:Mi(a,2)}}}function Lb(a,d){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*d}function Mi(a,d){if(a.j.info("Error code "+d),d==2){var h=g(a.fb,a),p=a.Xa;let E=!p;p=new Ri(p||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Xa(p,"https"),Ja(p),E?tT(p.toString(),h):nT(p.toString(),h)}else kt(2);a.G=0,a.l&&a.l.sa(d),jb(a),Mb(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function jb(a){if(a.G=0,a.ka=[],a.l){let d=gb(a.h);(d.length!=0||a.i.length!=0)&&(M(a.ka,d),M(a.ka,a.i),a.h.i.length=0,S(a.i),a.i.length=0),a.l.ra()}}function zb(a,d,h){var p=h instanceof Ri?Sn(h):new Ri(h);if(p.g!="")d&&(p.g=d+"."+p.g),Za(p,p.s);else{var E=c.location;p=E.protocol,d=d?d+"."+E.hostname:E.hostname,E=+E.port;var C=new Ri(null);p&&Xa(C,p),d&&(C.g=d),E&&Za(C,E),h&&(C.l=h),p=C}return h=a.D,d=a.ya,h&&d&&Ce(p,h,d),Ce(p,"VER",a.la),ss(a,p),p}function Ub(a,d,h){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new qe(new ns({eb:h})):new qe(a.pa),d.Ha(a.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bb(){}n=Bb.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function oc(){}oc.prototype.g=function(a,d){return new Vt(a,d)};function Vt(a,d){gt.call(this),this.g=new Rb(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!Q(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!Q(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new wr(this)}R(Vt,gt),Vt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vt.prototype.close=function(){Iu(this.g)},Vt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=uu(a),a=h);d.i.push(new GE(d.Ya++,a)),d.G==3&&ic(d)},Vt.prototype.N=function(){this.g.l=null,delete this.j,Iu(this.g),delete this.g,Vt.aa.N.call(this)};function qb(a){mu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let h in d){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}R(qb,mu);function $b(){fu.call(this),this.status=1}R($b,fu);function wr(a){this.g=a}R(wr,Bb),wr.prototype.ua=function(){At(this.g,"a")},wr.prototype.ta=function(a){At(this.g,new qb(a))},wr.prototype.sa=function(a){At(this.g,new $b)},wr.prototype.ra=function(){At(this.g,"b")},oc.prototype.createWebChannel=oc.prototype.g,Vt.prototype.send=Vt.prototype.o,Vt.prototype.open=Vt.prototype.m,Vt.prototype.close=Vt.prototype.close,Fm=Ln.createWebChannelTransport=function(){return new oc},Nm=Ln.getStatEventTarget=function(){return Ka()},Pm=Ln.Event=Di,kl=Ln.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Wa.NO_ERROR=0,Wa.TIMEOUT=8,Wa.HTTP_ERROR=6,na=Ln.ErrorCode=Wa,sb.COMPLETE="complete",Mm=Ln.EventType=sb,tb.EventType=Wo,Wo.OPEN="a",Wo.CLOSE="b",Wo.ERROR="c",Wo.MESSAGE="d",gt.prototype.listen=gt.prototype.K,Jr=Ln.WebChannel=tb,OD=Ln.FetchXmlHttpFactory=ns,qe.prototype.listenOnce=qe.prototype.L,qe.prototype.getLastError=qe.prototype.Ka,qe.prototype.getLastErrorCode=qe.prototype.Ba,qe.prototype.getStatus=qe.prototype.Z,qe.prototype.getResponseJson=qe.prototype.Oa,qe.prototype.getResponseText=qe.prototype.oa,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Ha,Rm=Ln.XhrIo=qe}).apply(typeof Al<"u"?Al:typeof self<"u"?self:typeof window<"u"?window:{});var v0="@firebase/firestore";var nt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};nt.UNAUTHENTICATED=new nt(null),nt.GOOGLE_CREDENTIALS=new nt("google-credentials-uid"),nt.FIRST_PARTY=new nt("first-party-uid"),nt.MOCK_USER=new nt("mock-user");var Ro="10.14.0";var gi=new Sc("@firebase/firestore");function ro(){return gi.logLevel}function wx(n){gi.setLogLevel(n)}function N(n,...e){if(gi.logLevel<=fn.DEBUG){let t=e.map(Up);gi.debug(`Firestore (${Ro}): ${n}`,...t)}}function Qe(n,...e){if(gi.logLevel<=fn.ERROR){let t=e.map(Up);gi.error(`Firestore (${Ro}): ${n}`,...t)}}function rn(n,...e){if(gi.logLevel<=fn.WARN){let t=e.map(Up);gi.warn(`Firestore (${Ro}): ${n}`,...t)}}function Up(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function $(n="Unexpected state"){let e=`FIRESTORE (${Ro}) INTERNAL ASSERTION FAILED: `+n;throw Qe(e),new Error(e)}function W(n,e){n||$()}function Ix(n,e){n||$()}function j(n,e){return n}var D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},P=class extends S_{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ct=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Vl=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Um=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(nt.UNAUTHENTICATED))}shutdown(){}},Bm=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},qm=class{constructor(e){this.t=e,this.currentUser=nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){W(this.o===void 0);let i=this.i,r=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve(),o=new ct;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ct,e.enqueueRetryable(()=>r(this.currentUser))};let s=()=>{let l=o;e.enqueueRetryable(()=>k(this,null,function*(){yield l.promise,yield r(this.currentUser)}))},c=l=>{N("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(N("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ct)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(N("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(W(typeof i.accessToken=="string"),new Vl(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return W(e===null||typeof e=="string"),new nt(e)}},$m=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=nt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Gm=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new $m(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(nt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Hm=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Km=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){W(this.o===void 0);let i=o=>{o.error!=null&&N("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,N("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};let r=o=>{N("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?r(o):N("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(W(typeof t.token=="string"),this.R=t.token,new Hm(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function VD(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}var Ll=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=VD(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<t&&(i+=e.charAt(r[o]%e.length))}return i}};function ne(n,e){return n<e?-1:n>e?1:0}function fo(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function Ex(n){return n+"\0"}var Ue=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new P(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new P(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new P(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new P(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new n(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ne(this.nanoseconds,e.nanoseconds):ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Z=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Ue(0,0))}static max(){return new n(new Ue(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var jl=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&$(),i===void 0?i=e.length-t:i>e.length-t&&$(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let o=e.get(r),s=t.get(r);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},me=class n extends jl{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new P(D.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}},LD=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ye=class n extends jl{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return LD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],i="",r=0,o=()=>{if(i.length===0)throw new P(D.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},s=!1;for(;r<e.length;){let c=e[r];if(c==="\\"){if(r+1===e.length)throw new P(D.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new P(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else c==="`"?(s=!s,r++):c!=="."||s?(i+=c,r++):(o(),r++)}if(o(),s)throw new P(D.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var z=class n{constructor(e){this.path=e}static fromPath(e){return new n(me.fromString(e))}static fromName(e){return new n(me.fromString(e).popFirst(5))}static empty(){return new n(me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return me.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new me(e.slice()))}};var po=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};function Wm(n){return n.fields.find(e=>e.kind===2)}function Qi(n){return n.fields.filter(e=>e.kind!==2)}po.UNKNOWN_ID=-1;var uo=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var fa=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Yt.min())}};function Tx(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Z.fromTimestamp(i===1e9?new Ue(t+1,0):new Ue(t,i));return new Yt(r,z.empty(),e)}function Ax(n){return new Yt(n.readTime,n.key,-1)}var Yt=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(Z.min(),z.empty(),-1)}static max(){return new n(Z.max(),z.empty(),-1)}};function Bp(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=z.comparator(n.documentKey,e.documentKey),t!==0?t:ne(n.largestBatchId,e.largestBatchId))}var kx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",zl=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ai(n){return k(this,null,function*(){if(n.code!==D.FAILED_PRECONDITION||n.message!==kx)throw n;N("LocalStore","Unexpectedly lost primary lease")})}var A=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&$(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let r=0,o=0,s=!1;e.forEach(c=>{++r,c.next(()=>{++o,s&&o===r&&t()},l=>i(l))}),s=!0,o===r&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(r=>r?n.resolve(r):i());return t}static forEach(e,t){let i=[];return e.forEach((r,o)=>{i.push(t.call(this,r,o))}),this.waitFor(i)}static mapArray(e,t){return new n((i,r)=>{let o=e.length,s=new Array(o),c=0;for(let l=0;l<o;l++){let u=l;t(e[u]).next(m=>{s[u]=m,++c,c===o&&i(s)},m=>r(m))}})}static doWhile(e,t){return new n((i,r)=>{let o=()=>{e()===!0?t().next(()=>{o()},r):i()};o()})}};var Ul=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new ct,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new tr(e,t.error)):this.V.resolve()},this.transaction.onerror=i=>{let r=qp(i.target.error);this.V.reject(new tr(e,r))}}static open(e,t,i,r){try{return new n(t,e.transaction(r,i))}catch(o){throw new tr(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(N("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new Ym(t)}},bi=class n{constructor(e,t,i){this.name=e,this.version=t,this.p=i,n.S(ws())===12.2&&Qe("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return N("SimpleDb","Removing database:",e),Yi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Dc())return!1;if(n.v())return!0;let e=ws(),t=n.S(e),i=0<t&&t<10,r=Cx(e),o=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}M(e){return k(this,null,function*(){return this.db||(N("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,i)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=o=>{let s=o.target.result;t(s)},r.onblocked=()=>{i(new tr(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=o=>{let s=o.target.error;s.name==="VersionError"?i(new P(D.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?i(new P(D.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):i(new tr(e,s))},r.onupgradeneeded=o=>{N("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,r.transaction,o.oldVersion,this.version).next(()=>{N("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,r){return k(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let c=Ul.open(this.db,e,o?"readonly":"readwrite",i),l=r(c).next(u=>(c.g(),u)).catch(u=>(c.abort(u),A.reject(u))).toPromise();return l.catch(()=>{}),yield c.m,l}catch(c){let l=c,u=l.name!=="FirebaseError"&&s<3;if(N("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function Cx(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var Qm=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Yi(this.B.delete())}},tr=class extends P{constructor(e,t){super(D.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function ki(n){return n.name==="IndexedDbTransactionError"}var Ym=class{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(N("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(N("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Yi(i)}add(e){return N("SimpleDb","ADD",this.store.name,e,e),Yi(this.store.add(e))}get(e){return Yi(this.store.get(e)).next(t=>(t===void 0&&(t=null),N("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return N("SimpleDb","DELETE",this.store.name,e),Yi(this.store.delete(e))}count(){return N("SimpleDb","COUNT",this.store.name),Yi(this.store.count())}U(e,t){let i=this.options(e,t),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){let o=r.getAll(i.range);return new A((s,c)=>{o.onerror=l=>{c(l.target.error)},o.onsuccess=l=>{s(l.target.result)}})}{let o=this.cursor(i),s=[];return this.W(o,(c,l)=>{s.push(l)}).next(()=>s)}}G(e,t){let i=this.store.getAll(e,t===null?void 0:t);return new A((r,o)=>{i.onerror=s=>{o(s.target.error)},i.onsuccess=s=>{r(s.target.result)}})}j(e,t){N("SimpleDb","DELETE ALL",this.store.name);let i=this.options(e,t);i.H=!1;let r=this.cursor(i);return this.W(r,(o,s,c)=>c.delete())}J(e,t){let i;t?i=e:(i={},t=e);let r=this.cursor(i);return this.W(r,t)}Y(e){let t=this.cursor({});return new A((i,r)=>{t.onerror=o=>{let s=qp(o.target.error);r(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(c=>{c?s.continue():i()}):i()}})}W(e,t){let i=[];return new A((r,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let c=s.target.result;if(!c)return void r();let l=new Qm(c),u=t(c.primaryKey,c.value,l);if(u instanceof A){let m=u.catch(f=>(l.done(),A.reject(f)));i.push(m)}l.isDone?r():l.K===null?c.continue():c.continue(l.K)}}).next(()=>A.waitFor(i))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let i=this.store.index(e.index);return e.H?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Yi(n){return new A((e,t)=>{n.onsuccess=i=>{let r=i.target.result;e(r)},n.onerror=i=>{let r=qp(i.target.error);t(r)}})}var y0=!1;function qp(n){let e=bi.S(ws());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let i=new P("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return y0||(y0=!0,setTimeout(()=>{throw i},0)),i}}return n}var Xm=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){N("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>k(this,null,function*(){this.task=null;try{N("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){ki(t)?N("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield Ai(t)}yield this.X(6e4)}))}},Zm=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return k(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let i=new Set,r=t,o=!0;return A.doWhile(()=>o===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!i.has(s))return N("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,r).next(c=>{r-=c,i.add(s)});o=!1})).next(()=>t-r)}ne(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(r,o)).next(c=>(N("IndexBackfiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c))).next(()=>s.size)}))}re(e,t){let i=e;return t.changes.forEach((r,o)=>{let s=Ax(o);Bp(s,i)>0&&(i=s)}),new Yt(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}};var qt=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Fa(n){return n==null}function pa(n){return n===0&&1/n==-1/0}function Dx(n){return typeof n=="number"&&Number.isInteger(n)&&!pa(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function St(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=x0(e)),e=jD(n.get(t),e);return x0(e)}function jD(n,e){let t=e,i=n.length;for(let r=0;r<i;r++){let o=n.charAt(r);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function x0(n){return n+""}function vn(n){let e=n.length;if(W(e>=2),e===2)return W(n.charAt(0)===""&&n.charAt(1)===""),me.emptyPath();let t=e-2,i=[],r="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&$(),n.charAt(s+1)){case"":let c=n.substring(o,s),l;r.length===0?l=c:(r+=c,l=r,r=""),i.push(l);break;case"":r+=n.substring(o,s),r+="\0";break;case"":r+=n.substring(o,s+1);break;default:$()}o=s+2}return new me(i)}var w0=["userId","batchId"];function Ml(n,e){return[n,St(e)]}function Sx(n,e,t){return[n,St(e),t]}var zD={},UD=["prefixPath","collectionGroup","readTime","documentId"],BD=["prefixPath","collectionGroup","documentId"],qD=["collectionGroup","readTime","prefixPath","documentId"],$D=["canonicalId","targetId"],GD=["targetId","path"],HD=["path","targetId"],KD=["collectionId","parent"],WD=["indexId","uid"],QD=["uid","sequenceNumber"],YD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],XD=["indexId","uid","orderedDocumentKey"],ZD=["userId","collectionPath","documentId"],JD=["userId","collectionPath","largestBatchId"],eS=["userId","collectionGroup","largestBatchId"],Rx=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],tS=[...Rx,"documentOverlays"],Mx=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Px=Mx,$p=[...Px,"indexConfiguration","indexState","indexEntries"],nS=$p,iS=[...$p,"globals"];var ga=class extends zl{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function lt(n,e){let t=j(n);return bi.F(t._e,e)}function I0(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function mr(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Nx(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Re=class n{constructor(e,t){this.comparator=e,this.root=t||xn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,xn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lo(this.root,e,this.comparator,!1)}getReverseIterator(){return new lo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lo(this.root,e,this.comparator,!0)}},lo=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},xn=class n{constructor(e,t,i,r,o){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,o){return new n(e??this.key,t??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,i),null):o===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw $();let e=this.left.check();if(e!==this.right.check())throw $();return e+(this.isRed()?0:1)}};xn.EMPTY=null,xn.RED=!0,xn.BLACK=!1;xn.EMPTY=new class{constructor(){this.size=0}get key(){throw $()}get value(){throw $()}get color(){throw $()}get left(){throw $()}get right(){throw $()}copy(e,t,i,r,o){return this}insert(e,t,i){return new xn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Te=class n{constructor(e){this.comparator=e,this.data=new Re(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Bl(this.data.getIterator())}getIteratorFrom(e){return new Bl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Bl=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function eo(n){return n.hasNext()?n.getNext():void 0}var $t=class n{constructor(e){this.fields=e,e.sort(Ye.comparator)}static empty(){return new n([])}unionWith(e){let t=new Te(Ye.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return fo(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var ql=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function Fx(){return typeof atob<"u"}var Ze=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new ql("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(r){let o="";for(let s=0;s<r.length;++s)o+=String.fromCharCode(r[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ze.EMPTY_BYTE_STRING=new Ze("");var rS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Un(n){if(W(!!n),typeof n=="string"){let e=0,t=rS.exec(n);if(W(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ve(n.seconds),nanos:Ve(n.nanos)}}function Ve(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function _i(n){return typeof n=="string"?Ze.fromBase64String(n):Ze.fromUint8Array(n)}function Nd(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Gp(n){let e=n.mapValue.fields.__previous_value__;return Nd(e)?Gp(e):e}function ba(n){let e=Un(n.mapValue.fields.__local_write_time__.timestampValue);return new Ue(e.seconds,e.nanos)}var Jm=class{constructor(e,t,i,r,o,s,c,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=u}},vi=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var fi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Pl={nullValue:"NULL_VALUE"};function nr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Nd(n)?4:Ox(n)?9007199254740991:Fd(n)?10:11:$()}function En(n,e){if(n===e)return!0;let t=nr(n);if(t!==nr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ba(n).isEqual(ba(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let s=Un(r.timestampValue),c=Un(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,o){return _i(r.bytesValue).isEqual(_i(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Ve(r.geoPointValue.latitude)===Ve(o.geoPointValue.latitude)&&Ve(r.geoPointValue.longitude)===Ve(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Ve(r.integerValue)===Ve(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let s=Ve(r.doubleValue),c=Ve(o.doubleValue);return s===c?pa(s)===pa(c):isNaN(s)&&isNaN(c)}return!1}(n,e);case 9:return fo(n.arrayValue.values||[],e.arrayValue.values||[],En);case 10:case 11:return function(r,o){let s=r.mapValue.fields||{},c=o.mapValue.fields||{};if(I0(s)!==I0(c))return!1;for(let l in s)if(s.hasOwnProperty(l)&&(c[l]===void 0||!En(s[l],c[l])))return!1;return!0}(n,e);default:return $()}}function _a(n,e){return(n.values||[]).find(t=>En(t,e))!==void 0}function yi(n,e){if(n===e)return 0;let t=nr(n),i=nr(e);if(t!==i)return ne(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return ne(n.booleanValue,e.booleanValue);case 2:return function(o,s){let c=Ve(o.integerValue||o.doubleValue),l=Ve(s.integerValue||s.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(n,e);case 3:return E0(n.timestampValue,e.timestampValue);case 4:return E0(ba(n),ba(e));case 5:return ne(n.stringValue,e.stringValue);case 6:return function(o,s){let c=_i(o),l=_i(s);return c.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let c=o.split("/"),l=s.split("/");for(let u=0;u<c.length&&u<l.length;u++){let m=ne(c[u],l[u]);if(m!==0)return m}return ne(c.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let c=ne(Ve(o.latitude),Ve(s.latitude));return c!==0?c:ne(Ve(o.longitude),Ve(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return T0(n.arrayValue,e.arrayValue);case 10:return function(o,s){var c,l,u,m;let f=o.fields||{},g=s.fields||{},w=(c=f.value)===null||c===void 0?void 0:c.arrayValue,R=(l=g.value)===null||l===void 0?void 0:l.arrayValue,S=ne(((u=w?.values)===null||u===void 0?void 0:u.length)||0,((m=R?.values)===null||m===void 0?void 0:m.length)||0);return S!==0?S:T0(w,R)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===fi.mapValue&&s===fi.mapValue)return 0;if(o===fi.mapValue)return 1;if(s===fi.mapValue)return-1;let c=o.fields||{},l=Object.keys(c),u=s.fields||{},m=Object.keys(u);l.sort(),m.sort();for(let f=0;f<l.length&&f<m.length;++f){let g=ne(l[f],m[f]);if(g!==0)return g;let w=yi(c[l[f]],u[m[f]]);if(w!==0)return w}return ne(l.length,m.length)}(n.mapValue,e.mapValue);default:throw $()}}function E0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ne(n,e);let t=Un(n),i=Un(e),r=ne(t.seconds,i.seconds);return r!==0?r:ne(t.nanos,i.nanos)}function T0(n,e){let t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){let o=yi(t[r],i[r]);if(o)return o}return ne(t.length,i.length)}function go(n){return ef(n)}function ef(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let i=Un(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return _i(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return z.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(let o of t.values||[])r?r=!1:i+=",",i+=ef(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){let i=Object.keys(t.fields||{}).sort(),r="{",o=!0;for(let s of i)o?o=!1:r+=",",r+=`${s}:${ef(t.fields[s])}`;return r+"}"}(n.mapValue):$()}function ir(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function tf(n){return!!n&&"integerValue"in n}function va(n){return!!n&&"arrayValue"in n}function A0(n){return!!n&&"nullValue"in n}function k0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Nl(n){return!!n&&"mapValue"in n}function Fd(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function la(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return mr(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=la(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=la(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Ox(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Vx={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function oS(n){return"nullValue"in n?Pl:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ir(vi.empty(),z.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Fd(n)?Vx:{mapValue:{}}:$()}function sS(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ir(vi.empty(),z.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?Vx:"mapValue"in n?Fd(n)?{mapValue:{}}:fi:$()}function C0(n,e){let t=yi(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function D0(n,e){let t=yi(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var Et=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Nl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=la(t)}setAll(e){let t=Ye.emptyPath(),i={},r=[];e.forEach((s,c)=>{if(!t.isImmediateParentOf(c)){let l=this.getFieldsMap(t);this.applyChanges(l,i,r),i={},r=[],t=c.popLast()}s?i[c.lastSegment()]=la(s):r.push(c.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,i,r)}delete(e){let t=this.field(e.popLast());Nl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return En(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];Nl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){mr(t,(r,o)=>e[r]=o);for(let r of i)delete e[r]}clone(){return new n(la(this.value))}};function Lx(n){let e=[];return mr(n.fields,(t,i)=>{let r=new Ye([t]);if(Nl(i)){let o=Lx(i.mapValue).fields;if(o.length===0)e.push(r);else for(let s of o)e.push(r.child(s))}else e.push(r)}),new $t(e)}var it=class n{constructor(e,t,i,r,o,s,c){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new n(e,0,Z.min(),Z.min(),Z.min(),Et.empty(),0)}static newFoundDocument(e,t,i,r){return new n(e,1,t,Z.min(),i,r,0)}static newNoDocument(e,t){return new n(e,2,t,Z.min(),Z.min(),Et.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Z.min(),Z.min(),Et.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Et.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Et.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Tn=class{constructor(e,t){this.position=e,this.inclusive=t}};function S0(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){let o=e[r],s=n.position[r];if(o.field.isKeyField()?i=z.comparator(z.fromName(s.referenceValue),t.key):i=yi(s,t.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function R0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!En(n.position[t],e.position[t]))return!1;return!0}var rr=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function aS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var $l=class{},ue=class n extends $l{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new of(e,t,i):t==="array-contains"?new cf(e,i):t==="in"?new Gl(e,i):t==="not-in"?new lf(e,i):t==="array-contains-any"?new df(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new sf(e,i):new af(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(yi(t,this.value)):t!==null&&nr(this.value)===nr(t)&&this.matchesComparison(yi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ye=class n extends $l{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return bo(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function bo(n){return n.op==="and"}function nf(n){return n.op==="or"}function Hp(n){return jx(n)&&bo(n)}function jx(n){for(let e of n.filters)if(e instanceof ye)return!1;return!0}function rf(n){if(n instanceof ue)return n.field.canonicalString()+n.op.toString()+go(n.value);if(Hp(n))return n.filters.map(e=>rf(e)).join(",");{let e=n.filters.map(t=>rf(t)).join(",");return`${n.op}(${e})`}}function zx(n,e){return n instanceof ue?function(i,r){return r instanceof ue&&i.op===r.op&&i.field.isEqual(r.field)&&En(i.value,r.value)}(n,e):n instanceof ye?function(i,r){return r instanceof ye&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,s,c)=>o&&zx(s,r.filters[c]),!0):!1}(n,e):void $()}function Ux(n,e){let t=n.filters.concat(e);return ye.create(t,n.op)}function Bx(n){return n instanceof ue?function(t){return`${t.field.canonicalString()} ${t.op} ${go(t.value)}`}(n):n instanceof ye?function(t){return t.op.toString()+" {"+t.getFilters().map(Bx).join(" ,")+"}"}(n):"Filter"}var of=class extends ue{constructor(e,t,i){super(e,t,i),this.key=z.fromName(i.referenceValue)}matches(e){let t=z.comparator(e.key,this.key);return this.matchesComparison(t)}},sf=class extends ue{constructor(e,t){super(e,"in",t),this.keys=qx("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},af=class extends ue{constructor(e,t){super(e,"not-in",t),this.keys=qx("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function qx(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>z.fromName(i.referenceValue))}var cf=class extends ue{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return va(t)&&_a(t.arrayValue,this.value)}},Gl=class extends ue{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&_a(this.value.arrayValue,t)}},lf=class extends ue{constructor(e,t){super(e,"not-in",t)}matches(e){if(_a(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!_a(this.value.arrayValue,t)}},df=class extends ue{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!va(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>_a(this.value.arrayValue,i))}};var uf=class{constructor(e,t=null,i=[],r=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=s,this.endAt=c,this.ue=null}};function hf(n,e=null,t=[],i=[],r=null,o=null,s=null){return new uf(n,e,t,i,r,o,s)}function or(n){let e=j(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>rf(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Fa(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>go(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>go(i)).join(",")),e.ue=t}return e.ue}function Oa(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!aS(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!zx(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!R0(n.startAt,e.startAt)&&R0(n.endAt,e.endAt)}function Hl(n){return z.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Kl(n,e){return n.filters.filter(t=>t instanceof ue&&t.field.isEqual(e))}function M0(n,e,t){let i=Pl,r=!0;for(let o of Kl(n,e)){let s=Pl,c=!0;switch(o.op){case"<":case"<=":s=oS(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,c=!1;break;case"!=":case"not-in":s=Pl}C0({value:i,inclusive:r},{value:s,inclusive:c})<0&&(i=s,r=c)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];C0({value:i,inclusive:r},{value:s,inclusive:t.inclusive})<0&&(i=s,r=t.inclusive);break}}return{value:i,inclusive:r}}function P0(n,e,t){let i=fi,r=!0;for(let o of Kl(n,e)){let s=fi,c=!0;switch(o.op){case">=":case">":s=sS(o.value),c=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,c=!1;break;case"!=":case"not-in":s=fi}D0({value:i,inclusive:r},{value:s,inclusive:c})>0&&(i=s,r=c)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];D0({value:i,inclusive:r},{value:s,inclusive:t.inclusive})>0&&(i=s,r=t.inclusive);break}}return{value:i,inclusive:r}}var on=class{constructor(e,t=null,i=[],r=[],o=null,s="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function $x(n,e,t,i,r,o,s,c){return new on(n,e,t,i,r,o,s,c)}function Mo(n){return new on(n)}function N0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Kp(n){return n.collectionGroup!==null}function ho(n){let e=j(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new Te(Ye.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(c=c.add(u.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new rr(o,i))}),t.has(Ye.keyField().canonicalString())||e.ce.push(new rr(Ye.keyField(),i))}return e.ce}function Rt(n){let e=j(n);return e.le||(e.le=cS(e,ho(n))),e.le}function cS(n,e){if(n.limitType==="F")return hf(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new rr(r.field,o)});let t=n.endAt?new Tn(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Tn(n.startAt.position,n.startAt.inclusive):null;return hf(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function mf(n,e){let t=n.filters.concat([e]);return new on(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Wl(n,e,t){return new on(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Va(n,e){return Oa(Rt(n),Rt(e))&&n.limitType===e.limitType}function Gx(n){return`${or(Rt(n))}|lt:${n.limitType}`}function oo(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>Bx(r)).join(", ")}]`),Fa(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>go(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>go(r)).join(",")),`Target(${i})`}(Rt(n))}; limitType=${n.limitType})`}function La(n,e){return e.isFoundDocument()&&function(i,r){let o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):z.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,e)&&function(i,r){for(let o of ho(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(n,e)&&function(i,r){for(let o of i.filters)if(!o.matches(r))return!1;return!0}(n,e)&&function(i,r){return!(i.startAt&&!function(s,c,l){let u=S0(s,c,l);return s.inclusive?u<=0:u<0}(i.startAt,ho(i),r)||i.endAt&&!function(s,c,l){let u=S0(s,c,l);return s.inclusive?u>=0:u>0}(i.endAt,ho(i),r))}(n,e)}function Hx(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Kx(n){return(e,t)=>{let i=!1;for(let r of ho(n)){let o=lS(r,e,t);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function lS(n,e,t){let i=n.field.isKeyField()?z.comparator(e.key,t.key):function(o,s,c){let l=s.data.field(o),u=c.data.field(o);return l!==null&&u!==null?yi(l,u):$()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return $()}}var An=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){mr(this.inner,(t,i)=>{for(let[r,o]of i)e(r,o)})}isEmpty(){return Nx(this.inner)}size(){return this.innerSize}};var dS=new Re(z.comparator);function Ot(){return dS}var Wx=new Re(z.comparator);function aa(...n){let e=Wx;for(let t of n)e=e.insert(t.key,t);return e}function Qx(n){let e=Wx;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function yn(){return da()}function Yx(){return da()}function da(){return new An(n=>n.toString(),(n,e)=>n.isEqual(e))}var uS=new Re(z.comparator),hS=new Te(z.comparator);function oe(...n){let e=hS;for(let t of n)e=e.add(t);return e}var mS=new Te(ne);function Wp(){return mS}function Qp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pa(e)?"-0":e}}function Xx(n){return{integerValue:""+n}}function Zx(n,e){return Dx(e)?Xx(e):Qp(n,e)}var _o=class{constructor(){this._=void 0}};function fS(n,e,t){return n instanceof xi?function(r,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Nd(o)&&(o=Gp(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Bn?ew(n,e):n instanceof qn?tw(n,e):function(r,o){let s=Jx(r,o),c=F0(s)+F0(r.Pe);return tf(s)&&tf(r.Pe)?Xx(c):Qp(r.serializer,c)}(n,e)}function pS(n,e,t){return n instanceof Bn?ew(n,e):n instanceof qn?tw(n,e):t}function Jx(n,e){return n instanceof wi?function(i){return tf(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}var xi=class extends _o{},Bn=class extends _o{constructor(e){super(),this.elements=e}};function ew(n,e){let t=nw(e);for(let i of n.elements)t.some(r=>En(r,i))||t.push(i);return{arrayValue:{values:t}}}var qn=class extends _o{constructor(e){super(),this.elements=e}};function tw(n,e){let t=nw(e);for(let i of n.elements)t=t.filter(r=>!En(r,i));return{arrayValue:{values:t}}}var wi=class extends _o{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function F0(n){return Ve(n.integerValue||n.doubleValue)}function nw(n){return va(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var sr=class{constructor(e,t){this.field=e,this.transform=t}};function gS(n,e){return n.field.isEqual(e.field)&&function(i,r){return i instanceof Bn&&r instanceof Bn||i instanceof qn&&r instanceof qn?fo(i.elements,r.elements,En):i instanceof wi&&r instanceof wi?En(i.Pe,r.Pe):i instanceof xi&&r instanceof xi}(n.transform,e.transform)}var ff=class{constructor(e,t){this.version=e,this.transformResults=t}},Ge=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Fl(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var vo=class{};function iw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ei(n.key,Ge.none()):new Ii(n.key,n.data,Ge.none());{let t=n.data,i=Et.empty(),r=new Te(Ye.comparator);for(let o of e.fields)if(!r.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?i.delete(o):i.set(o,s),r=r.add(o)}return new sn(n.key,i,new $t(r.toArray()),Ge.none())}}function bS(n,e,t){n instanceof Ii?function(r,o,s){let c=r.value.clone(),l=V0(r.fieldTransforms,o,s.transformResults);c.setAll(l),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):n instanceof sn?function(r,o,s){if(!Fl(r.precondition,o))return void o.convertToUnknownDocument(s.version);let c=V0(r.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(rw(r)),l.setAll(c),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):function(r,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function ua(n,e,t,i){return n instanceof Ii?function(o,s,c,l){if(!Fl(o.precondition,s))return c;let u=o.value.clone(),m=L0(o.fieldTransforms,l,s);return u.setAll(m),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,i):n instanceof sn?function(o,s,c,l){if(!Fl(o.precondition,s))return c;let u=L0(o.fieldTransforms,l,s),m=s.data;return m.setAll(rw(o)),m.setAll(u),s.convertToFoundDocument(s.version,m).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,e,t,i):function(o,s,c){return Fl(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c}(n,e,t)}function _S(n,e){let t=null;for(let i of n.fieldTransforms){let r=e.data.field(i.field),o=Jx(i.transform,r||null);o!=null&&(t===null&&(t=Et.empty()),t.set(i.field,o))}return t||null}function O0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&fo(i,r,(o,s)=>gS(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ii=class extends vo{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},sn=class extends vo{constructor(e,t,i,r,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function rw(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function V0(n,e,t){let i=new Map;W(n.length===t.length);for(let r=0;r<t.length;r++){let o=n[r],s=o.transform,c=e.data.field(o.field);i.set(o.field,pS(s,c,t[r]))}return i}function L0(n,e,t){let i=new Map;for(let r of n){let o=r.transform,s=t.data.field(r.field);i.set(r.field,fS(o,s,e))}return i}var Ei=class extends vo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},ya=class extends vo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var xa=class{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(e.key)&&bS(o,e,i[r])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=ua(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=ua(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=Yx();return this.mutations.forEach(r=>{let o=e.get(r.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=t.has(r.key)?null:c;let l=iw(s,c);l!==null&&i.set(r.key,l),s.isValidDocument()||s.convertToNoDocument(Z.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),oe())}isEqual(e){return this.batchId===e.batchId&&fo(this.mutations,e.mutations,(t,i)=>O0(t,i))&&fo(this.baseMutations,e.baseMutations,(t,i)=>O0(t,i))}},pf=class n{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){W(e.mutations.length===i.length);let r=function(){return uS}(),o=e.mutations;for(let s=0;s<o.length;s++)r=r.insert(o[s].key,i[s].version);return new n(e,t,i,r)}};var wa=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var gf=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var et,he;function ow(n){switch(n){default:return $();case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0}}function sw(n){if(n===void 0)return Qe("GRPC error has no .code"),D.UNKNOWN;switch(n){case et.OK:return D.OK;case et.CANCELLED:return D.CANCELLED;case et.UNKNOWN:return D.UNKNOWN;case et.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case et.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case et.INTERNAL:return D.INTERNAL;case et.UNAVAILABLE:return D.UNAVAILABLE;case et.UNAUTHENTICATED:return D.UNAUTHENTICATED;case et.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case et.NOT_FOUND:return D.NOT_FOUND;case et.ALREADY_EXISTS:return D.ALREADY_EXISTS;case et.PERMISSION_DENIED:return D.PERMISSION_DENIED;case et.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case et.ABORTED:return D.ABORTED;case et.OUT_OF_RANGE:return D.OUT_OF_RANGE;case et.UNIMPLEMENTED:return D.UNIMPLEMENTED;case et.DATA_LOSS:return D.DATA_LOSS;default:return $()}}(he=et||(et={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";var j0=null;function aw(){return new TextEncoder}var vS=new li([4294967295,4294967295],0);function z0(n){let e=aw().encode(n),t=new Sm;return t.update(e),new Uint8Array(t.digest())}function U0(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new li([t,i],0),new li([r,o],0)]}var bf=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new er(`Invalid padding: ${t}`);if(i<0)throw new er(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new er(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new er(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=li.fromNumber(this.Ie)}Ee(e,t,i){let r=e.add(t.multiply(li.fromNumber(i)));return r.compare(vS)===1&&(r=new li([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=z0(e),[i,r]=U0(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(i,r,o);if(!this.de(s))return!1}return!0}static create(e,t,i){let r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,r,t);return i.forEach(c=>s.insert(c)),s}insert(e){if(this.Ie===0)return;let t=z0(e),[i,r]=U0(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(i,r,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},er=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ia=class n{constructor(e,t,i,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let r=new Map;return r.set(e,Ea.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(Z.min(),r,new Re(ne),Ot(),oe())}},Ea=class n{constructor(e,t,i,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,oe(),oe(),oe())}};var mo=class{constructor(e,t,i,r){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=r}},Ql=class{constructor(e,t){this.targetId=e,this.me=t}},Yl=class{constructor(e,t,i=Ze.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}},Xl=class{constructor(){this.fe=0,this.ge=q0(),this.pe=Ze.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=oe(),t=oe(),i=oe();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:$()}}),new Ea(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=q0()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,W(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},_f=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ot(),this.qe=B0(),this.Qe=new Re(ne)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:$()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,r)=>{this.ze(r)&&t(r)})}He(e){let t=e.targetId,i=e.me.count,r=this.Je(t);if(r){let o=r.target;if(Hl(o))if(i===0){let s=new z(o.path);this.Ue(t,s,it.newNoDocument(s,Z.min()))}else W(i===1);else{let s=this.Ye(t);if(s!==i){let c=this.Ze(e),l=c?this.Xe(c,e,s):1;if(l!==0){this.je(t);let u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,u)}j0?.et(function(m,f,g,w,R){var S,M,q,Q,L,ee;let ie={localCacheCount:m,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},re=f.unchangedNames;return re&&(ie.bloomFilter={applied:R===0,hashCount:(S=re?.hashCount)!==null&&S!==void 0?S:0,bitmapLength:(Q=(q=(M=re?.bits)===null||M===void 0?void 0:M.bitmap)===null||q===void 0?void 0:q.length)!==null&&Q!==void 0?Q:0,padding:(ee=(L=re?.bits)===null||L===void 0?void 0:L.padding)!==null&&ee!==void 0?ee:0,mightContain:y=>{var b;return(b=w?.mightContain(y))!==null&&b!==void 0&&b}}),ie}(s,e.me,this.Le.tt(),c,l))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=t,s,c;try{s=_i(i).toUint8Array()}catch(l){if(l instanceof ql)return rn("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new bf(s,r,o)}catch(l){return rn(l instanceof er?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.Ie===0?null:c}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){let i=this.Le.getRemoteKeysForTarget(t),r=0;return i.forEach(o=>{let s=this.Le.tt(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,o,null),r++)}),r}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let c=this.Je(s);if(c){if(o.current&&Hl(c.target)){let l=new z(c.target.path);this.ke.get(l)!==null||this.it(s,l)||this.Ue(s,l,it.newNoDocument(l,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let i=oe();this.qe.forEach((o,s)=>{let c=!0;s.forEachWhile(l=>{let u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let r=new Ia(e,t,this.Qe,this.ke,i);return this.ke=Ot(),this.qe=B0(),this.Qe=new Re(ne),r}$e(e,t){if(!this.ze(e))return;let i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Xl,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Te(ne),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||N("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Xl),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function B0(){return new Re(z.comparator)}function q0(){return new Re(z.comparator)}var yS={asc:"ASCENDING",desc:"DESCENDING"},xS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wS={and:"AND",or:"OR"},vf=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function yf(n,e){return n.useProto3Json||Fa(e)?e:{value:e}}function yo(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function IS(n,e){return yo(n,e.toTimestamp())}function Xe(n){return W(!!n),Z.fromTimestamp(function(t){let i=Un(t);return new Ue(i.seconds,i.nanos)}(n))}function Yp(n,e){return xf(n,e).canonicalString()}function xf(n,e){let t=function(r){return new me(["projects",r.projectId,"databases",r.database])}(n).child("documents");return e===void 0?t:t.child(e)}function lw(n){let e=me.fromString(n);return W(vw(e)),e}function Ta(n,e){return Yp(n.databaseId,e.path)}function wn(n,e){let t=lw(e);if(t.get(1)!==n.databaseId.projectId)throw new P(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new P(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new z(hw(t))}function dw(n,e){return Yp(n.databaseId,e)}function uw(n){let e=lw(n);return e.length===4?me.emptyPath():hw(e)}function wf(n){return new me(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function hw(n){return W(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function $0(n,e,t){return{name:Ta(n,e),fields:t.value.mapValue.fields}}function mw(n,e,t){let i=wn(n,e.name),r=Xe(e.updateTime),o=e.createTime?Xe(e.createTime):Z.min(),s=new Et({mapValue:{fields:e.fields}}),c=it.newFoundDocument(i,r,o,s);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function ES(n,e){return"found"in e?function(i,r){W(!!r.found),r.found.name,r.found.updateTime;let o=wn(i,r.found.name),s=Xe(r.found.updateTime),c=r.found.createTime?Xe(r.found.createTime):Z.min(),l=new Et({mapValue:{fields:r.found.fields}});return it.newFoundDocument(o,s,c,l)}(n,e):"missing"in e?function(i,r){W(!!r.missing),W(!!r.readTime);let o=wn(i,r.missing),s=Xe(r.readTime);return it.newNoDocument(o,s)}(n,e):$()}function TS(n,e){let t;if("targetChange"in e){e.targetChange;let i=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:$()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(u,m){return u.useProto3Json?(W(m===void 0||typeof m=="string"),Ze.fromBase64String(m||"")):(W(m===void 0||m instanceof Buffer||m instanceof Uint8Array),Ze.fromUint8Array(m||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&function(u){let m=u.code===void 0?D.UNKNOWN:sw(u.code);return new P(m,u.message||"")}(s);t=new Yl(i,r,o,c||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=wn(n,i.document.name),o=Xe(i.document.updateTime),s=i.document.createTime?Xe(i.document.createTime):Z.min(),c=new Et({mapValue:{fields:i.document.fields}}),l=it.newFoundDocument(r,o,s,c),u=i.targetIds||[],m=i.removedTargetIds||[];t=new mo(u,m,l.key,l)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=wn(n,i.document),o=i.readTime?Xe(i.readTime):Z.min(),s=it.newNoDocument(r,o),c=i.removedTargetIds||[];t=new mo([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=wn(n,i.document),o=i.removedTargetIds||[];t=new mo([],o,r,null)}else{if(!("filter"in e))return $();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:o}=i,s=new gf(r,o),c=i.targetId;t=new Ql(c,s)}}return t}function Aa(n,e){let t;if(e instanceof Ii)t={update:$0(n,e.key,e.value)};else if(e instanceof Ei)t={delete:Ta(n,e.key)};else if(e instanceof sn)t={update:$0(n,e.key,e.data),updateMask:RS(e.fieldMask)};else{if(!(e instanceof ya))return $();t={verify:Ta(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(o,s){let c=s.transform;if(c instanceof xi)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Bn)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof qn)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof wi)return{fieldPath:s.field.canonicalString(),increment:c.Pe};throw $()}(0,i))),e.precondition.isNone||(t.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:IS(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:$()}(n,e.precondition)),t}function If(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?Ge.updateTime(Xe(o.updateTime)):o.exists!==void 0?Ge.exists(o.exists):Ge.none()}(e.currentDocument):Ge.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(s,c){let l=null;if("setToServerValue"in c)W(c.setToServerValue==="REQUEST_TIME"),l=new xi;else if("appendMissingElements"in c){let m=c.appendMissingElements.values||[];l=new Bn(m)}else if("removeAllFromArray"in c){let m=c.removeAllFromArray.values||[];l=new qn(m)}else"increment"in c?l=new wi(s,c.increment):$();let u=Ye.fromServerFormat(c.fieldPath);return new sr(u,l)}(n,r)):[];if(e.update){e.update.name;let r=wn(n,e.update.name),o=new Et({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(l){let u=l.fieldPaths||[];return new $t(u.map(m=>Ye.fromServerFormat(m)))}(e.updateMask);return new sn(r,o,s,t,i)}return new Ii(r,o,t,i)}if(e.delete){let r=wn(n,e.delete);return new Ei(r,t)}if(e.verify){let r=wn(n,e.verify);return new ya(r,t)}return $()}function AS(n,e){return n&&n.length>0?(W(e!==void 0),n.map(t=>function(r,o){let s=r.updateTime?Xe(r.updateTime):Xe(o);return s.isEqual(Z.min())&&(s=Xe(o)),new ff(s,r.transformResults||[])}(t,e))):[]}function fw(n,e){return{documents:[dw(n,e.path)]}}function pw(n,e){let t={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=dw(n,r);let o=function(u){if(u.length!==0)return _w(ye.create(u,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(m=>function(g){return{field:so(g.field),direction:CS(g.dir)}}(m))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let c=yf(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:t,parent:r}}function gw(n){let e=uw(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,r=null;if(i>0){W(i===1);let m=t.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];t.where&&(o=function(f){let g=bw(f);return g instanceof ye&&Hp(g)?g.getFilters():[g]}(t.where));let s=[];t.orderBy&&(s=function(f){return f.map(g=>function(R){return new rr(ao(R.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(g))}(t.orderBy));let c=null;t.limit&&(c=function(f){let g;return g=typeof f=="object"?f.value:f,Fa(g)?null:g}(t.limit));let l=null;t.startAt&&(l=function(f){let g=!!f.before,w=f.values||[];return new Tn(w,g)}(t.startAt));let u=null;return t.endAt&&(u=function(f){let g=!f.before,w=f.values||[];return new Tn(w,g)}(t.endAt)),$x(e,r,s,o,c,"F",l,u)}function kS(n,e){let t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function bw(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=ao(t.unaryFilter.field);return ue.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=ao(t.unaryFilter.field);return ue.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ao(t.unaryFilter.field);return ue.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ao(t.unaryFilter.field);return ue.create(s,"!=",{nullValue:"NULL_VALUE"});default:return $()}}(n):n.fieldFilter!==void 0?function(t){return ue.create(ao(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return $()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ye.create(t.compositeFilter.filters.map(i=>bw(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return $()}}(t.compositeFilter.op))}(n):$()}function CS(n){return yS[n]}function DS(n){return xS[n]}function SS(n){return wS[n]}function so(n){return{fieldPath:n.canonicalString()}}function ao(n){return Ye.fromServerFormat(n.fieldPath)}function _w(n){return n instanceof ue?function(t){if(t.op==="=="){if(k0(t.value))return{unaryFilter:{field:so(t.field),op:"IS_NAN"}};if(A0(t.value))return{unaryFilter:{field:so(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(k0(t.value))return{unaryFilter:{field:so(t.field),op:"IS_NOT_NAN"}};if(A0(t.value))return{unaryFilter:{field:so(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:so(t.field),op:DS(t.op),value:t.value}}}(n):n instanceof ye?function(t){let i=t.getFilters().map(r=>_w(r));return i.length===1?i[0]:{compositeFilter:{op:SS(t.op),filters:i}}}(n):$()}function RS(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function vw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var xo=class n{constructor(e,t,i,r,o=Z.min(),s=Z.min(),c=Ze.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Zl=class{constructor(e){this.ct=e}};function MS(n,e){let t;if(e.document)t=mw(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let i=z.fromSegments(e.noDocument.path),r=cr(e.noDocument.readTime);t=it.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return $();{let i=z.fromSegments(e.unknownDocument.path),r=cr(e.unknownDocument.version);t=it.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(r){let o=new Ue(r[0],r[1]);return Z.fromTimestamp(o)}(e.readTime)),t}function G0(n,e){let t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Jl(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(o,s){return{name:Ta(o,s.key),fields:s.data.value.mapValue.fields,updateTime:yo(o,s.version.toTimestamp()),createTime:yo(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:ar(e.version)};else{if(!e.isUnknownDocument())return $();i.unknownDocument={path:t.path.toArray(),version:ar(e.version)}}return i}function Jl(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ar(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function cr(n){let e=new Ue(n.seconds,n.nanoseconds);return Z.fromTimestamp(e)}function Xi(n,e){let t=(e.baseMutations||[]).map(o=>If(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let c=e.mutations[o+1];s.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let i=e.mutations.map(o=>If(n.ct,o)),r=Ue.fromMillis(e.localWriteTimeMs);return new xa(e.batchId,r,t,i)}function ca(n){let e=cr(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?cr(n.lastLimboFreeSnapshotVersion):Z.min(),i;return i=function(o){return o.documents!==void 0}(n.query)?function(o){return W(o.documents.length===1),Rt(Mo(uw(o.documents[0])))}(n.query):function(o){return Rt(gw(o))}(n.query),new xo(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ze.fromBase64String(n.resumeToken))}function yw(n,e){let t=ar(e.snapshotVersion),i=ar(e.lastLimboFreeSnapshotVersion),r;r=Hl(e.target)?fw(n.ct,e.target):pw(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:or(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function Xp(n){let e=gw({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Wl(e,e.limit,"L"):e}function Om(n,e){return new wa(e.largestBatchId,If(n.ct,e.overlayMutation))}function H0(n,e){let t=e.path.lastSegment();return[n,St(e.path.popLast()),t]}function K0(n,e,t,i){return{indexId:n,uid:e,sequenceNumber:t,readTime:ar(i.readTime),documentKey:St(i.documentKey.path),largestBatchId:i.largestBatchId}}var Ef=class{getBundleMetadata(e,t){return W0(e).get(t).next(i=>{if(i)return function(o){return{id:o.bundleId,createTime:cr(o.createTime),version:o.version}}(i)})}saveBundleMetadata(e,t){return W0(e).put(function(r){return{bundleId:r.id,createTime:ar(Xe(r.createTime)),version:r.version}}(t))}getNamedQuery(e,t){return Q0(e).get(t).next(i=>{if(i)return function(o){return{name:o.name,query:Xp(o.bundledQuery),readTime:cr(o.readTime)}}(i)})}saveNamedQuery(e,t){return Q0(e).put(function(r){return{name:r.name,readTime:ar(Xe(r.readTime)),bundledQuery:r.bundledQuery}}(t))}};function W0(n){return lt(n,"bundles")}function Q0(n){return lt(n,"namedQueries")}var ed=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let i=t.uid||"";return new n(e,i)}getOverlay(e,t){return ia(e).get(H0(this.userId,t)).next(i=>i?Om(this.serializer,i):null)}getOverlays(e,t){let i=yn();return A.forEach(t,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,t,i){let r=[];return i.forEach((o,s)=>{let c=new wa(t,s);r.push(this.ht(e,c))}),A.waitFor(r)}removeOverlaysForBatchId(e,t,i){let r=new Set;t.forEach(s=>r.add(St(s.getCollectionPath())));let o=[];return r.forEach(s=>{let c=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,i+1],!1,!0);o.push(ia(e).j("collectionPathOverlayIndex",c))}),A.waitFor(o)}getOverlaysForCollection(e,t,i){let r=yn(),o=St(t),s=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return ia(e).U("collectionPathOverlayIndex",s).next(c=>{for(let l of c){let u=Om(this.serializer,l);r.set(u.getKey(),u)}return r})}getOverlaysForCollectionGroup(e,t,i,r){let o=yn(),s,c=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ia(e).J({index:"collectionGroupOverlayIndex",range:c},(l,u,m)=>{let f=Om(this.serializer,u);o.size()<r||f.largestBatchId===s?(o.set(f.getKey(),f),s=f.largestBatchId):m.done()}).next(()=>o)}ht(e,t){return ia(e).put(function(r,o,s){let[c,l,u]=H0(o,s.mutation.key);return{userId:o,collectionPath:l,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Aa(r.ct,s.mutation)}}(this.serializer,this.userId,t))}};function ia(n){return lt(n,"documentOverlays")}var Tf=class{Pt(e){return lt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let i=t?.value;return i?Ze.fromUint8Array(i):Ze.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var jn=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Ve(e.integerValue));else if("doubleValue"in e){let i=Ve(e.doubleValue);isNaN(i)?this.dt(t,13):(this.dt(t,15),pa(i)?t.At(0):t.At(i))}else if("timestampValue"in e){let i=e.timestampValue;this.dt(t,20),typeof i=="string"&&(i=Un(i)),t.Rt(`${i.seconds||""}`),t.At(i.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(_i(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.dt(t,45),t.At(i.latitude||0),t.At(i.longitude||0)}else"mapValue"in e?Ox(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Fd(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):$()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let i=e.fields||{};this.dt(t,55);for(let r of Object.keys(i))this.Vt(r,t),this.Tt(i[r],t)}wt(e,t){var i,r;let o=e.fields||{};this.dt(t,53);let s="value",c=((r=(i=o[s].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.dt(t,15),t.At(Ve(c)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let i=e.values||[];this.dt(t,50);for(let r of i)this.Tt(r,t)}yt(e,t){this.dt(t,37),z.fromName(e).path.forEach(i=>{this.dt(t,60),this.Dt(i,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};jn.vt=new jn;function PS(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Y0(n){let e=64-function(i){let r=0;for(let o=0;o<8;++o){let s=PS(255&i[o]);if(r+=s,s!==8)break}return r}(n);return Math.ceil(e/8)}var Af=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),i=t.next();for(;!i.done;)this.Ft(i.value),i=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),i=t.next();for(;!i.done;)this.Ot(i.value),i=t.next();this.Nt()}Lt(e){for(let t of e){let i=t.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{let r=t.codePointAt(0);this.Ft(240|r>>>18),this.Ft(128|63&r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r)}}this.Mt()}Bt(e){for(let t of e){let i=t.charCodeAt(0);if(i<128)this.Ot(i);else if(i<2048)this.Ot(960|i>>>6),this.Ot(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i);else{let r=t.codePointAt(0);this.Ot(240|r>>>18),this.Ot(128|63&r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r)}}this.Nt()}kt(e){let t=this.qt(e),i=Y0(t);this.Qt(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Kt(e){let t=this.qt(e),i=Y0(t);this.Qt(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),i=(128&t[0])!=0;t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);let r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}},kf=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},Cf=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},Zi=class{constructor(){this.jt=new Af,this.Ht=new kf(this.jt),this.Jt=new Cf(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var Ji=class n{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new n(this.indexId,this.documentKey,this.arrayValue,i)}};function di(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=X0(n.arrayValue,e.arrayValue),t!==0?t:(t=X0(n.directionalValue,e.directionalValue),t!==0?t:z.comparator(n.documentKey,e.documentKey)))}function X0(n,e){for(let t=0;t<n.length&&t<e.length;++t){let i=n[t]-e[t];if(i!==0)return i}return n.length-e.length}var td=class{constructor(e){this.Xt=new Te((t,i)=>Ye.comparator(t.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let i=t;i.isInequality()?this.Xt=this.Xt.add(i):this.tn.push(i)}}get nn(){return this.Xt.size>1}rn(e){if(W(e.collectionGroup===this.collectionId),this.nn)return!1;let t=Wm(e);if(t!==void 0&&!this.sn(t))return!1;let i=Qi(e),r=new Set,o=0,s=0;for(;o<i.length&&this.sn(i[o]);++o)r=r.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.Xt.size>0){let c=this.Xt.getIterator().getNext();if(!r.has(c.field.canonicalString())){let l=i[o];if(!this.on(c,l)||!this._n(this.en[s++],l))return!1}++o}for(;o<i.length;++o){let c=i[o];if(s>=this.en.length||!this._n(this.en[s++],c))return!1}return!0}an(){if(this.nn)return null;let e=new Te(Ye.comparator),t=[];for(let i of this.tn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new uo(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new uo(i.field,0))}for(let i of this.en)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new uo(i.field,i.dir==="asc"?0:1)));return new po(po.UNKNOWN_ID,this.collectionId,t,fa.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function xw(n){var e,t;if(W(n instanceof ue||n instanceof ye),n instanceof ue){if(n instanceof Gl){let r=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>ue.create(n.field,"==",o)))||[];return ye.create(r,"or")}return n}let i=n.filters.map(r=>xw(r));return ye.create(i,n.op)}function NS(n){if(n.getFilters().length===0)return[];let e=Rf(xw(n));return W(ww(e)),Df(e)||Sf(e)?[e]:e.getFilters()}function Df(n){return n instanceof ue}function Sf(n){return n instanceof ye&&Hp(n)}function ww(n){return Df(n)||Sf(n)||function(t){if(t instanceof ye&&nf(t)){for(let i of t.getFilters())if(!Df(i)&&!Sf(i))return!1;return!0}return!1}(n)}function Rf(n){if(W(n instanceof ue||n instanceof ye),n instanceof ue)return n;if(n.filters.length===1)return Rf(n.filters[0]);let e=n.filters.map(i=>Rf(i)),t=ye.create(e,n.op);return t=nd(t),ww(t)?t:(W(t instanceof ye),W(bo(t)),W(t.filters.length>1),t.filters.reduce((i,r)=>Zp(i,r)))}function Zp(n,e){let t;return W(n instanceof ue||n instanceof ye),W(e instanceof ue||e instanceof ye),t=n instanceof ue?e instanceof ue?function(r,o){return ye.create([r,o],"and")}(n,e):Z0(n,e):e instanceof ue?Z0(e,n):function(r,o){if(W(r.filters.length>0&&o.filters.length>0),bo(r)&&bo(o))return Ux(r,o.getFilters());let s=nf(r)?r:o,c=nf(r)?o:r,l=s.filters.map(u=>Zp(u,c));return ye.create(l,"or")}(n,e),nd(t)}function Z0(n,e){if(bo(e))return Ux(e,n.getFilters());{let t=e.filters.map(i=>Zp(n,i));return ye.create(t,"or")}}function nd(n){if(W(n instanceof ue||n instanceof ye),n instanceof ue)return n;let e=n.getFilters();if(e.length===1)return nd(e[0]);if(jx(n))return n;let t=e.map(r=>nd(r)),i=[];return t.forEach(r=>{r instanceof ue?i.push(r):r instanceof ye&&(r.op===n.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:ye.create(i,n.op)}var Mf=class{constructor(){this.un=new ka}addToCollectionParentIndex(e,t){return this.un.add(t),A.resolve()}getCollectionParents(e,t){return A.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return A.resolve()}deleteFieldIndex(e,t){return A.resolve()}deleteAllFieldIndexes(e){return A.resolve()}createTargetIndexes(e,t){return A.resolve()}getDocumentsMatchingTarget(e,t){return A.resolve(null)}getIndexType(e,t){return A.resolve(0)}getFieldIndexes(e,t){return A.resolve([])}getNextCollectionGroupToUpdate(e){return A.resolve(null)}getMinOffset(e,t){return A.resolve(Yt.min())}getMinOffsetFromCollectionGroup(e,t){return A.resolve(Yt.min())}updateCollectionGroup(e,t,i){return A.resolve()}updateIndexEntries(e,t){return A.resolve()}},ka=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Te(me.comparator),o=!r.has(i);return this.index[t]=r.add(i),o}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Te(me.comparator)).toArray()}};var Cl=new Uint8Array(0),Pf=class{constructor(e,t){this.databaseId=t,this.cn=new ka,this.ln=new An(i=>or(i),(i,r)=>Oa(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:i,parent:St(r)};return J0(e).put(o)}return A.resolve()}getCollectionParents(e,t){let i=[],r=IDBKeyRange.bound([t,""],[Ex(t),""],!1,!0);return J0(e).U(r).next(o=>{for(let s of o){if(s.collectionId!==t)break;i.push(vn(s.parent))}return i})}addFieldIndex(e,t){let i=ra(e),r=function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(t);delete r.indexId;let o=i.add(r);if(t.indexState){let s=no(e);return o.next(c=>{s.put(K0(c,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let i=ra(e),r=no(e),o=to(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=ra(e),i=to(e),r=no(e);return t.j().next(()=>i.j()).next(()=>r.j())}createTargetIndexes(e,t){return A.forEach(this.hn(t),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){let o=new td(i).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let i=to(e),r=!0,o=new Map;return A.forEach(this.hn(t),s=>this.Pn(e,s).next(c=>{r&&(r=!!c),o.set(s,c)})).next(()=>{if(r){let s=oe(),c=[];return A.forEach(o,(l,u)=>{N("IndexedDbIndexManager",`Using index ${function(L){return`id=${L.indexId}|cg=${L.collectionGroup}|f=${L.fields.map(ee=>`${ee.fieldPath}:${ee.kind}`).join(",")}`}(l)} to execute ${or(t)}`);let m=function(L,ee){let ie=Wm(ee);if(ie===void 0)return null;for(let re of Kl(L,ie.fieldPath))switch(re.op){case"array-contains-any":return re.value.arrayValue.values||[];case"array-contains":return[re.value]}return null}(u,l),f=function(L,ee){let ie=new Map;for(let re of Qi(ee))for(let y of Kl(L,re.fieldPath))switch(y.op){case"==":case"in":ie.set(re.fieldPath.canonicalString(),y.value);break;case"not-in":case"!=":return ie.set(re.fieldPath.canonicalString(),y.value),Array.from(ie.values())}return null}(u,l),g=function(L,ee){let ie=[],re=!0;for(let y of Qi(ee)){let b=y.kind===0?M0(L,y.fieldPath,L.startAt):P0(L,y.fieldPath,L.startAt);ie.push(b.value),re&&(re=b.inclusive)}return new Tn(ie,re)}(u,l),w=function(L,ee){let ie=[],re=!0;for(let y of Qi(ee)){let b=y.kind===0?P0(L,y.fieldPath,L.endAt):M0(L,y.fieldPath,L.endAt);ie.push(b.value),re&&(re=b.inclusive)}return new Tn(ie,re)}(u,l),R=this.In(l,u,g),S=this.In(l,u,w),M=this.Tn(l,u,f),q=this.En(l.indexId,m,R,g.inclusive,S,w.inclusive,M);return A.forEach(q,Q=>i.G(Q,t.limit).next(L=>{L.forEach(ee=>{let ie=z.fromSegments(ee.documentKey);s.has(ie)||(s=s.add(ie),c.push(ie))})}))}).next(()=>c)}return A.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=NS(ye.create(e.filters,"and")).map(i=>hf(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,i,r,o,s,c){let l=(t!=null?t.length:1)*Math.max(i.length,o.length),u=l/(t!=null?t.length:1),m=[];for(let f=0;f<l;++f){let g=t?this.dn(t[f/u]):Cl,w=this.An(e,g,i[f%u],r),R=this.Rn(e,g,o[f%u],s),S=c.map(M=>this.An(e,g,M,!0));m.push(...this.createRange(w,R,S))}return m}An(e,t,i,r){let o=new Ji(e,z.empty(),t,i);return r?o:o.Zt()}Rn(e,t,i,r){let o=new Ji(e,z.empty(),t,i);return r?o.Zt():o}Pn(e,t){let i=new td(t),r=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(o=>{let s=null;for(let c of o)i.rn(c)&&(!s||c.fields.length>s.fields.length)&&(s=c);return s})}getIndexType(e,t){let i=2,r=this.hn(t);return A.forEach(r,o=>this.Pn(e,o).next(s=>{s?i!==0&&s.fields.length<function(l){let u=new Te(Ye.comparator),m=!1;for(let f of l.filters)for(let g of f.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?m=!0:u=u.add(g.field));for(let f of l.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(m?1:0)}(o)&&(i=1):i=0})).next(()=>function(s){return s.limit!==null}(t)&&r.length>1&&i===2?1:i)}Vn(e,t){let i=new Zi;for(let r of Qi(e)){let o=t.data.field(r.fieldPath);if(o==null)return null;let s=i.Yt(r.kind);jn.vt.It(o,s)}return i.zt()}dn(e){let t=new Zi;return jn.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let i=new Zi;return jn.vt.It(ir(this.databaseId,t),i.Yt(function(o){let s=Qi(o);return s.length===0?0:s[s.length-1].kind}(e))),i.zt()}Tn(e,t,i){if(i===null)return[];let r=[];r.push(new Zi);let o=0;for(let s of Qi(e)){let c=i[o++];for(let l of r)if(this.fn(t,s.fieldPath)&&va(c))r=this.gn(r,s,c);else{let u=l.Yt(s.kind);jn.vt.It(c,u)}}return this.pn(r)}In(e,t,i){return this.Tn(e,t,i.position)}pn(e){let t=[];for(let i=0;i<e.length;++i)t[i]=e[i].zt();return t}gn(e,t,i){let r=[...e],o=[];for(let s of i.arrayValue.values||[])for(let c of r){let l=new Zi;l.seed(c.zt()),jn.vt.It(s,l.Yt(t.kind)),o.push(l)}return o}fn(e,t){return!!e.filters.find(i=>i instanceof ue&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,t){let i=ra(e),r=no(e);return(t?i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.U()).next(o=>{let s=[];return A.forEach(o,c=>r.get([c.indexId,this.uid]).next(l=>{s.push(function(m,f){let g=f?new fa(f.sequenceNumber,new Yt(cr(f.readTime),new z(vn(f.documentKey)),f.largestBatchId)):fa.empty(),w=m.fields.map(([R,S])=>new uo(Ye.fromServerFormat(R),S));return new po(m.indexId,m.collectionGroup,w,g)}(c,l))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((i,r)=>{let o=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return o!==0?o:ne(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){let r=ra(e),o=no(e);return this.yn(e).next(s=>r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(c=>A.forEach(c,l=>o.put(K0(l.indexId,this.uid,s,i)))))}updateIndexEntries(e,t){let i=new Map;return A.forEach(t,(r,o)=>{let s=i.get(r.collectionGroup);return(s?A.resolve(s):this.getFieldIndexes(e,r.collectionGroup)).next(c=>(i.set(r.collectionGroup,c),A.forEach(c,l=>this.wn(e,r,l).next(u=>{let m=this.Sn(o,l);return u.isEqual(m)?A.resolve():this.bn(e,o,l,u,m)}))))})}Dn(e,t,i,r){return to(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.mn(i,t.key),documentKey:t.key.path.toArray()})}vn(e,t,i,r){return to(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.mn(i,t.key),t.key.path.toArray()])}wn(e,t,i){let r=to(e),o=new Te(di);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.mn(i,t)])},(s,c)=>{o=o.add(new Ji(i.indexId,t,c.arrayValue,c.directionalValue))}).next(()=>o)}Sn(e,t){let i=new Te(di),r=this.Vn(t,e);if(r==null)return i;let o=Wm(t);if(o!=null){let s=e.data.field(o.fieldPath);if(va(s))for(let c of s.arrayValue.values||[])i=i.add(new Ji(t.indexId,e.key,this.dn(c),r))}else i=i.add(new Ji(t.indexId,e.key,Cl,r));return i}bn(e,t,i,r,o){N("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(l,u,m,f,g){let w=l.getIterator(),R=u.getIterator(),S=eo(w),M=eo(R);for(;S||M;){let q=!1,Q=!1;if(S&&M){let L=m(S,M);L<0?Q=!0:L>0&&(q=!0)}else S!=null?Q=!0:q=!0;q?(f(M),M=eo(R)):Q?(g(S),S=eo(w)):(S=eo(w),M=eo(R))}}(r,o,di,c=>{s.push(this.Dn(e,t,i,c))},c=>{s.push(this.vn(e,t,i,c))}),A.waitFor(s)}yn(e){let t=1;return no(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,o)=>{o.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((s,c)=>di(s,c)).filter((s,c,l)=>!c||di(s,l[c-1])!==0);let r=[];r.push(e);for(let s of i){let c=di(s,e),l=di(s,t);if(c===0)r[0]=e.Zt();else if(c>0&&l<0)r.push(s),r.push(s.Zt());else if(l>0)break}r.push(t);let o=[];for(let s=0;s<r.length;s+=2){if(this.Cn(r[s],r[s+1]))return[];let c=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Cl,[]],l=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Cl,[]];o.push(IDBKeyRange.bound(c,l))}return o}Cn(e,t){return di(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(ex)}getMinOffset(e,t){return A.mapArray(this.hn(t),i=>this.Pn(e,i).next(r=>r||$())).next(ex)}};function J0(n){return lt(n,"collectionParents")}function to(n){return lt(n,"indexEntries")}function ra(n){return lt(n,"indexConfiguration")}function no(n){return lt(n,"indexState")}function ex(n){W(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){let r=n[i].indexState.offset;Bp(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new Yt(e.readTime,e.documentKey,t)}var tx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Qt=class n{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function Iw(n,e,t){let i=n.store("mutations"),r=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),c=0,l=i.J({range:s},(m,f,g)=>(c++,g.delete()));o.push(l.next(()=>{W(c===1)}));let u=[];for(let m of t.mutations){let f=Sx(e,m.key.path,t.batchId);o.push(r.delete(f)),u.push(m.key)}return A.waitFor(o).next(()=>u)}function id(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw $();e=n.noDocument}return JSON.stringify(e).length}Qt.DEFAULT_COLLECTION_PERCENTILE=10,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qt.DEFAULT=new Qt(41943040,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qt.DISABLED=new Qt(-1,0,0);var rd=class n{constructor(e,t,i,r){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=r,this.Fn={}}static lt(e,t,i,r){W(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,i,r)}checkEmpty(e){let t=!0,i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ui(e).J({index:"userMutationsIndex",range:i},(r,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,i,r){let o=co(e),s=ui(e);return s.add({}).next(c=>{W(typeof c=="number");let l=new xa(c,t,i,r),u=function(w,R,S){let M=S.baseMutations.map(Q=>Aa(w.ct,Q)),q=S.mutations.map(Q=>Aa(w.ct,Q));return{userId:R,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:M,mutations:q}}(this.serializer,this.userId,l),m=[],f=new Te((g,w)=>ne(g.canonicalString(),w.canonicalString()));for(let g of r){let w=Sx(this.userId,g.key.path,c);f=f.add(g.key.path.popLast()),m.push(s.put(u)),m.push(o.put(w,zD))}return f.forEach(g=>{m.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Fn[c]=l.keys()}),A.waitFor(m).next(()=>l)})}lookupMutationBatch(e,t){return ui(e).get(t).next(i=>i?(W(i.userId===this.userId),Xi(this.serializer,i)):null)}Mn(e,t){return this.Fn[t]?A.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){let r=i.keys();return this.Fn[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]),o=null;return ui(e).J({index:"userMutationsIndex",range:r},(s,c,l)=>{c.userId===this.userId&&(W(c.batchId>=i),o=Xi(this.serializer,c)),l.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),i=-1;return ui(e).J({index:"userMutationsIndex",range:t,reverse:!0},(r,o,s)=>{i=o.batchId,s.done()}).next(()=>i)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ui(e).U("userMutationsIndex",t).next(i=>i.map(r=>Xi(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){let i=Ml(this.userId,t.path),r=IDBKeyRange.lowerBound(i),o=[];return co(e).J({range:r},(s,c,l)=>{let[u,m,f]=s,g=vn(m);if(u===this.userId&&t.path.isEqual(g))return ui(e).get(f).next(w=>{if(!w)throw $();W(w.userId===this.userId),o.push(Xi(this.serializer,w))});l.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Te(ne),r=[];return t.forEach(o=>{let s=Ml(this.userId,o.path),c=IDBKeyRange.lowerBound(s),l=co(e).J({range:c},(u,m,f)=>{let[g,w,R]=u,S=vn(w);g===this.userId&&o.path.isEqual(S)?i=i.add(R):f.done()});r.push(l)}),A.waitFor(r).next(()=>this.xn(e,i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,o=Ml(this.userId,i),s=IDBKeyRange.lowerBound(o),c=new Te(ne);return co(e).J({range:s},(l,u,m)=>{let[f,g,w]=l,R=vn(g);f===this.userId&&i.isPrefixOf(R)?R.length===r&&(c=c.add(w)):m.done()}).next(()=>this.xn(e,c))}xn(e,t){let i=[],r=[];return t.forEach(o=>{r.push(ui(e).get(o).next(s=>{if(s===null)throw $();W(s.userId===this.userId),i.push(Xi(this.serializer,s))}))}),A.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return Iw(e._e,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),A.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return A.resolve();let i=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),r=[];return co(e).J({range:i},(o,s,c)=>{if(o[0]===this.userId){let l=vn(o[1]);r.push(l)}else c.done()}).next(()=>{W(r.length===0)})})}containsKey(e,t){return Ew(e,this.userId,t)}Nn(e){return Tw(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function Ew(n,e,t){let i=Ml(e,t.path),r=i[1],o=IDBKeyRange.lowerBound(i),s=!1;return co(n).J({range:o,H:!0},(c,l,u)=>{let[m,f,g]=c;m===e&&f===r&&(s=!0),u.done()}).next(()=>s)}function ui(n){return lt(n,"mutations")}function co(n){return lt(n,"documentMutations")}function Tw(n){return lt(n,"mutationQueues")}var wo=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Nf=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let i=new wo(t.highestTargetId);return t.highestTargetId=i.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>Z.fromTimestamp(new Ue(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.qn(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Qn(e,r)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(i=>(i.targetCount+=1,this.$n(t,i),this.Qn(e,i))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>io(e).delete(t.targetId)).next(()=>this.qn(e)).next(i=>(W(i.targetCount>0),i.targetCount-=1,this.Qn(e,i)))}removeTargets(e,t,i){let r=0,o=[];return io(e).J((s,c)=>{let l=ca(c);l.sequenceNumber<=t&&i.get(l.targetId)===null&&(r++,o.push(this.removeTargetData(e,l)))}).next(()=>A.waitFor(o)).next(()=>r)}forEachTarget(e,t){return io(e).J((i,r)=>{let o=ca(r);t(o)})}qn(e){return nx(e).get("targetGlobalKey").next(t=>(W(t!==null),t))}Qn(e,t){return nx(e).put("targetGlobalKey",t)}Kn(e,t){return io(e).put(yw(this.serializer,t))}$n(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let i=or(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),o=null;return io(e).J({range:r,index:"queryTargetsIndex"},(s,c,l)=>{let u=ca(c);Oa(t,u.target)&&(o=u,l.done())}).next(()=>o)}addMatchingKeys(e,t,i){let r=[],o=hi(e);return t.forEach(s=>{let c=St(s.path);r.push(o.put({targetId:i,path:c})),r.push(this.referenceDelegate.addReference(e,i,s))}),A.waitFor(r)}removeMatchingKeys(e,t,i){let r=hi(e);return A.forEach(t,o=>{let s=St(o.path);return A.waitFor([r.delete([i,s]),this.referenceDelegate.removeReference(e,i,o)])})}removeMatchingKeysForTargetId(e,t){let i=hi(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){let i=IDBKeyRange.bound([t],[t+1],!1,!0),r=hi(e),o=oe();return r.J({range:i,H:!0},(s,c,l)=>{let u=vn(s[1]),m=new z(u);o=o.add(m)}).next(()=>o)}containsKey(e,t){let i=St(t.path),r=IDBKeyRange.bound([i],[Ex(i)],!1,!0),o=0;return hi(e).J({index:"documentTargetsIndex",H:!0,range:r},([s,c],l,u)=>{s!==0&&(o++,u.done())}).next(()=>o>0)}ot(e,t){return io(e).get(t).next(i=>i?ca(i):null)}};function io(n){return lt(n,"targets")}function nx(n){return lt(n,"targetGlobal")}function hi(n){return lt(n,"targetDocuments")}function ix([n,e],[t,i]){let r=ne(n,t);return r===0?ne(e,i):r}var Ff=class{constructor(e){this.Un=e,this.buffer=new Te(ix),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let i=this.buffer.last();ix(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}},Of=class{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){N("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>k(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){ki(t)?N("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Ai(t)}yield this.Hn(3e5)}))}},Vf=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return A.resolve(qt.oe);let i=new Ff(t);return this.Jn.forEachTarget(e,r=>i.zn(r.sequenceNumber)).next(()=>this.Jn.Zn(e,r=>i.zn(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Jn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(N("LruGarbageCollector","Garbage collection skipped; disabled"),A.resolve(tx)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(N("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tx):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let i,r,o,s,c,l,u,m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(N("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),r=this.params.maximumSequenceNumbersToCollect):r=f,s=Date.now(),this.nthSequenceNumber(e,r))).next(f=>(i=f,c=Date.now(),this.removeTargets(e,i,t))).next(f=>(o=f,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(f=>(u=Date.now(),ro()<=fn.DEBUG&&N("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-m}ms
	Determined least recently used ${r} in `+(c-s)+`ms
	Removed ${o} targets in `+(l-c)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-m}ms`),A.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:f})))}};function FS(n,e){return new Vf(n,e)}var Lf=class{constructor(e,t){this.db=e,this.garbageCollector=FS(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}er(e){let t=0;return this.Zn(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(i,r)=>t(r))}addReference(e,t,i){return Dl(e,i)}removeReference(e,t,i){return Dl(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return Dl(e,t)}nr(e,t){return function(r,o){let s=!1;return Tw(r).Y(c=>Ew(r,c,o).next(l=>(l&&(s=!0),A.resolve(!l)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],o=0;return this.tr(e,(s,c)=>{if(c<=t){let l=this.nr(e,s).next(u=>{if(!u)return o++,i.getEntry(e,s).next(()=>(i.removeEntry(s,Z.min()),hi(e).delete(function(f){return[0,St(f.path)]}(s))))});r.push(l)}}).next(()=>A.waitFor(r)).next(()=>i.apply(e)).next(()=>o)}removeTarget(e,t){let i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return Dl(e,t)}tr(e,t){let i=hi(e),r,o=qt.oe;return i.J({index:"documentTargetsIndex"},([s,c],{path:l,sequenceNumber:u})=>{s===0?(o!==qt.oe&&t(new z(vn(r)),o),o=u,r=l):o=qt.oe}).next(()=>{o!==qt.oe&&t(new z(vn(r)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Dl(n,e){return hi(n).put(function(i,r){return{targetId:0,path:St(i.path),sequenceNumber:r}}(e,n.currentSequenceNumber))}var od=class{constructor(){this.changes=new An(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,it.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?A.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var jf=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return Wi(e).put(i)}removeEntry(e,t,i){return Wi(e).delete(function(o,s){let c=o.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Jl(s),c[c.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.rr(e,i)))}getEntry(e,t){let i=it.newInvalidDocument(t);return Wi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(oa(t))},(r,o)=>{i=this.ir(t,o)}).next(()=>i)}sr(e,t){let i={size:0,document:it.newInvalidDocument(t)};return Wi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(oa(t))},(r,o)=>{i={document:this.ir(t,o),size:id(o)}}).next(()=>i)}getEntries(e,t){let i=Ot();return this._r(e,t,(r,o)=>{let s=this.ir(r,o);i=i.insert(r,s)}).next(()=>i)}ar(e,t){let i=Ot(),r=new Re(z.comparator);return this._r(e,t,(o,s)=>{let c=this.ir(o,s);i=i.insert(o,c),r=r.insert(o,id(s))}).next(()=>({documents:i,ur:r}))}_r(e,t,i){if(t.isEmpty())return A.resolve();let r=new Te(sx);t.forEach(l=>r=r.add(l));let o=IDBKeyRange.bound(oa(r.first()),oa(r.last())),s=r.getIterator(),c=s.getNext();return Wi(e).J({index:"documentKeyIndex",range:o},(l,u,m)=>{let f=z.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;c&&sx(c,f)<0;)i(c,null),c=s.getNext();c&&c.isEqual(f)&&(i(c,u),c=s.hasNext()?s.getNext():null),c?m.$(oa(c)):m.done()}).next(()=>{for(;c;)i(c,null),c=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,i,r,o){let s=t.path,c=[s.popLast().toArray(),s.lastSegment(),Jl(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],l=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wi(e).U(IDBKeyRange.bound(c,l,!0)).next(u=>{o?.incrementDocumentReadCount(u.length);let m=Ot();for(let f of u){let g=this.ir(z.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(La(t,g)||r.has(g.key))&&(m=m.insert(g.key,g))}return m})}getAllFromCollectionGroup(e,t,i,r){let o=Ot(),s=ox(t,i),c=ox(t,Yt.max());return Wi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,c,!0)},(l,u,m)=>{let f=this.ir(z.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);o=o.insert(f.key,f),o.size===r&&m.done()}).next(()=>o)}newChangeBuffer(e){return new zf(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return rx(e).get("remoteDocumentGlobalKey").next(t=>(W(!!t),t))}rr(e,t){return rx(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let i=MS(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(Z.min())))return i}return it.newInvalidDocument(e)}};function Aw(n){return new jf(n)}var zf=class extends od{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new An(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){let t=[],i=0,r=new Te((o,s)=>ne(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let c=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,c.readTime)),s.isValidDocument()){let l=G0(this.cr.serializer,s);r=r.add(o.path.popLast());let u=id(l);i+=u-c.size,t.push(this.cr.addEntry(e,o,l))}else if(i-=c.size,this.trackRemovals){let l=G0(this.cr.serializer,s.convertToNoDocument(Z.min()));t.push(this.cr.addEntry(e,o,l))}}),r.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,i)),A.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(i=>(this.lr.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:i,ur:r})=>(r.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:i.get(o).readTime})}),i))}};function rx(n){return lt(n,"remoteDocumentGlobal")}function Wi(n){return lt(n,"remoteDocumentsV14")}function oa(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ox(n,e){let t=e.documentKey.path.toArray();return[n,Jl(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function sx(n,e){let t=n.path.toArray(),i=e.path.toArray(),r=0;for(let o=0;o<t.length-2&&o<i.length-2;++o)if(r=ne(t[o],i[o]),r)return r;return r=ne(t.length,i.length),r||(r=ne(t[t.length-2],i[i.length-2]),r||ne(t[t.length-1],i[i.length-1]))}var Uf=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var sd=class{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&ua(i.mutation,r,$t.empty(),Ue.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,oe()).next(()=>i))}getLocalViewOfDocuments(e,t,i=oe()){let r=yn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(o=>{let s=aa();return o.forEach((c,l)=>{s=s.insert(c,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let i=yn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,oe()))}populateOverlays(e,t,i){let r=[];return i.forEach(o=>{t.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((s,c)=>{t.set(s,c)})})}computeViews(e,t,i,r){let o=Ot(),s=da(),c=function(){return da()}();return t.forEach((l,u)=>{let m=i.get(u.key);r.has(u.key)&&(m===void 0||m.mutation instanceof sn)?o=o.insert(u.key,u):m!==void 0?(s.set(u.key,m.mutation.getFieldMask()),ua(m.mutation,u,m.mutation.getFieldMask(),Ue.now())):s.set(u.key,$t.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((u,m)=>s.set(u,m)),t.forEach((u,m)=>{var f;return c.set(u,new Uf(m,(f=s.get(u))!==null&&f!==void 0?f:null))}),c))}recalculateAndSaveOverlays(e,t){let i=da(),r=new Re((s,c)=>s-c),o=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let c of s)c.keys().forEach(l=>{let u=t.get(l);if(u===null)return;let m=i.get(l)||$t.empty();m=c.applyToLocalView(u,m),i.set(l,m);let f=(r.get(c.batchId)||oe()).add(l);r=r.insert(c.batchId,f)})}).next(()=>{let s=[],c=r.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),u=l.key,m=l.value,f=Yx();m.forEach(g=>{if(!o.has(g)){let w=iw(t.get(g),i.get(g));w!==null&&f.set(g,w),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,f))}return A.waitFor(s)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return function(s){return z.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Kp(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(o=>{let s=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-o.size):A.resolve(yn()),c=-1,l=o;return s.next(u=>A.forEach(u,(m,f)=>(c<f.largestBatchId&&(c=f.largestBatchId),o.get(m)?A.resolve():this.remoteDocumentCache.getEntry(e,m).next(g=>{l=l.insert(m,g)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,l,u,oe())).next(m=>({batchId:c,changes:Qx(m)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new z(t)).next(i=>{let r=aa();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let o=t.collectionGroup,s=aa();return this.indexManager.getCollectionParents(e,o).next(c=>A.forEach(c,l=>{let u=function(f,g){return new on(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,i,r).next(m=>{m.forEach((f,g)=>{s=s.insert(f,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,o,r))).next(s=>{o.forEach((l,u)=>{let m=u.getKey();s.get(m)===null&&(s=s.insert(m,it.newInvalidDocument(m)))});let c=aa();return s.forEach((l,u)=>{let m=o.get(l);m!==void 0&&ua(m.mutation,u,$t.empty(),Ue.now()),La(t,u)&&(c=c.insert(l,u))}),c})}};var Bf=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return A.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:Xe(r.createTime)}}(t)),A.resolve()}getNamedQuery(e,t){return A.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(r){return{name:r.name,query:Xp(r.bundledQuery),readTime:Xe(r.readTime)}}(t)),A.resolve()}};var qf=class{constructor(){this.overlays=new Re(z.comparator),this.Ir=new Map}getOverlay(e,t){return A.resolve(this.overlays.get(t))}getOverlays(e,t){let i=yn();return A.forEach(t,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,o)=>{this.ht(e,t,o)}),A.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.Ir.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(i)),A.resolve()}getOverlaysForCollection(e,t,i){let r=yn(),o=t.length+1,s=new z(t.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let l=c.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&l.largestBatchId>i&&r.set(l.getKey(),l)}return A.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let o=new Re((u,m)=>u-m),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>i){let m=o.get(u.largestBatchId);m===null&&(m=yn(),o=o.insert(u.largestBatchId,m)),m.set(u.getKey(),u)}}let c=yn(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,m)=>c.set(u,m)),!(c.size()>=r)););return A.resolve(c)}ht(e,t,i){let r=this.overlays.get(i.key);if(r!==null){let s=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,s)}this.overlays=this.overlays.insert(i.key,new wa(t,i));let o=this.Ir.get(t);o===void 0&&(o=oe(),this.Ir.set(t,o)),this.Ir.set(t,o.add(i.key))}};var $f=class{constructor(){this.sessionToken=Ze.EMPTY_BYTE_STRING}getSessionToken(e){return A.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,A.resolve()}};var Ca=class{constructor(){this.Tr=new Te(tt.Er),this.dr=new Te(tt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let i=new tt(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Vr(new tt(e,t))}mr(e,t){e.forEach(i=>this.removeReference(i,t))}gr(e){let t=new z(new me([])),i=new tt(t,e),r=new tt(t,e+1),o=[];return this.dr.forEachInRange([i,r],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new z(new me([])),i=new tt(t,e),r=new tt(t,e+1),o=oe();return this.dr.forEachInRange([i,r],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new tt(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},tt=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return z.comparator(e.key,t.key)||ne(e.wr,t.wr)}static Ar(e,t){return ne(e.wr,t.wr)||z.comparator(e.key,t.key)}};var Gf=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Te(tt.Er)}checkEmpty(e){return A.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new xa(o,t,i,r);this.mutationQueue.push(s);for(let c of r)this.br=this.br.add(new tt(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return A.resolve(s)}lookupMutationBatch(e,t){return A.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=this.vr(i),o=r<0?0:r;return A.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return A.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return A.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new tt(t,0),r=new tt(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([i,r],s=>{let c=this.Dr(s.wr);o.push(c)}),A.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Te(ne);return t.forEach(r=>{let o=new tt(r,0),s=new tt(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],c=>{i=i.add(c.wr)})}),A.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,o=i;z.isDocumentKey(o)||(o=o.child(""));let s=new tt(new z(o),0),c=new Te(ne);return this.br.forEachWhile(l=>{let u=l.key.path;return!!i.isPrefixOf(u)&&(u.length===r&&(c=c.add(l.wr)),!0)},s),A.resolve(this.Cr(c))}Cr(e){let t=[];return e.forEach(i=>{let r=this.Dr(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){W(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return A.forEach(t.mutations,r=>{let o=new tt(r.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,t){let i=new tt(t,0),r=this.br.firstAfterOrEqual(i);return A.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,A.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Hf=class{constructor(e){this.Mr=e,this.docs=function(){return new Re(z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),o=r?r.size:0,s=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return A.resolve(i?i.document.mutableCopy():it.newInvalidDocument(t))}getEntries(e,t){let i=Ot();return t.forEach(r=>{let o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():it.newInvalidDocument(r))}),A.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let o=Ot(),s=t.path,c=new z(s.child("")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:u,value:{document:m}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||Bp(Ax(m),i)<=0||(r.has(m.key)||La(t,m))&&(o=o.insert(m.key,m.mutableCopy()))}return A.resolve(o)}getAllFromCollectionGroup(e,t,i,r){$()}Or(e,t){return A.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new Kf(this)}getSize(e){return A.resolve(this.size)}},Kf=class extends od{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),A.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var Wf=class{constructor(e){this.persistence=e,this.Nr=new An(t=>or(t),Oa),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ca,this.targetCount=0,this.kr=wo.Bn()}forEachTarget(e,t){return this.Nr.forEach((i,r)=>t(r)),A.resolve()}getLastRemoteSnapshotVersion(e){return A.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return A.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),A.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),A.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new wo(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,A.resolve()}updateTargetData(e,t){return this.Kn(t),A.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,A.resolve()}removeTargets(e,t,i){let r=0,o=[];return this.Nr.forEach((s,c)=>{c.sequenceNumber<=t&&i.get(c.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)}),A.waitFor(o).next(()=>r)}getTargetCount(e){return A.resolve(this.targetCount)}getTargetData(e,t){let i=this.Nr.get(t)||null;return A.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),A.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);let r=this.persistence.referenceDelegate,o=[];return r&&t.forEach(s=>{o.push(r.markPotentiallyOrphaned(e,s))}),A.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),A.resolve()}getMatchingKeysForTargetId(e,t){let i=this.Br.yr(t);return A.resolve(i)}containsKey(e,t){return A.resolve(this.Br.containsKey(t))}};var ad=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new qt(0),this.Kr=!1,this.Kr=!0,this.$r=new $f,this.referenceDelegate=e(this),this.Ur=new Wf(this),this.indexManager=new Mf,this.remoteDocumentCache=function(r){return new Hf(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new Zl(t),this.Gr=new Bf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new qf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new Gf(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){N("MemoryPersistence","Starting transaction:",e);let r=new Qf(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(o=>this.referenceDelegate.jr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Hr(e,t){return A.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,t)))}},Qf=class extends zl{constructor(e){super(),this.currentSequenceNumber=e}},cd=class n{constructor(e){this.persistence=e,this.Jr=new Ca,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw $()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),A.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),A.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),A.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(r=>this.Xr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(o=>this.Xr.add(o.toString()))}).next(()=>i.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return A.forEach(this.Xr,i=>{let r=z.fromPath(i);return this.ei(e,r).next(o=>{o||t.removeEntry(r,Z.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return A.or([()=>A.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var Yf=class{constructor(e){this.serializer=e}O(e,t,i,r){let o=new Ul("createOrUpgrade",t);i<1&&r>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",w0,{unique:!0}),l.createObjectStore("documentMutations")}(e),ax(e),function(l){l.createObjectStore("remoteDocuments")}(e));let s=A.resolve();return i<3&&r>=3&&(i!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),ax(e)),s=s.next(()=>function(l){let u=l.store("targetGlobal"),m={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Z.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",m)}(o))),i<4&&r>=4&&(i!==0&&(s=s.next(()=>function(l,u){return u.store("mutations").U().next(m=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",w0,{unique:!0});let f=u.store("mutations"),g=m.map(w=>f.put(w));return A.waitFor(g)})}(e,o))),s=s.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&r>=5&&(s=s.next(()=>this.ni(o))),i<6&&r>=6&&(s=s.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),i<7&&r>=7&&(s=s.next(()=>this.ii(o))),i<8&&r>=8&&(s=s.next(()=>this.si(e,o))),i<9&&r>=9&&(s=s.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(s=s.next(()=>this.oi(o))),i<11&&r>=11&&(s=s.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(s=s.next(()=>{(function(l){let u=l.createObjectStore("documentOverlays",{keyPath:ZD});u.createIndex("collectionPathOverlayIndex",JD,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",eS,{unique:!1})})(e)})),i<13&&r>=13&&(s=s.next(()=>function(l){let u=l.createObjectStore("remoteDocumentsV14",{keyPath:UD});u.createIndex("documentKeyIndex",BD),u.createIndex("collectionGroupIndex",qD)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(s=s.next(()=>this.ai(e,o))),i<15&&r>=15&&(s=s.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:WD}).createIndex("sequenceNumberIndex",QD,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:YD}).createIndex("documentKeyIndex",XD,{unique:!1})}(e))),i<16&&r>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),i<17&&r>=17&&(s=s.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((i,r)=>{t+=id(r)}).next(()=>{let i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}ni(e){let t=e.store("mutationQueues"),i=e.store("mutations");return t.U().next(r=>A.forEach(r,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return i.U("userMutationsIndex",s).next(c=>A.forEach(c,l=>{W(l.userId===o.userId);let u=Xi(this.serializer,l);return Iw(e,o.userId,u).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{let o=[];return i.J((s,c)=>{let l=new me(s),u=function(f){return[0,St(f)]}(l);o.push(t.get(u).next(m=>m?A.resolve():(f=>t.put({targetId:0,path:St(f),sequenceNumber:r.highestListenSequenceNumber}))(l)))}).next(()=>A.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:KD});let i=t.store("collectionParents"),r=new ka,o=s=>{if(r.add(s)){let c=s.lastSegment(),l=s.popLast();return i.put({collectionId:c,parent:St(l)})}};return t.store("remoteDocuments").J({H:!0},(s,c)=>{let l=new me(s);return o(l.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,c,l],u)=>{let m=vn(c);return o(m.popLast())}))}oi(e){let t=e.store("targets");return t.J((i,r)=>{let o=ca(r),s=yw(this.serializer,o);return t.put(s)})}_i(e,t){let i=t.store("remoteDocuments"),r=[];return i.J((o,s)=>{let c=t.store("remoteDocumentsV14"),l=function(f){return f.document?new z(me.fromString(f.document.name).popFirst(5)):f.noDocument?z.fromSegments(f.noDocument.path):f.unknownDocument?z.fromSegments(f.unknownDocument.path):$()}(s).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};r.push(c.put(u))}).next(()=>A.waitFor(r))}ai(e,t){let i=t.store("mutations"),r=Aw(this.serializer),o=new ad(cd.Zr,this.serializer.ct);return i.U().next(s=>{let c=new Map;return s.forEach(l=>{var u;let m=(u=c.get(l.userId))!==null&&u!==void 0?u:oe();Xi(this.serializer,l).keys().forEach(f=>m=m.add(f)),c.set(l.userId,m)}),A.forEach(c,(l,u)=>{let m=new nt(u),f=ed.lt(this.serializer,m),g=o.getIndexManager(m),w=rd.lt(m,this.serializer,g,o.referenceDelegate);return new sd(r,w,f,g).recalculateAndSaveOverlaysForDocumentKeys(new ga(t,qt.oe),l).next()})})}};function ax(n){n.createObjectStore("targetDocuments",{keyPath:GD}).createIndex("documentTargetsIndex",HD,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",$D,{unique:!0}),n.createObjectStore("targetGlobal")}var Vm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Xf=class n{constructor(e,t,i,r,o,s,c,l,u,m,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.ui=o,this.window=s,this.document=c,this.ci=u,this.li=m,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=g=>Promise.resolve(),!n.D())throw new P(D.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Lf(this,r),this.Ai=t+"main",this.serializer=new Zl(l),this.Ri=new bi(this.Ai,this.hi,new Yf(this.serializer)),this.$r=new Tf,this.Ur=new Nf(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Aw(this.serializer),this.Gr=new Ef,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,m===!1&&Qe("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new P(D.FAILED_PRECONDITION,Vm);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new qt(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>k(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>k(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>k(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Sl(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(ki(e))return N("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return N("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return sa(e).get("owner").next(t=>A.resolve(this.vi(t)))}Ci(e){return Sl(e).delete(this.clientId)}Fi(){return k(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let i=lt(t,"clientMetadata");return i.U().next(r=>{let o=this.xi(r,18e5),s=r.filter(c=>o.indexOf(c)===-1);return A.forEach(s,c=>i.delete(c.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?A.resolve(!0):sa(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new P(D.FAILED_PRECONDITION,Vm);return!1}}return!(!this.networkEnabled||!this.inForeground)||Sl(e).U().next(i=>this.xi(i,5e3).find(r=>{if(this.clientId!==r.clientId){let o=!this.networkEnabled&&r.networkEnabled,s=!this.inForeground&&r.inForeground,c=this.networkEnabled===r.networkEnabled;if(o||s&&c)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&N("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return k(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new ga(e,qt.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(i=>this.Mi(i.updateTimeMs,t)&&!this.Ni(i.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Sl(e).U().next(t=>this.xi(t,18e5).map(i=>i.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return rd.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Pf(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return ed.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,i){N("IndexedDbPersistence","Starting transaction:",e);let r=t==="readonly"?"readonly":"readwrite",o=function(l){return l===17?iS:l===16?nS:l===15?$p:l===14?Px:l===13?Mx:l===12?tS:l===11?Rx:void $()}(this.hi),s;return this.Ri.runTransaction(e,r,o,c=>(s=new ga(c,this.Qr?this.Qr.next():qt.oe),t==="readwrite-primary"?this.wi(s).next(l=>!!l||this.Si(s)).next(l=>{if(!l)throw Qe(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new P(D.FAILED_PRECONDITION,kx);return i(s)}).next(l=>this.Di(s).next(()=>l)):this.Ki(s).next(()=>i(s)))).then(c=>(s.raiseOnCommittedEvent(),c))}Ki(e){return sa(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new P(D.FAILED_PRECONDITION,Vm)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return sa(e).put("owner",t)}static D(){return bi.D()}bi(e){let t=sa(e);return t.get("owner").next(i=>this.vi(i)?(N("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):A.resolve())}Mi(e,t){let i=Date.now();return!(e<i-t)&&(!(e>i)||(Qe(`Detected an update time that is in the future: ${e} > ${i}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;Wu()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let i=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return N("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Qe("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Qe("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function sa(n){return lt(n,"owner")}function Sl(n){return lt(n,"clientMetadata")}function Jp(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var Zf=class n{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=r}static Wi(e,t){let i=oe(),r=oe();for(let o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new n(e,t.fromCache,i,r)}};var Jf=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var ld=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Wu()?8:Cx(ws())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,r){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,r,i).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Jf;return this.Xi(e,t,s).next(c=>{if(o.result=c,this.zi)return this.es(e,t,s,c.size)})}).next(()=>o.result)}es(e,t,i,r){return i.documentReadCount<this.ji?(ro()<=fn.DEBUG&&N("QueryEngine","SDK will not create cache indexes for query:",oo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),A.resolve()):(ro()<=fn.DEBUG&&N("QueryEngine","Query:",oo(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(ro()<=fn.DEBUG&&N("QueryEngine","The SDK decides to create cache indexes for query:",oo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rt(t))):A.resolve())}Yi(e,t){if(N0(t))return A.resolve(null);let i=Rt(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=Wl(t,null,"F"),i=Rt(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{let s=oe(...o);return this.Ji.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,i).next(l=>{let u=this.ts(t,c);return this.ns(t,u,s,l.readTime)?this.Yi(e,Wl(t,null,"F")):this.rs(e,u,t,l)}))})))}Zi(e,t,i,r){return N0(t)||r.isEqual(Z.min())?A.resolve(null):this.Ji.getDocuments(e,i).next(o=>{let s=this.ts(t,o);return this.ns(t,s,i,r)?A.resolve(null):(ro()<=fn.DEBUG&&N("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),oo(t)),this.rs(e,s,t,Tx(r,-1)).next(c=>c))})}ts(e,t){let i=new Te(Kx(e));return t.forEach((r,o)=>{La(e,o)&&(i=i.add(o))}),i}ns(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Xi(e,t,i){return ro()<=fn.DEBUG&&N("QueryEngine","Using full collection scan to execute query:",oo(t)),this.Ji.getDocumentsMatchingQuery(e,t,Yt.min(),i)}rs(e,t,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var ep=class{constructor(e,t,i,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new Re(ne),this._s=new An(o=>or(o),Oa),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sd(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function kw(n,e,t,i){return new ep(n,e,t,i)}function Cw(n,e){return k(this,null,function*(){let t=j(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,t.ls(e),t.mutationQueue.getAllMutationBatches(i))).next(o=>{let s=[],c=[],l=oe();for(let u of r){s.push(u.batchId);for(let m of u.mutations)l=l.add(m.key)}for(let u of o){c.push(u.batchId);for(let m of u.mutations)l=l.add(m.key)}return t.localDocuments.getDocuments(i,l).next(u=>({hs:u,removedBatchIds:s,addedBatchIds:c}))})})})}function OS(n,e){let t=j(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(c,l,u,m){let f=u.batch,g=f.keys(),w=A.resolve();return g.forEach(R=>{w=w.next(()=>m.getEntry(l,R)).next(S=>{let M=u.docVersions.get(R);W(M!==null),S.version.compareTo(M)<0&&(f.applyToRemoteDocument(S,u),S.isValidDocument()&&(S.setReadTime(u.commitVersion),m.addEntry(S)))})}),w.next(()=>c.mutationQueue.removeMutationBatch(l,f))}(t,i,e,o).next(()=>o.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let l=oe();for(let u=0;u<c.mutationResults.length;++u)c.mutationResults[u].transformResults.length>0&&(l=l.add(c.batch.mutations[u].key));return l}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function Dw(n){let e=j(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function VS(n,e){let t=j(n),i=e.snapshotVersion,r=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});r=t.os;let c=[];e.targetChanges.forEach((m,f)=>{let g=r.get(f);if(!g)return;c.push(t.Ur.removeMatchingKeys(o,m.removedDocuments,f).next(()=>t.Ur.addMatchingKeys(o,m.addedDocuments,f)));let w=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?w=w.withResumeToken(Ze.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):m.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(m.resumeToken,i)),r=r.insert(f,w),function(S,M,q){return S.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(g,w,m)&&c.push(t.Ur.updateTargetData(o,w))});let l=Ot(),u=oe();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,m))}),c.push(Sw(o,s,e.documentUpdates).next(m=>{l=m.Ps,u=m.Is})),!i.isEqual(Z.min())){let m=t.Ur.getLastRemoteSnapshotVersion(o).next(f=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,i));c.push(m)}return A.waitFor(c).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,l,u)).next(()=>l)}).then(o=>(t.os=r,o))}function Sw(n,e,t){let i=oe(),r=oe();return t.forEach(o=>i=i.add(o)),e.getEntries(n,i).next(o=>{let s=Ot();return t.forEach((c,l)=>{let u=o.get(c);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(c)),l.isNoDocument()&&l.version.isEqual(Z.min())?(e.removeEntry(c,l.readTime),s=s.insert(c,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),s=s.insert(c,l)):N("LocalStore","Ignoring outdated watch update for ",c,". Current version:",u.version," Watch version:",l.version)}),{Ps:s,Is:r}})}function LS(n,e){let t=j(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Io(n,e){let t=j(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Ur.getTargetData(i,e).next(o=>o?(r=o,A.resolve(r)):t.Ur.allocateTargetId(i).next(s=>(r=new xo(e,s,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=t.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i})}function Eo(n,e,t){return k(this,null,function*(){let i=j(n),r=i.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",o,s=>i.persistence.referenceDelegate.removeTarget(s,r)))}catch(s){if(!ki(s))throw s;N("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}i.os=i.os.remove(e),i._s.delete(r.target)})}function dd(n,e,t){let i=j(n),r=Z.min(),o=oe();return i.persistence.runTransaction("Execute query","readwrite",s=>function(l,u,m){let f=j(l),g=f._s.get(m);return g!==void 0?A.resolve(f.os.get(g)):f.Ur.getTargetData(u,m)}(i,s,Rt(e)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(s,c.targetId).next(l=>{o=l})}).next(()=>i.ss.getDocumentsMatchingQuery(s,e,t?r:Z.min(),t?o:oe())).next(c=>(Pw(i,Hx(e),c),{documents:c,Ts:o})))}function Rw(n,e){let t=j(n),i=j(t.Ur),r=t.os.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",o=>i.ot(o,e).next(s=>s?s.target:null))}function Mw(n,e){let t=j(n),i=t.us.get(e)||Z.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.cs.getAllFromCollectionGroup(r,e,Tx(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(Pw(t,e,r),r))}function Pw(n,e,t){let i=n.us.get(e)||Z.min();t.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.us.set(e,i)}function jS(n,e,t,i){return k(this,null,function*(){let r=j(n),o=oe(),s=Ot();for(let u of t){let m=e.Es(u.metadata.name);u.document&&(o=o.add(m));let f=e.ds(u);f.setReadTime(e.As(u.metadata.readTime)),s=s.insert(m,f)}let c=r.cs.newChangeBuffer({trackRemovals:!0}),l=yield Io(r,function(m){return Rt(Mo(me.fromString(`__bundle__/docs/${m}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",u=>Sw(u,c,s).next(m=>(c.apply(u),m)).next(m=>r.Ur.removeMatchingKeysForTargetId(u,l.targetId).next(()=>r.Ur.addMatchingKeys(u,o,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(u,m.Ps,m.Is)).next(()=>m.Ps)))})}function zS(i,r){return k(this,arguments,function*(n,e,t=oe()){let o=yield Io(n,Rt(Xp(e.bundledQuery))),s=j(n);return s.persistence.runTransaction("Save named query","readwrite",c=>{let l=Xe(e.readTime);if(o.snapshotVersion.compareTo(l)>=0)return s.Gr.saveNamedQuery(c,e);let u=o.withResumeToken(Ze.EMPTY_BYTE_STRING,l);return s.os=s.os.insert(u.targetId,u),s.Ur.updateTargetData(c,u).next(()=>s.Ur.removeMatchingKeysForTargetId(c,o.targetId)).next(()=>s.Ur.addMatchingKeys(c,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(c,e))})})}function cx(n,e){return`firestore_clients_${n}_${e}`}function lx(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function Lm(n,e){return`firestore_targets_${n}_${e}`}var ud=class n{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static Rs(e,t,i){let r=JSON.parse(i),o,s=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(o=new P(r.error.code,r.error.message))),s?new n(e,t,r.state,o):(Qe("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},ha=class n{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Rs(e,t){let i=JSON.parse(t),r,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(r=new P(i.error.code,i.error.message))),o?new n(e,i.state,r):(Qe("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},hd=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let i=JSON.parse(t),r=typeof i=="object"&&i.activeTargetIds instanceof Array,o=Wp();for(let s=0;r&&s<i.activeTargetIds.length;++s)r=Dx(i.activeTargetIds[s]),o=o.add(i.activeTargetIds[s]);return r?new n(e,o):(Qe("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},tp=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(Qe("SharedClientState",`Failed to parse online state: ${e}`),null)}},Da=class{constructor(){this.activeTargetIds=Wp()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},ma=class{constructor(e,t,i,r,o){this.window=e,this.ui=t,this.persistenceKey=i,this.ps=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Re(ne),this.started=!1,this.bs=[];let s=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=cx(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Da),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return k(this,null,function*(){let e=yield this.syncEngine.Qi();for(let i of e){if(i===this.ps)continue;let r=this.getItem(cx(this.persistenceKey,i));if(r){let o=hd.Rs(i,r);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let i=this.Ls(t);i&&this.Bs(i)}for(let i of this.bs)this.ws(i);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,i){this.qs(e,t,i),this.Qs(e)}addLocalQueryTarget(e,t=!0){let i="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(Lm(this.persistenceKey,e));if(r){let o=ha.Rs(e,r);o&&(i=o.state)}}return t&&this.Ks.fs(e),this.Ns(),i}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Lm(this.persistenceKey,e))}updateQueryState(e,t,i){this.$s(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.Qs(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return N("SharedClientState","READ",e,t),t}setItem(e,t){N("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){N("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(N("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Qe("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>k(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let i=this.Gs(t.key);return this.zs(i,null)}{let i=this.js(t.key,t.newValue);if(i)return this.zs(i.clientId,i)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let i=this.Hs(t.key,t.newValue);if(i)return this.Js(i)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let i=this.Ys(t.key,t.newValue);if(i)return this.Zs(i)}}else if(t.key===this.xs){if(t.newValue!==null){let i=this.Ls(t.newValue);if(i)return this.Bs(i)}}else if(t.key===this.vs){let i=function(o){let s=qt.oe;if(o!=null)try{let c=JSON.parse(o);W(typeof c=="number"),s=c}catch(c){Qe("SharedClientState","Failed to read sequence number from WebStorage",c)}return s}(t.newValue);i!==qt.oe&&this.sequenceNumberHandler(i)}else if(t.key===this.Os){let i=this.Xs(t.newValue);yield Promise.all(i.map(r=>this.syncEngine.eo(r)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,i){let r=new ud(this.currentUser,e,t,i),o=lx(this.persistenceKey,this.currentUser,e);this.setItem(o,r.Vs())}Qs(e){let t=lx(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,i){let r=Lm(this.persistenceKey,e),o=new ha(e,t,i);this.setItem(r,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let i=this.Gs(e);return hd.Rs(i,t)}Hs(e,t){let i=this.Fs.exec(e),r=Number(i[1]),o=i[2]!==void 0?i[2]:null;return ud.Rs(new nt(o),r,t)}Ys(e,t){let i=this.Ms.exec(e),r=Number(i[1]);return ha.Rs(r,t)}Ls(e){return tp.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return k(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);N("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let i=t?this.Ss.insert(e,t):this.Ss.remove(e),r=this.ks(this.Ss),o=this.ks(i),s=[],c=[];return o.forEach(l=>{r.has(l)||s.push(l)}),r.forEach(l=>{o.has(l)||c.push(l)}),this.syncEngine.io(s,c).then(()=>{this.Ss=i})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=Wp();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}},md=class{constructor(){this.so=new Da,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Da,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var np=class{_o(e){}shutdown(){}};var fd=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){N("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){N("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Rl=null;function jm(){return Rl===null?Rl=function(){return 268435456+Math.round(2147483648*Math.random())}():Rl++,"0x"+Rl.toString(16)}var US={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var ip=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var It="WebChannelConnection",rp=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${r}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Fo(){return!1}Mo(t,i,r,o,s){let c=jm(),l=this.xo(t,i.toUriEncodedString());N("RestConnection",`Sending RPC '${t}' ${c}:`,l,r);let u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,o,s),this.No(t,l,u,r).then(m=>(N("RestConnection",`Received RPC '${t}' ${c}: `,m),m),m=>{throw rn("RestConnection",`RPC '${t}' ${c} failed with error: `,m,"url: ",l,"request:",r),m})}Lo(t,i,r,o,s,c){return this.Mo(t,i,r,o,s)}Oo(t,i,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ro}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,s)=>t[s]=o),r&&r.headers.forEach((o,s)=>t[s]=o)}xo(t,i){let r=US[t];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,r){let o=jm();return new Promise((s,c)=>{let l=new Rm;l.setWithCredentials(!0),l.listenOnce(Mm.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case na.NO_ERROR:let m=l.getResponseJson();N(It,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),s(m);break;case na.TIMEOUT:N(It,`RPC '${e}' ${o} timed out`),c(new P(D.DEADLINE_EXCEEDED,"Request time out"));break;case na.HTTP_ERROR:let f=l.getStatus();if(N(It,`RPC '${e}' ${o} failed with status:`,f,"response text:",l.getResponseText()),f>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);let w=g?.error;if(w&&w.status&&w.message){let R=function(M){let q=M.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(q)>=0?q:D.UNKNOWN}(w.status);c(new P(R,w.message))}else c(new P(D.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new P(D.UNAVAILABLE,"Connection failed."));break;default:$()}}finally{N(It,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(r);N(It,`RPC '${e}' ${o} sending request:`,r),l.send(t,"POST",u,i,15)})}Bo(e,t,i){let r=jm(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Fm(),c=Nm(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;let m=o.join("");N(It,`Creating RPC '${e}' stream ${r}: ${m}`,l);let f=s.createWebChannel(m,l),g=!1,w=!1,R=new ip({Io:M=>{w?N(It,`Not sending because RPC '${e}' stream ${r} is closed:`,M):(g||(N(It,`Opening RPC '${e}' stream ${r} transport.`),f.open(),g=!0),N(It,`RPC '${e}' stream ${r} sending:`,M),f.send(M))},To:()=>f.close()}),S=(M,q,Q)=>{M.listen(q,L=>{try{Q(L)}catch(ee){setTimeout(()=>{throw ee},0)}})};return S(f,Jr.EventType.OPEN,()=>{w||(N(It,`RPC '${e}' stream ${r} transport opened.`),R.yo())}),S(f,Jr.EventType.CLOSE,()=>{w||(w=!0,N(It,`RPC '${e}' stream ${r} transport closed`),R.So())}),S(f,Jr.EventType.ERROR,M=>{w||(w=!0,rn(It,`RPC '${e}' stream ${r} transport errored:`,M),R.So(new P(D.UNAVAILABLE,"The operation could not be completed")))}),S(f,Jr.EventType.MESSAGE,M=>{var q;if(!w){let Q=M.data[0];W(!!Q);let L=Q,ee=L.error||((q=L[0])===null||q===void 0?void 0:q.error);if(ee){N(It,`RPC '${e}' stream ${r} received error:`,ee);let ie=ee.status,re=function(v){let x=et[v];if(x!==void 0)return sw(x)}(ie),y=ee.message;re===void 0&&(re=D.INTERNAL,y="Unknown error status: "+ie+" with message "+ee.message),w=!0,R.So(new P(re,y)),f.close()}else N(It,`RPC '${e}' stream ${r} received:`,Q),R.bo(Q)}}),S(c,Pm.STAT_EVENT,M=>{M.stat===kl.PROXY?N(It,`RPC '${e}' stream ${r} detected buffering proxy`):M.stat===kl.NOPROXY&&N(It,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{R.wo()},0),R}};function Nw(){return typeof window<"u"?window:null}function Ol(){return typeof document<"u"?document:null}function ja(n){return new vf(n,!0)}var Sa=class{constructor(e,t,i=1e3,r=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=r,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-i);r>0&&N("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var pd=class{constructor(e,t,i,r,o,s,c,l){this.ui=e,this.Ho=i,this.Jo=r,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Sa(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return k(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return k(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return k(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===D.RESOURCE_EXHAUSTED?(Qe(t.toString()),Qe("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===D.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===t&&this.P_(i,r)},i=>{e(()=>{let r=new P(D.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,t){let i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(()=>k(this,null,function*(){this.state=0,this.start()}))}I_(e){return N("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(N("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},op=class extends pd{constructor(e,t,i,r,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=TS(this.serializer,e),i=function(o){if(!("targetChange"in o))return Z.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Z.min():s.readTime?Xe(s.readTime):Z.min()}(e);return this.listener.d_(t,i)}A_(e){let t={};t.database=wf(this.serializer),t.addTarget=function(o,s){let c,l=s.target;if(c=Hl(l)?{documents:fw(o,l)}:{query:pw(o,l)._t},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=cw(o,s.resumeToken);let u=yf(o,s.expectedCount);u!==null&&(c.expectedCount=u)}else if(s.snapshotVersion.compareTo(Z.min())>0){c.readTime=yo(o,s.snapshotVersion.toTimestamp());let u=yf(o,s.expectedCount);u!==null&&(c.expectedCount=u)}return c}(this.serializer,e);let i=kS(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){let t={};t.database=wf(this.serializer),t.removeTarget=e,this.a_(t)}},sp=class extends pd{constructor(e,t,i,r,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return W(!!e.streamToken),this.lastStreamToken=e.streamToken,W(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){W(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=AS(e.writeResults,e.commitTime),i=Xe(e.commitTime);return this.listener.g_(i,t)}p_(){let e={};e.database=wf(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(i=>Aa(this.serializer,i))};this.a_(t)}};var ap=class extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new P(D.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,xf(t,i),r,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new P(D.UNKNOWN,o.toString())})}Lo(e,t,i,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.Lo(e,xf(t,i),r,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new P(D.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},cp=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Qe(t),this.D_=!1):N("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var lp=class{constructor(e,t,i,r,o){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{i.enqueueAndForget(()=>k(this,null,function*(){Ci(this)&&(N("RemoteStore","Restarting streams for network reachability change."),yield function(l){return k(this,null,function*(){let u=j(l);u.L_.add(4),yield Po(u),u.q_.set("Unknown"),u.L_.delete(4),yield za(u)})}(this))}))}),this.q_=new cp(i,r)}};function za(n){return k(this,null,function*(){if(Ci(n))for(let e of n.B_)yield e(!0)})}function Po(n){return k(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Od(n,e){let t=j(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),ng(t)?tg(t):Fo(t).r_()&&eg(t,e))}function To(n,e){let t=j(n),i=Fo(t);t.N_.delete(e),i.r_()&&Fw(t,e),t.N_.size===0&&(i.r_()?i.o_():Ci(t)&&t.q_.set("Unknown"))}function eg(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Fo(n).A_(e)}function Fw(n,e){n.Q_.xe(e),Fo(n).R_(e)}function tg(n){n.Q_=new _f({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Fo(n).start(),n.q_.v_()}function ng(n){return Ci(n)&&!Fo(n).n_()&&n.N_.size>0}function Ci(n){return j(n).L_.size===0}function Ow(n){n.Q_=void 0}function BS(n){return k(this,null,function*(){n.q_.set("Online")})}function qS(n){return k(this,null,function*(){n.N_.forEach((e,t)=>{eg(n,e)})})}function $S(n,e){return k(this,null,function*(){Ow(n),ng(n)?(n.q_.M_(e),tg(n)):n.q_.set("Unknown")})}function GS(n,e,t){return k(this,null,function*(){if(n.q_.set("Online"),e instanceof Yl&&e.state===2&&e.cause)try{yield function(r,o){return k(this,null,function*(){let s=o.cause;for(let c of o.targetIds)r.N_.has(c)&&(yield r.remoteSyncer.rejectListen(c,s),r.N_.delete(c),r.Q_.removeTarget(c))})}(n,e)}catch(i){N("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield gd(n,i)}else if(e instanceof mo?n.Q_.Ke(e):e instanceof Ql?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Z.min()))try{let i=yield Dw(n.localStore);t.compareTo(i)>=0&&(yield function(o,s){let c=o.Q_.rt(s);return c.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){let m=o.N_.get(u);m&&o.N_.set(u,m.withResumeToken(l.resumeToken,s))}}),c.targetMismatches.forEach((l,u)=>{let m=o.N_.get(l);if(!m)return;o.N_.set(l,m.withResumeToken(Ze.EMPTY_BYTE_STRING,m.snapshotVersion)),Fw(o,l);let f=new xo(m.target,l,u,m.sequenceNumber);eg(o,f)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(i){N("RemoteStore","Failed to raise snapshot:",i),yield gd(n,i)}})}function gd(n,e,t){return k(this,null,function*(){if(!ki(e))throw e;n.L_.add(1),yield Po(n),n.q_.set("Offline"),t||(t=()=>Dw(n.localStore)),n.asyncQueue.enqueueRetryable(()=>k(this,null,function*(){N("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield za(n)}))})}function Vw(n,e){return e().catch(t=>gd(n,t,e))}function No(n){return k(this,null,function*(){let e=j(n),t=Ti(e),i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;HS(e);)try{let r=yield LS(e.localStore,i);if(r===null){e.O_.length===0&&t.o_();break}i=r.batchId,KS(e,r)}catch(r){yield gd(e,r)}Lw(e)&&jw(e)})}function HS(n){return Ci(n)&&n.O_.length<10}function KS(n,e){n.O_.push(e);let t=Ti(n);t.r_()&&t.V_&&t.m_(e.mutations)}function Lw(n){return Ci(n)&&!Ti(n).n_()&&n.O_.length>0}function jw(n){Ti(n).start()}function WS(n){return k(this,null,function*(){Ti(n).p_()})}function QS(n){return k(this,null,function*(){let e=Ti(n);for(let t of n.O_)e.m_(t.mutations)})}function YS(n,e,t){return k(this,null,function*(){let i=n.O_.shift(),r=pf.from(i,e,t);yield Vw(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield No(n)})}function XS(n,e){return k(this,null,function*(){e&&Ti(n).V_&&(yield function(i,r){return k(this,null,function*(){if(function(s){return ow(s)&&s!==D.ABORTED}(r.code)){let o=i.O_.shift();Ti(i).s_(),yield Vw(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield No(i)}})}(n,e)),Lw(n)&&jw(n)})}function dx(n,e){return k(this,null,function*(){let t=j(n);t.asyncQueue.verifyOperationInProgress(),N("RemoteStore","RemoteStore received new credentials");let i=Ci(t);t.L_.add(3),yield Po(t),i&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield za(t)})}function dp(n,e){return k(this,null,function*(){let t=j(n);e?(t.L_.delete(2),yield za(t)):e||(t.L_.add(2),yield Po(t),t.q_.set("Unknown"))})}function Fo(n){return n.K_||(n.K_=function(t,i,r){let o=j(t);return o.w_(),new op(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{Eo:BS.bind(null,n),Ro:qS.bind(null,n),mo:$S.bind(null,n),d_:GS.bind(null,n)}),n.B_.push(e=>k(this,null,function*(){e?(n.K_.s_(),ng(n)?tg(n):n.q_.set("Unknown")):(yield n.K_.stop(),Ow(n))}))),n.K_}function Ti(n){return n.U_||(n.U_=function(t,i,r){let o=j(t);return o.w_(),new sp(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:WS.bind(null,n),mo:XS.bind(null,n),f_:QS.bind(null,n),g_:YS.bind(null,n)}),n.B_.push(e=>k(this,null,function*(){e?(n.U_.s_(),yield No(n)):(yield n.U_.stop(),n.O_.length>0&&(N("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var up=class n{constructor(e,t,i,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new ct,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,o){let s=Date.now()+i,c=new n(e,t,s,r,o);return c.start(i),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new P(D.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Oo(n,e){if(Qe("AsyncQueue",`${e}: ${n}`),ki(n))return new P(D.UNAVAILABLE,`${e}: ${n}`);throw n}var bd=class n{constructor(e){this.comparator=e?(t,i)=>e(t,i)||z.comparator(t.key,i.key):(t,i)=>z.comparator(t.key,i.key),this.keyedMap=aa(),this.sortedSet=new Re(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var _d=class{constructor(){this.W_=new Re(z.comparator)}track(e){let t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):$():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,i)=>{e.push(i)}),e}},Ao=class n{constructor(e,t,i,r,o,s,c,l,u){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,i,r,o){let s=[];return t.forEach(c=>{s.push({type:0,doc:c})}),new n(e,t,bd.emptySet(t),s,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Va(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}};var hp=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},mp=class{constructor(){this.queries=ux(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){let r=j(t),o=r.queries;r.queries=ux(),o.forEach((s,c)=>{for(let l of c.j_)l.onError(i)})})(this,new P(D.ABORTED,"Firestore shutting down"))}};function ux(){return new An(n=>Gx(n),Va)}function ig(n,e){return k(this,null,function*(){let t=j(n),i=3,r=e.query,o=t.queries.get(r);o?!o.H_()&&e.J_()&&(i=2):(o=new hp,i=e.J_()?0:1);try{switch(i){case 0:o.z_=yield t.onListen(r,!0);break;case 1:o.z_=yield t.onListen(r,!1);break;case 2:yield t.onFirstRemoteStoreListen(r)}}catch(s){let c=Oo(s,`Initialization of query '${oo(e.query)}' failed`);return void e.onError(c)}t.queries.set(r,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&og(t)})}function rg(n,e){return k(this,null,function*(){let t=j(n),i=e.query,r=3,o=t.queries.get(i);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?r=e.J_()?0:1:!o.H_()&&e.J_()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}})}function ZS(n,e){let t=j(n),i=!1;for(let r of e){let o=r.query,s=t.queries.get(o);if(s){for(let c of s.j_)c.X_(r)&&(i=!0);s.z_=r}}i&&og(t)}function JS(n,e,t){let i=j(n),r=i.queries.get(e);if(r)for(let o of r.j_)o.onError(t);i.queries.delete(e)}function og(n){n.Y_.forEach(e=>{e.next()})}var fp,hx;(hx=fp||(fp={})).ea="default",hx.Cache="cache";var Ra=class{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new Ao(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Ao.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==fp.Cache}};var pp=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var vd=class{constructor(e){this.serializer=e}Es(e){return wn(this.serializer,e)}ds(e){return e.metadata.exists?mw(this.serializer,e.document,!1):it.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Xe(e)}},gp=class{constructor(e,t,i){this.ca=e,this.localStore=t,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=zw(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let i=me.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,i=new vd(this.serializer);for(let r of e)if(r.metadata.queries){let o=i.Es(r.metadata.name);for(let s of r.metadata.queries){let c=(t.get(s)||oe()).add(o);t.set(s,c)}}return t}complete(){return k(this,null,function*(){let e=yield jS(this.localStore,new vd(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let i of this.queries)yield zS(this.localStore,i,t.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function zw(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var yd=class{constructor(e){this.key=e}},xd=class{constructor(e){this.key=e}},wd=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=oe(),this.mutatedKeys=oe(),this.Aa=Kx(e),this.Ra=new bd(this.Aa)}get Va(){return this.Ta}ma(e,t){let i=t?t.fa:new _d,r=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=r,c=!1,l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,f)=>{let g=r.get(m),w=La(this.query,f)?f:null,R=!!g&&this.mutatedKeys.has(g.key),S=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations),M=!1;g&&w?g.data.isEqual(w.data)?R!==S&&(i.track({type:3,doc:w}),M=!0):this.ga(g,w)||(i.track({type:2,doc:w}),M=!0,(l&&this.Aa(w,l)>0||u&&this.Aa(w,u)<0)&&(c=!0)):!g&&w?(i.track({type:0,doc:w}),M=!0):g&&!w&&(i.track({type:1,doc:g}),M=!0,(l||u)&&(c=!0)),M&&(w?(s=s.add(w),o=S?o.add(m):o.delete(m)):(s=s.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let m=this.query.limitType==="F"?s.last():s.first();s=s.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{Ra:s,fa:i,ns:c,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((m,f)=>function(w,R){let S=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $()}};return S(w)-S(R)}(m.type,f.type)||this.Aa(m.doc,f.doc)),this.pa(i),r=r!=null&&r;let c=t&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,u=l!==this.Ea;return this.Ea=l,s.length!==0||u?{snapshot:new Ao(this.query,e.Ra,o,s,e.mutatedKeys,l===0,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new _d,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=oe(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});let t=[];return e.forEach(i=>{this.da.has(i)||t.push(new xd(i))}),this.da.forEach(i=>{e.has(i)||t.push(new yd(i))}),t}ba(e){this.Ta=e.Ts,this.da=oe();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Ao.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},bp=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},_p=class{constructor(e){this.key=e,this.va=!1}},vp=class{constructor(e,t,i,r,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new An(c=>Gx(c),Va),this.Ma=new Map,this.xa=new Set,this.Oa=new Re(z.comparator),this.Na=new Map,this.La=new Ca,this.Ba={},this.ka=new Map,this.qa=wo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function eR(n,e,t=!0){return k(this,null,function*(){let i=Vd(n),r,o=i.Fa.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.Da()):r=yield Uw(i,e,t,!0),r})}function tR(n,e){return k(this,null,function*(){let t=Vd(n);yield Uw(t,e,!0,!1)})}function Uw(n,e,t,i){return k(this,null,function*(){let r=yield Io(n.localStore,Rt(e)),o=r.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),c;return i&&(c=yield sg(n,e,o,s==="current",r.resumeToken)),n.isPrimaryClient&&t&&Od(n.remoteStore,r),c})}function sg(n,e,t,i,r){return k(this,null,function*(){n.Ka=(f,g,w)=>function(S,M,q,Q){return k(this,null,function*(){let L=M.view.ma(q);L.ns&&(L=yield dd(S.localStore,M.query,!1).then(({documents:y})=>M.view.ma(y,L)));let ee=Q&&Q.targetChanges.get(M.targetId),ie=Q&&Q.targetMismatches.get(M.targetId)!=null,re=M.view.applyChanges(L,S.isPrimaryClient,ee,ie);return yp(S,M.targetId,re.wa),re.snapshot})}(n,f,g,w);let o=yield dd(n.localStore,e,!0),s=new wd(e,o.Ts),c=s.ma(o.documents),l=Ea.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),u=s.applyChanges(c,n.isPrimaryClient,l);yp(n,t,u.wa);let m=new bp(e,t,s);return n.Fa.set(e,m),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),u.snapshot})}function nR(n,e,t){return k(this,null,function*(){let i=j(n),r=i.Fa.get(e),o=i.Ma.get(r.targetId);if(o.length>1)return i.Ma.set(r.targetId,o.filter(s=>!Va(s,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Eo(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&To(i.remoteStore,r.targetId),ko(i,r.targetId)}).catch(Ai))):(ko(i,r.targetId),yield Eo(i.localStore,r.targetId,!0))})}function iR(n,e){return k(this,null,function*(){let t=j(n),i=t.Fa.get(e),r=t.Ma.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),To(t.remoteStore,i.targetId))})}function rR(n,e,t){return k(this,null,function*(){let i=dg(n);try{let r=yield function(s,c){let l=j(s),u=Ue.now(),m=c.reduce((w,R)=>w.add(R.key),oe()),f,g;return l.persistence.runTransaction("Locally write mutations","readwrite",w=>{let R=Ot(),S=oe();return l.cs.getEntries(w,m).next(M=>{R=M,R.forEach((q,Q)=>{Q.isValidDocument()||(S=S.add(q))})}).next(()=>l.localDocuments.getOverlayedDocuments(w,R)).next(M=>{f=M;let q=[];for(let Q of c){let L=_S(Q,f.get(Q.key).overlayedDocument);L!=null&&q.push(new sn(Q.key,L,Lx(L.value.mapValue),Ge.exists(!0)))}return l.mutationQueue.addMutationBatch(w,u,q,c)}).next(M=>{g=M;let q=M.applyToLocalDocumentSet(f,S);return l.documentOverlayCache.saveOverlays(w,M.batchId,q)})}).then(()=>({batchId:g.batchId,changes:Qx(f)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,c,l){let u=s.Ba[s.currentUser.toKey()];u||(u=new Re(ne)),u=u.insert(c,l),s.Ba[s.currentUser.toKey()]=u}(i,r.batchId,t),yield Hn(i,r.changes),yield No(i.remoteStore)}catch(r){let o=Oo(r,"Failed to persist write");t.reject(o)}})}function Bw(n,e){return k(this,null,function*(){let t=j(n);try{let i=yield VS(t.localStore,e);e.targetChanges.forEach((r,o)=>{let s=t.Na.get(o);s&&(W(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?s.va=!0:r.modifiedDocuments.size>0?W(s.va):r.removedDocuments.size>0&&(W(s.va),s.va=!1))}),yield Hn(t,i,e)}catch(i){yield Ai(i)}})}function mx(n,e,t){let i=j(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let r=[];i.Fa.forEach((o,s)=>{let c=s.view.Z_(e);c.snapshot&&r.push(c.snapshot)}),function(s,c){let l=j(s);l.onlineState=c;let u=!1;l.queries.forEach((m,f)=>{for(let g of f.j_)g.Z_(c)&&(u=!0)}),u&&og(l)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function oR(n,e,t){return k(this,null,function*(){let i=j(n);i.sharedClientState.updateQueryState(e,"rejected",t);let r=i.Na.get(e),o=r&&r.key;if(o){let s=new Re(z.comparator);s=s.insert(o,it.newNoDocument(o,Z.min()));let c=oe().add(o),l=new Ia(Z.min(),new Map,new Re(ne),s,c);yield Bw(i,l),i.Oa=i.Oa.remove(o),i.Na.delete(e),lg(i)}else yield Eo(i.localStore,e,!1).then(()=>ko(i,e,t)).catch(Ai)})}function sR(n,e){return k(this,null,function*(){let t=j(n),i=e.batch.batchId;try{let r=yield OS(t.localStore,e);cg(t,i,null),ag(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield Hn(t,r)}catch(r){yield Ai(r)}})}function aR(n,e,t){return k(this,null,function*(){let i=j(n);try{let r=yield function(s,c){let l=j(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let m;return l.mutationQueue.lookupMutationBatch(u,c).next(f=>(W(f!==null),m=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,m,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,m)).next(()=>l.localDocuments.getDocuments(u,m))})}(i.localStore,e);cg(i,e,t),ag(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield Hn(i,r)}catch(r){yield Ai(r)}})}function cR(n,e){return k(this,null,function*(){let t=j(n);Ci(t.remoteStore)||N("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let i=yield function(s){let c=j(s);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>c.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(i===-1)return void e.resolve();let r=t.ka.get(i)||[];r.push(e),t.ka.set(i,r)}catch(i){let r=Oo(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}})}function ag(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function cg(n,e,t){let i=j(n),r=i.Ba[i.currentUser.toKey()];if(r){let o=r.get(e);o&&(t?o.reject(t):o.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function ko(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.Ma.get(e))n.Fa.delete(i),t&&n.Ca.$a(i,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(i=>{n.La.containsKey(i)||qw(n,i)})}function qw(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(To(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),lg(n))}function yp(n,e,t){for(let i of t)i instanceof yd?(n.La.addReference(i.key,e),lR(n,i)):i instanceof xd?(N("SyncEngine","Document no longer in limbo: "+i.key),n.La.removeReference(i.key,e),n.La.containsKey(i.key)||qw(n,i.key)):$()}function lR(n,e){let t=e.key,i=t.path.canonicalString();n.Oa.get(t)||n.xa.has(i)||(N("SyncEngine","New document in limbo: "+t),n.xa.add(i),lg(n))}function lg(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new z(me.fromString(e)),i=n.qa.next();n.Na.set(i,new _p(t)),n.Oa=n.Oa.insert(t,i),Od(n.remoteStore,new xo(Rt(Mo(t.path)),i,"TargetPurposeLimboResolution",qt.oe))}}function Hn(n,e,t){return k(this,null,function*(){let i=j(n),r=[],o=[],s=[];i.Fa.isEmpty()||(i.Fa.forEach((c,l)=>{s.push(i.Ka(l,e,t).then(u=>{var m;if((u||t)&&i.isPrimaryClient){let f=u?!u.fromCache:(m=t?.targetChanges.get(l.targetId))===null||m===void 0?void 0:m.current;i.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){r.push(u);let f=Zf.Wi(l.targetId,u);o.push(f)}}))}),yield Promise.all(s),i.Ca.d_(r),yield function(l,u){return k(this,null,function*(){let m=j(l);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>A.forEach(u,g=>A.forEach(g.$i,w=>m.persistence.referenceDelegate.addReference(f,g.targetId,w)).next(()=>A.forEach(g.Ui,w=>m.persistence.referenceDelegate.removeReference(f,g.targetId,w)))))}catch(f){if(!ki(f))throw f;N("LocalStore","Failed to update sequence numbers: "+f)}for(let f of u){let g=f.targetId;if(!f.fromCache){let w=m.os.get(g),R=w.snapshotVersion,S=w.withLastLimboFreeSnapshotVersion(R);m.os=m.os.insert(g,S)}}})}(i.localStore,o))})}function dR(n,e){return k(this,null,function*(){let t=j(n);if(!t.currentUser.isEqual(e)){N("SyncEngine","User change. New user:",e.toKey());let i=yield Cw(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(c=>{c.forEach(l=>{l.reject(new P(D.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Hn(t,i.hs)}})}function uR(n,e){let t=j(n),i=t.Na.get(e);if(i&&i.va)return oe().add(i.key);{let r=oe(),o=t.Ma.get(e);if(!o)return r;for(let s of o){let c=t.Fa.get(s);r=r.unionWith(c.view.Va)}return r}}function hR(n,e){return k(this,null,function*(){let t=j(n),i=yield dd(t.localStore,e.query,!0),r=e.view.ba(i);return t.isPrimaryClient&&yp(t,e.targetId,r.wa),r})}function mR(n,e){return k(this,null,function*(){let t=j(n);return Mw(t.localStore,e).then(i=>Hn(t,i))})}function fR(n,e,t,i){return k(this,null,function*(){let r=j(n),o=yield function(c,l){let u=j(c),m=j(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",f=>m.Mn(f,l).next(g=>g?u.localDocuments.getDocuments(f,g):A.resolve(null)))}(r.localStore,e);o!==null?(t==="pending"?yield No(r.remoteStore):t==="acknowledged"||t==="rejected"?(cg(r,e,i||null),ag(r,e),function(c,l){j(j(c).mutationQueue).On(l)}(r.localStore,e)):$(),yield Hn(r,o)):N("SyncEngine","Cannot apply mutation batch with id: "+e)})}function pR(n,e){return k(this,null,function*(){let t=j(n);if(Vd(t),dg(t),e===!0&&t.Qa!==!0){let i=t.sharedClientState.getAllActiveQueryTargets(),r=yield fx(t,i.toArray());t.Qa=!0,yield dp(t.remoteStore,!0);for(let o of r)Od(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let i=[],r=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?i.push(s):r=r.then(()=>(ko(t,s),Eo(t.localStore,s,!0))),To(t.remoteStore,s)}),yield r,yield fx(t,i),function(s){let c=j(s);c.Na.forEach((l,u)=>{To(c.remoteStore,u)}),c.La.pr(),c.Na=new Map,c.Oa=new Re(z.comparator)}(t),t.Qa=!1,yield dp(t.remoteStore,!1)}})}function fx(n,e,t){return k(this,null,function*(){let i=j(n),r=[],o=[];for(let s of e){let c,l=i.Ma.get(s);if(l&&l.length!==0){c=yield Io(i.localStore,Rt(l[0]));for(let u of l){let m=i.Fa.get(u),f=yield hR(i,m);f.snapshot&&o.push(f.snapshot)}}else{let u=yield Rw(i.localStore,s);c=yield Io(i.localStore,u),yield sg(i,$w(u),s,!1,c.resumeToken)}r.push(c)}return i.Ca.d_(o),r})}function $w(n){return $x(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function gR(n){return function(t){return j(j(t).persistence).Qi()}(j(n).localStore)}function bR(n,e,t,i){return k(this,null,function*(){let r=j(n);if(r.Qa)return void N("SyncEngine","Ignoring unexpected query state notification.");let o=r.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield Mw(r.localStore,Hx(o[0])),c=Ia.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Ze.EMPTY_BYTE_STRING);yield Hn(r,s,c);break}case"rejected":yield Eo(r.localStore,e,!0),ko(r,e,i);break;default:$()}})}function _R(n,e,t){return k(this,null,function*(){let i=Vd(n);if(i.Qa){for(let r of e){if(i.Ma.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){N("SyncEngine","Adding an already active target "+r);continue}let o=yield Rw(i.localStore,r),s=yield Io(i.localStore,o);yield sg(i,$w(o),s.targetId,!1,s.resumeToken),Od(i.remoteStore,s)}for(let r of t)i.Ma.has(r)&&(yield Eo(i.localStore,r,!1).then(()=>{To(i.remoteStore,r),ko(i,r)}).catch(Ai))}})}function Vd(n){let e=j(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Bw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oR.bind(null,e),e.Ca.d_=ZS.bind(null,e.eventManager),e.Ca.$a=JS.bind(null,e.eventManager),e}function dg(n){let e=j(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aR.bind(null,e),e}function vR(n,e,t){let i=j(n);(function(o,s,c){return k(this,null,function*(){try{let l=yield s.getMetadata();if(yield function(w,R){let S=j(w),M=Xe(R.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",q=>S.Gr.getBundleMetadata(q,R.id)).then(q=>!!q&&q.createTime.compareTo(M)>=0)}(o.localStore,l))return yield s.close(),c._completeWith(function(w){return{taskState:"Success",documentsLoaded:w.totalDocuments,bytesLoaded:w.totalBytes,totalDocuments:w.totalDocuments,totalBytes:w.totalBytes}}(l)),Promise.resolve(new Set);c._updateProgress(zw(l));let u=new gp(l,o.localStore,s.serializer),m=yield s.Ua();for(;m;){let g=yield u.la(m);g&&c._updateProgress(g),m=yield s.Ua()}let f=yield u.complete();return yield Hn(o,f.Ia,void 0),yield function(w,R){let S=j(w);return S.persistence.runTransaction("Save bundle","readwrite",M=>S.Gr.saveBundleMetadata(M,R))}(o.localStore,l),c._completeWith(f.progress),Promise.resolve(f.Pa)}catch(l){return rn("SyncEngine",`Loading bundle failed with ${l}`),c._failWith(l),Promise.resolve(new Set)}})})(i,e,t).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}var xp=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return k(this,null,function*(){this.serializer=ja(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,i){return null}Ha(t,i){return null}za(t){return kw(this.persistence,new ld,t.initialUser,this.serializer)}Ga(t){return new ad(cd.Zr,this.serializer)}Wa(t){return new md}terminate(){return k(this,null,function*(){var t,i;(t=this.gcScheduler)===null||t===void 0||t.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var Id=class n extends xp{constructor(e,t,i){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return k(this,null,function*(){yield ku(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield dg(this.Ja.syncEngine),yield No(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return kw(this.persistence,new ld,e.initialUser,this.serializer)}ja(e,t){let i=this.persistence.referenceDelegate.garbageCollector;return new Of(i,e.asyncQueue,t)}Ha(e,t){let i=new Zm(t,this.persistence);return new Xm(e.asyncQueue,i)}Ga(e){let t=Jp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Qt.withCacheSize(this.cacheSizeBytes):Qt.DEFAULT;return new Xf(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,Nw(),Ol(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new md}},wp=class n extends Id{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return k(this,null,function*(){yield ku(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof ma&&(this.sharedClientState.syncEngine={no:fR.bind(null,t),ro:bR.bind(null,t),io:_R.bind(null,t),Qi:gR.bind(null,t),eo:mR.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(i=>k(this,null,function*(){yield pR(this.Ja.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=Nw();if(!ma.D(t))throw new P(D.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let i=Jp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ma(t,e.asyncQueue,i,e.clientId,e.initialUser)}},ug=(()=>{class n{initialize(t,i){return k(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>mx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=dR.bind(null,this.syncEngine),yield dp(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new mp}()}createDatastore(t){let i=ja(t.databaseInfo.databaseId),r=function(s){return new rp(s)}(t.databaseInfo);return function(s,c,l,u){return new ap(s,c,l,u)}(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return function(r,o,s,c,l){return new lp(r,o,s,c,l)}(this.localStore,this.datastore,t.asyncQueue,i=>mx(this.syncEngine,i,0),function(){return fd.D()?new fd:new np}())}createSyncEngine(t,i){return function(o,s,c,l,u,m,f){let g=new vp(o,s,c,l,u,m);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}terminate(){return k(this,null,function*(){var t,i;yield function(o){return k(this,null,function*(){let s=j(o);N("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield Po(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()})}}return n.provider={build:()=>new n},n})();function px(n,e=10240){let t=0;return{read(){return k(this,null,function*(){if(t<n.byteLength){let r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})},cancel(){return k(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Co=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Qe("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Ip=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new ct,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(i=>{i&&i.ua()?this.metadata.resolve(i.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i?.aa)}`))},i=>this.metadata.reject(i))}close(){return this.Xa.cancel()}getMetadata(){return k(this,null,function*(){return this.metadata.promise})}Ua(){return k(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return k(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),i=Number(t);isNaN(i)&&this.ru(`length string (${t}) is not valid number`);let r=yield this.iu(i);return new pp(JSON.parse(r),e.length+i)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return k(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return k(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return k(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var Ep=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return k(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new P(D.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(r,o){return k(this,null,function*(){let s=j(r),c={documents:o.map(f=>Ta(s.serializer,f))},l=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,me.emptyPath(),c,o.length),u=new Map;l.forEach(f=>{let g=ES(s.serializer,f);u.set(g.key.toString(),g)});let m=[];return o.forEach(f=>{let g=u.get(f.toString());W(!!g),m.push(g)}),m})}(this.datastore,e);return t.forEach(i=>this.recordVersion(i)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ei(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return k(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,i)=>{let r=z.fromPath(i);this.mutations.push(new ya(r,this.precondition(r)))}),yield function(i,r){return k(this,null,function*(){let o=j(i),s={writes:r.map(c=>Aa(o.serializer,c))};yield o.Mo("Commit",o.serializer.databaseId,me.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw $();t=Z.min()}let i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new P(D.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Z.min())?Ge.exists(!1):Ge.updateTime(t):Ge.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Z.min()))throw new P(D.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ge.updateTime(t)}return Ge.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Tp=class{constructor(e,t,i,r,o){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=o,this._u=i.maxAttempts,this.t_=new Sa(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>k(this,null,function*(){let e=new Ep(this.datastore),t=this.cu(e);t&&t.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.lu(r)}))}).catch(i=>{this.lu(i)})}))}cu(e){try{let t=this.updateFunction(e);return!Fa(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!ow(t)}return!1}};var Ap=class{constructor(e,t,i,r,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=nt.UNAUTHENTICATED,this.clientId=Ll.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,s=>k(this,null,function*(){N("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,s=>(N("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ct;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>k(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=Oo(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function zm(n,e){return k(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),N("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(r=>k(this,null,function*(){i.isEqual(r)||(yield Cw(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function gx(n,e){return k(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield hg(n);N("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>dx(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>dx(e.remoteStore,r)),n._onlineComponents=e})}function hg(n){return k(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){N("FirestoreClient","Using user provided OfflineComponentProvider");try{yield zm(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(r){return r.name==="FirebaseError"?r.code===D.FAILED_PRECONDITION||r.code===D.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(t))throw t;rn("Error using user provided cache. Falling back to memory cache: "+t),yield zm(n,new xp)}}else N("FirestoreClient","Using default OfflineComponentProvider"),yield zm(n,new xp);return n._offlineComponents})}function Ld(n){return k(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(N("FirestoreClient","Using user provided OnlineComponentProvider"),yield gx(n,n._uninitializedComponentsProvider._online)):(N("FirestoreClient","Using default OnlineComponentProvider"),yield gx(n,new ug))),n._onlineComponents})}function Gw(n){return hg(n).then(e=>e.persistence)}function mg(n){return hg(n).then(e=>e.localStore)}function Hw(n){return Ld(n).then(e=>e.remoteStore)}function fg(n){return Ld(n).then(e=>e.syncEngine)}function yR(n){return Ld(n).then(e=>e.datastore)}function Do(n){return k(this,null,function*(){let e=yield Ld(n),t=e.eventManager;return t.onListen=eR.bind(null,e.syncEngine),t.onUnlisten=nR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=tR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=iR.bind(null,e.syncEngine),t})}function xR(n){return n.asyncQueue.enqueue(()=>k(this,null,function*(){let e=yield Gw(n),t=yield Hw(n);return e.setNetworkEnabled(!0),function(r){let o=j(r);return o.L_.delete(0),za(o)}(t)}))}function wR(n){return n.asyncQueue.enqueue(()=>k(this,null,function*(){let e=yield Gw(n),t=yield Hw(n);return e.setNetworkEnabled(!1),function(r){return k(this,null,function*(){let o=j(r);o.L_.add(0),yield Po(o),o.q_.set("Offline")})}(t)}))}function IR(n,e){let t=new ct;return n.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return function(r,o,s){return k(this,null,function*(){try{let c=yield function(u,m){let f=j(u);return f.persistence.runTransaction("read document","readonly",g=>f.localDocuments.getDocument(g,m))}(r,o);c.isFoundDocument()?s.resolve(c):c.isNoDocument()?s.resolve(null):s.reject(new P(D.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){let l=Oo(c,`Failed to get document '${o} from cache`);s.reject(l)}})}(yield mg(n),e,t)})),t.promise}function Kw(n,e,t={}){let i=new ct;return n.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return function(o,s,c,l,u){let m=new Co({next:g=>{m.Za(),s.enqueueAndForget(()=>rg(o,f));let w=g.docs.has(c);!w&&g.fromCache?u.reject(new P(D.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&g.fromCache&&l&&l.source==="server"?u.reject(new P(D.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),f=new Ra(Mo(c.path),m,{includeMetadataChanges:!0,_a:!0});return ig(o,f)}(yield Do(n),n.asyncQueue,e,t,i)})),i.promise}function ER(n,e){let t=new ct;return n.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return function(r,o,s){return k(this,null,function*(){try{let c=yield dd(r,o,!0),l=new wd(o,c.Ts),u=l.ma(c.documents),m=l.applyChanges(u,!1);s.resolve(m.snapshot)}catch(c){let l=Oo(c,`Failed to execute query '${o} against cache`);s.reject(l)}})}(yield mg(n),e,t)})),t.promise}function Ww(n,e,t={}){let i=new ct;return n.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return function(o,s,c,l,u){let m=new Co({next:g=>{m.Za(),s.enqueueAndForget(()=>rg(o,f)),g.fromCache&&l.source==="server"?u.reject(new P(D.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),f=new Ra(c,m,{includeMetadataChanges:!0,_a:!0});return ig(o,f)}(yield Do(n),n.asyncQueue,e,t,i)})),i.promise}function TR(n,e){let t=new Co(e);return n.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return function(r,o){j(r).Y_.add(o),o.next()}(yield Do(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return function(r,o){j(r).Y_.delete(o)}(yield Do(n),t)}))}}function AR(n,e,t,i){let r=function(s,c){let l;return l=typeof s=="string"?aw().encode(s):s,function(m,f){return new Ip(m,f)}(function(m,f){if(m instanceof Uint8Array)return px(m,f);if(m instanceof ArrayBuffer)return px(new Uint8Array(m),f);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),c)}(t,ja(e));n.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){vR(yield fg(n),r,i)}))}function kR(n,e){return n.asyncQueue.enqueue(()=>k(this,null,function*(){return function(i,r){let o=j(i);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,r))}(yield mg(n),e)}))}function Qw(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var bx=new Map;function pg(n,e,t){if(!t)throw new P(D.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function gg(n,e,t,i){if(e===!0&&i===!0)throw new P(D.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function _x(n){if(!z.isDocumentKey(n))throw new P(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function vx(n){if(z.isDocumentKey(n))throw new P(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function jd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":$()}function fe(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new P(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=jd(n);throw new P(D.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Yw(n,e){if(e<=0)throw new P(D.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var Ed=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new P(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new P(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gg("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Qw((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new P(D.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new P(D.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new P(D.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},lr=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ed({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new P(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new P(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ed(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Um;switch(i.type){case"firstParty":return new Gm(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new P(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return k(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let i=bx.get(t);i&&(N("ComponentProvider","Removing Datastore"),bx.delete(t),i.terminate())}(this),Promise.resolve()}};function Xw(n,e,t,i={}){var r;let o=(n=fe(n,lr))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&rn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),i.mockUserToken){let c,l;if(typeof i.mockUserToken=="string")c=i.mockUserToken,l=nt.MOCK_USER;else{c=D_(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new P(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new nt(u)}n._authCredentials=new Bm(new Vl(c,l))}}var mt=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},ke=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new In(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},In=class n extends mt{constructor(e,t,i){super(e,t,Mo(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ke(this.firestore,null,new z(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function bg(n,e,...t){if(n=ze(n),pg("collection","path",e),n instanceof lr){let i=me.fromString(e,...t);return vx(i),new In(n,null,i)}{if(!(n instanceof ke||n instanceof In))throw new P(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(me.fromString(e,...t));return vx(i),new In(n.firestore,null,i)}}function Zw(n,e){if(n=fe(n,lr),pg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new P(D.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new mt(n,null,function(i){return new on(me.emptyPath(),i)}(e))}function Ua(n,e,...t){if(n=ze(n),arguments.length===1&&(e=Ll.newId()),pg("doc","path",e),n instanceof lr){let i=me.fromString(e,...t);return _x(i),new ke(n,null,new z(i))}{if(!(n instanceof ke||n instanceof In))throw new P(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(me.fromString(e,...t));return _x(i),new ke(n.firestore,n instanceof In?n.converter:null,new z(i))}}function _g(n,e){return n=ze(n),e=ze(e),(n instanceof ke||n instanceof In)&&(e instanceof ke||e instanceof In)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function vg(n,e){return n=ze(n),e=ze(e),n instanceof mt&&e instanceof mt&&n.firestore===e.firestore&&Va(n._query,e._query)&&n.converter===e.converter}var Td=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Sa(this,"async_queue_retry"),this.Vu=()=>{let i=Ol();i&&N("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;let t=Ol();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Ol();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new ct;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return k(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ki(e))throw e;N("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;let r=function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),c}(i);throw Qe("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=t,t}enqueueAfterDelay(e,t,i){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let r=up.createAndSchedule(this,e,t,i,o=>this.yu(o));return this.Tu.push(r),r}fu(){this.Eu&&$()}verifyOperationInProgress(){}wu(){return k(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function kp(n){return function(t,i){if(typeof t!="object"||t===null)return!1;let r=t;for(let o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Cp=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new ct,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var Jw=-1,Be=class extends lr{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new Td,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return k(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Td(e),this._firestoreClient=void 0,yield e}})}};function ft(n){if(n._terminated)throw new P(D.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||eI(n),n._firestoreClient}function eI(n){var e,t,i;let r=n._freezeSettings(),o=function(c,l,u,m){return new Jm(c,l,u,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,Qw(m.experimentalLongPollingOptions),m.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new Ap(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(c){let l=c?._online.build();return{_offline:c?._offline.build(l),_online:l}}(n._componentsProvider))}function tI(n,e){rn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return iI(n,ug.provider,{build:i=>new Id(i,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function nI(n){return k(this,null,function*(){rn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();iI(n,ug.provider,{build:t=>new wp(t,e.cacheSizeBytes)})})}function iI(n,e,t){if((n=fe(n,Be))._firestoreClient||n._terminated)throw new P(D.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new P(D.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},eI(n)}function rI(n){if(n._initialized&&!n._terminated)throw new P(D.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new ct;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>k(this,null,function*(){try{yield function(i){return k(this,null,function*(){if(!bi.D())return Promise.resolve();let r=i+"main";yield bi.delete(r)})}(Jp(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function oI(n){return function(t){let i=new ct;return t.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return cR(yield fg(t),i)})),i.promise}(ft(n=fe(n,Be)))}function sI(n){return xR(ft(n=fe(n,Be)))}function aI(n){return wR(ft(n=fe(n,Be)))}function cI(n,e){let t=ft(n=fe(n,Be)),i=new Cp;return AR(t,n._databaseId,e,i),i}function lI(n,e){return kR(ft(n=fe(n,Be)),e).then(t=>t?new mt(n,null,t.query):null)}var kn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ze.fromBase64String(e))}catch(t){throw new P(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ze.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var an=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new P(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ye(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var $n=class{constructor(e){this._methodName=e}};var dr=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new P(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new P(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ne(this._lat,e._lat)||ne(this._long,e._long)}};var Ma=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}};var CR=/^__.*__$/,Dp=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new sn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ii(e,this.data,t,this.fieldTransforms)}},Ad=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new sn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function dI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $()}}var kd=class n{constructor(e,t,i,r,o,s){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Cd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(dI(this.Cu)&&CR.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},Sp=class{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||ja(e)}Qu(e,t,i,r=!1){return new kd({Cu:e,methodName:t,qu:i,path:Ye.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function fr(n){let e=n._freezeSettings(),t=ja(n._databaseId);return new Sp(n._databaseId,!!e.ignoreUndefinedProperties,t)}function zd(n,e,t,i,r,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,r);wg("Data must be an object, but it was:",s,i);let c=mI(i,s),l,u;if(o.merge)l=new $t(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let m=[];for(let f of o.mergeFields){let g=Fp(e,f,t);if(!s.contains(g))throw new P(D.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);pI(m,g)||m.push(g)}l=new $t(m),u=s.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=s.fieldTransforms;return new Dp(new Et(c),l,u)}var Pa=class n extends $n{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function uI(n,e,t){return new kd({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Rp=class n extends $n{_toFieldTransform(e){return new sr(e.path,new xi)}isEqual(e){return e instanceof n}},Mp=class n extends $n{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=uI(this,e,!0),i=this.Ku.map(o=>pr(o,t)),r=new Bn(i);return new sr(e.path,r)}isEqual(e){return e instanceof n&&Qu(this.Ku,e.Ku)}},Pp=class n extends $n{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=uI(this,e,!0),i=this.Ku.map(o=>pr(o,t)),r=new qn(i);return new sr(e.path,r)}isEqual(e){return e instanceof n&&Qu(this.Ku,e.Ku)}},Np=class n extends $n{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new wi(e.serializer,Zx(e.serializer,this.$u));return new sr(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function yg(n,e,t,i){let r=n.Qu(1,e,t);wg("Data must be an object, but it was:",r,i);let o=[],s=Et.empty();mr(i,(l,u)=>{let m=Ig(e,l,t);u=ze(u);let f=r.Nu(m);if(u instanceof Pa)o.push(m);else{let g=pr(u,f);g!=null&&(o.push(m),s.set(m,g))}});let c=new $t(o);return new Ad(s,c,r.fieldTransforms)}function xg(n,e,t,i,r,o){let s=n.Qu(1,e,t),c=[Fp(e,i,t)],l=[r];if(o.length%2!=0)throw new P(D.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)c.push(Fp(e,o[g])),l.push(o[g+1]);let u=[],m=Et.empty();for(let g=c.length-1;g>=0;--g)if(!pI(u,c[g])){let w=c[g],R=l[g];R=ze(R);let S=s.Nu(w);if(R instanceof Pa)u.push(w);else{let M=pr(R,S);M!=null&&(u.push(w),m.set(w,M))}}let f=new $t(u);return new Ad(m,f,s.fieldTransforms)}function hI(n,e,t,i=!1){return pr(t,n.Qu(i?4:3,e))}function pr(n,e){if(fI(n=ze(n)))return wg("Unsupported field value:",e,n),mI(n,e);if(n instanceof $n)return function(i,r){if(!dI(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);let o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){let o=[],s=0;for(let c of i){let l=pr(c,r.Lu(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(n,e)}return function(i,r){if((i=ze(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Zx(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let o=Ue.fromDate(i);return{timestampValue:yo(r.serializer,o)}}if(i instanceof Ue){let o=new Ue(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:yo(r.serializer,o)}}if(i instanceof dr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof kn)return{bytesValue:cw(r.serializer,i._byteString)};if(i instanceof ke){let o=r.databaseId,s=i.firestore._databaseId;if(!s.isEqual(o))throw r.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Yp(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Ma)return function(s,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw c.Bu("VectorValues must only contain numeric values.");return Qp(c.serializer,l)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${jd(i)}`)}(n,e)}function mI(n,e){let t={};return Nx(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):mr(n,(i,r)=>{let o=pr(r,e.Mu(i));o!=null&&(t[i]=o)}),{mapValue:{fields:t}}}function fI(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ue||n instanceof dr||n instanceof kn||n instanceof ke||n instanceof $n||n instanceof Ma)}function wg(n,e,t){if(!fI(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){let i=jd(t);throw i==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+i)}}function Fp(n,e,t){if((e=ze(e))instanceof an)return e._internalPath;if(typeof e=="string")return Ig(n,e);throw Cd("Field path arguments must be of type string or ",n,!1,void 0,t)}var DR=new RegExp("[~\\*/\\[\\]]");function Ig(n,e,t){if(e.search(DR)>=0)throw Cd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new an(...e.split("."))._internalPath}catch{throw Cd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Cd(n,e,t,i,r){let o=i&&!i.isEmpty(),s=r!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${i}`),s&&(l+=` in document ${r}`),l+=")"),new P(D.INVALID_ARGUMENT,c+n+l)}function pI(n,e){return n.some(t=>t.isEqual(e))}var ur=class{constructor(e,t,i,r,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ke(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Op(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Ud("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Op=class extends ur{data(){return super.data()}};function Ud(n,e){return typeof e=="string"?Ig(n,e):e instanceof an?e._internalPath:e._delegate._internalPath}function gI(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new P(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Na=class{},hr=class extends Na{};function Kn(n,e,...t){let i=[];e instanceof Na&&i.push(e),i=i.concat(t),function(o){let s=o.filter(l=>l instanceof Vp).length,c=o.filter(l=>l instanceof Dd).length;if(s>1||s>0&&c>0)throw new P(D.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)n=r._apply(n);return n}var Dd=class n extends hr{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=this._parse(e);return AI(e._query,t),new mt(e.firestore,e.converter,mf(e._query,t))}_parse(e){let t=fr(e.firestore);return function(o,s,c,l,u,m,f){let g;if(u.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new P(D.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){xx(f,m);let w=[];for(let R of f)w.push(yx(l,o,R));g={arrayValue:{values:w}}}else g=yx(l,o,f)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||xx(f,m),g=hI(c,s,f,m==="in"||m==="not-in");return ue.create(u,m,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function bI(n,e,t){let i=e,r=Ud("where",n);return Dd._create(r,i,t)}var Vp=class n extends Na{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:ye.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(r,o){let s=r,c=o.getFlattenedFilters();for(let l of c)AI(s,l),s=mf(s,l)}(e._query,t),new mt(e.firestore,e.converter,mf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Lp=class n extends hr{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(r,o,s){if(r.startAt!==null)throw new P(D.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new P(D.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new rr(o,s)}(e._query,this._field,this._direction);return new mt(e.firestore,e.converter,function(r,o){let s=r.explicitOrderBy.concat([o]);return new on(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}};function _I(n,e="asc"){let t=e,i=Ud("orderBy",n);return Lp._create(i,t)}var Sd=class n extends hr{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new n(e,t,i)}_apply(e){return new mt(e.firestore,e.converter,Wl(e._query,this._limit,this._limitType))}};function vI(n){return Yw("limit",n),Sd._create("limit",n,"F")}function yI(n){return Yw("limitToLast",n),Sd._create("limitToLast",n,"L")}var Rd=class n extends hr{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=TI(e,this.type,this._docOrFields,this._inclusive);return new mt(e.firestore,e.converter,function(r,o){return new on(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)}(e._query,t))}};function xI(...n){return Rd._create("startAt",n,!0)}function wI(...n){return Rd._create("startAfter",n,!1)}var Md=class n extends hr{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=TI(e,this.type,this._docOrFields,this._inclusive);return new mt(e.firestore,e.converter,function(r,o){return new on(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)}(e._query,t))}};function II(...n){return Md._create("endBefore",n,!1)}function EI(...n){return Md._create("endAt",n,!0)}function TI(n,e,t,i){if(t[0]=ze(t[0]),t[0]instanceof ur)return function(o,s,c,l,u){if(!l)throw new P(D.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);let m=[];for(let f of ho(o))if(f.field.isKeyField())m.push(ir(s,l.key));else{let g=l.data.field(f.field);if(Nd(g))throw new P(D.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let w=f.field.canonicalString();throw new P(D.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${w}' (used as the orderBy) does not exist.`)}m.push(g)}return new Tn(m,u)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{let r=fr(n.firestore);return function(s,c,l,u,m,f){let g=s.explicitOrderBy;if(m.length>g.length)throw new P(D.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let w=[];for(let R=0;R<m.length;R++){let S=m[R];if(g[R].field.isKeyField()){if(typeof S!="string")throw new P(D.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof S}`);if(!Kp(s)&&S.indexOf("/")!==-1)throw new P(D.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${S}' contains a slash.`);let M=s.path.child(me.fromString(S));if(!z.isDocumentKey(M))throw new P(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);let q=new z(M);w.push(ir(c,q))}else{let M=hI(l,u,S);w.push(M)}}return new Tn(w,f)}(n._query,n.firestore._databaseId,r,e,t,i)}}function yx(n,e,t){if(typeof(t=ze(t))=="string"){if(t==="")throw new P(D.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Kp(e)&&t.indexOf("/")!==-1)throw new P(D.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let i=e.path.child(me.fromString(t));if(!z.isDocumentKey(i))throw new P(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return ir(n,new z(i))}if(t instanceof ke)return ir(n,t._key);throw new P(D.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jd(t)}.`)}function xx(n,e){if(!Array.isArray(n)||n.length===0)throw new P(D.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function AI(n,e){let t=function(r,o){for(let s of r)for(let c of s.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new P(D.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new P(D.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var So=class{convertValue(e,t="none"){switch(nr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ve(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(_i(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw $()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return mr(e,(r,o)=>{i[r]=this.convertValue(o,t)}),i}convertVectorValue(e){var t,i,r;let o=(r=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(s=>Ve(s.doubleValue));return new Ma(o)}convertGeoPoint(e){return new dr(Ve(e.latitude),Ve(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=Gp(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(ba(e));default:return null}}convertTimestamp(e){let t=Un(e);return new Ue(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=me.fromString(e);W(vw(i));let r=new vi(i.get(1),i.get(3)),o=new z(i.popFirst(5));return r.isEqual(t)||Qe(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Bd(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}var jp=class extends So{constructor(e){super(),this.firestore=e}convertBytes(e){return new kn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new ke(this.firestore,null,t)}};var zn=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Xt=class extends ur{constructor(e,t,i,r,o,s){super(e,t,i,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new pi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(Ud("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}},pi=class extends Xt{data(e={}){return super.data(e)}},cn=class{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new zn(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new pi(this._firestore,this._userDataWriter,i.key,i,new zn(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new P(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(c=>{let l=new pi(r._firestore,r._userDataWriter,c.doc.key,c.doc,new zn(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let l=new pi(r._firestore,r._userDataWriter,c.doc.key,c.doc,new zn(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),u=-1,m=-1;return c.type!==0&&(u=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),m=s.indexOf(c.doc.key)),{type:SR(c.type),doc:l,oldIndex:u,newIndex:m}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function SR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $()}}function Eg(n,e){return n instanceof Xt&&e instanceof Xt?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof cn&&e instanceof cn&&n._firestore===e._firestore&&vg(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function kI(n){n=fe(n,ke);let e=fe(n.firestore,Be);return Kw(ft(e),n._key).then(t=>Cg(e,n,t))}var Gn=class extends So{constructor(e){super(),this.firestore=e}convertBytes(e){return new kn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new ke(this.firestore,null,t)}};function CI(n){n=fe(n,ke);let e=fe(n.firestore,Be),t=ft(e),i=new Gn(e);return IR(t,n._key).then(r=>new Xt(e,i,n._key,r,new zn(r!==null&&r.hasLocalMutations,!0),n.converter))}function DI(n){n=fe(n,ke);let e=fe(n.firestore,Be);return Kw(ft(e),n._key,{source:"server"}).then(t=>Cg(e,n,t))}function SI(n){n=fe(n,mt);let e=fe(n.firestore,Be),t=ft(e),i=new Gn(e);return gI(n._query),Ww(t,n._query).then(r=>new cn(e,i,n,r))}function RI(n){n=fe(n,mt);let e=fe(n.firestore,Be),t=ft(e),i=new Gn(e);return ER(t,n._query).then(r=>new cn(e,i,n,r))}function MI(n){n=fe(n,mt);let e=fe(n.firestore,Be),t=ft(e),i=new Gn(e);return Ww(t,n._query,{source:"server"}).then(r=>new cn(e,i,n,r))}function Tg(n,e,t){n=fe(n,ke);let i=fe(n.firestore,Be),r=Bd(n.converter,e,t);return Vo(i,[zd(fr(i),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,Ge.none())])}function Ag(n,e,t,...i){n=fe(n,ke);let r=fe(n.firestore,Be),o=fr(r),s;return s=typeof(e=ze(e))=="string"||e instanceof an?xg(o,"updateDoc",n._key,e,t,i):yg(o,"updateDoc",n._key,e),Vo(r,[s.toMutation(n._key,Ge.exists(!0))])}function PI(n){return Vo(fe(n.firestore,Be),[new Ei(n._key,Ge.none())])}function NI(n,e){let t=fe(n.firestore,Be),i=Ua(n),r=Bd(n.converter,e);return Vo(t,[zd(fr(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,Ge.exists(!1))]).then(()=>i)}function kg(n,...e){var t,i,r;n=ze(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||kp(e[s])||(o=e[s],s++);let c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(kp(e[s])){let f=e[s];e[s]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[s+1]=(i=f.error)===null||i===void 0?void 0:i.bind(f),e[s+2]=(r=f.complete)===null||r===void 0?void 0:r.bind(f)}let l,u,m;if(n instanceof ke)u=fe(n.firestore,Be),m=Mo(n._key.path),l={next:f=>{e[s]&&e[s](Cg(u,n,f))},error:e[s+1],complete:e[s+2]};else{let f=fe(n,mt);u=fe(f.firestore,Be),m=f._query;let g=new Gn(u);l={next:w=>{e[s]&&e[s](new cn(u,g,f,w))},error:e[s+1],complete:e[s+2]},gI(n._query)}return function(g,w,R,S){let M=new Co(S),q=new Ra(w,M,R);return g.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return ig(yield Do(g),q)})),()=>{M.Za(),g.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return rg(yield Do(g),q)}))}}(ft(u),m,c,l)}function FI(n,e){return TR(ft(n=fe(n,Be)),kp(e)?e:{next:e})}function Vo(n,e){return function(i,r){let o=new ct;return i.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return rR(yield fg(i),r,o)})),o.promise}(ft(n),e)}function Cg(n,e,t){let i=t.docs.get(e._key),r=new Gn(n);return new Xt(n,r,e._key,i,new zn(t.hasPendingWrites,t.fromCache),e.converter)}var RR={maxAttempts:5};var Pd=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=fr(e)}set(e,t,i){this._verifyNotCommitted();let r=mi(e,this._firestore),o=Bd(r.converter,t,i),s=zd(this._dataReader,"WriteBatch.set",r._key,o,r.converter!==null,i);return this._mutations.push(s.toMutation(r._key,Ge.none())),this}update(e,t,i,...r){this._verifyNotCommitted();let o=mi(e,this._firestore),s;return s=typeof(t=ze(t))=="string"||t instanceof an?xg(this._dataReader,"WriteBatch.update",o._key,t,i,r):yg(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Ge.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=mi(e,this._firestore);return this._mutations=this._mutations.concat(new Ei(t._key,Ge.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new P(D.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function mi(n,e){if((n=ze(n)).firestore!==e)throw new P(D.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var zp=class extends class{constructor(t,i){this._firestore=t,this._transaction=i,this._dataReader=fr(t)}get(t){let i=mi(t,this._firestore),r=new jp(this._firestore);return this._transaction.lookup([i._key]).then(o=>{if(!o||o.length!==1)return $();let s=o[0];if(s.isFoundDocument())return new ur(this._firestore,r,s.key,s,i.converter);if(s.isNoDocument())return new ur(this._firestore,r,i._key,null,i.converter);throw $()})}set(t,i,r){let o=mi(t,this._firestore),s=Bd(o.converter,i,r),c=zd(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,r);return this._transaction.set(o._key,c),this}update(t,i,r,...o){let s=mi(t,this._firestore),c;return c=typeof(i=ze(i))=="string"||i instanceof an?xg(this._dataReader,"Transaction.update",s._key,i,r,o):yg(this._dataReader,"Transaction.update",s._key,i),this._transaction.update(s._key,c),this}delete(t){let i=mi(t,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=mi(e,this._firestore),i=new Gn(this._firestore);return super.get(e).then(r=>new Xt(this._firestore,i,t._key,r._document,new zn(!1,!1),t.converter))}};function OI(n,e,t){n=fe(n,Be);let i=Object.assign(Object.assign({},RR),t);return function(o){if(o.maxAttempts<1)throw new P(D.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(o,s,c){let l=new ct;return o.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){let u=yield yR(o);new Tp(o.asyncQueue,u,c,s,l).au()})),l.promise}(ft(n),r=>e(new zp(n,r)),i)}function VI(){return new Pa("deleteField")}function LI(){return new Rp("serverTimestamp")}function jI(...n){return new Mp("arrayUnion",n)}function zI(...n){return new Pp("arrayRemove",n)}function UI(n){return new Np("increment",n)}(function(e,t=!0){(function(r){Ro=r})(M_),Is(new Li("firestore",(i,{instanceIdentifier:r,options:o})=>{let s=i.getProvider("app").getImmediate(),c=new Be(new qm(i.getProvider("auth-internal")),new Km(i.getProvider("app-check-internal")),function(u,m){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new P(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vi(u.options.projectId,m)}(s,r),s);return o=Object.assign({useFetchStreams:t},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),ei(v0,"4.7.3",e),ei(v0,"4.7.3","esm2017")})();var MR="@firebase/firestore-compat",PR="0.3.38";function Ng(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new P("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function BI(){if(typeof Uint8Array>"u")throw new P("unimplemented","Uint8Arrays are not available in this environment.")}function qI(){if(!Fx())throw new P("unimplemented","Blobs are unavailable in Firestore in this environment.")}var qd=class n{constructor(e){this._delegate=e}static fromBase64String(e){return qI(),new n(kn.fromBase64String(e))}static fromUint8Array(e){return BI(),new n(kn.fromUint8Array(e))}toBase64(){return qI(),this._delegate.toBase64()}toUint8Array(){return BI(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function Dg(n){return NR(n,["next","error","complete"])}function NR(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let i of e)if(i in t&&typeof t[i]=="function")return!0;return!1}var Sg=class{enableIndexedDbPersistence(e,t){return tI(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return nI(e._delegate)}clearIndexedDbPersistence(e){return rI(e._delegate)}},$d=class{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof vi||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&rn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,i={}){Xw(this._delegate,e,t,i)}enableNetwork(){return sI(this._delegate)}disableNetwork(){return aI(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,gg("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return oI(this._delegate)}onSnapshotsInSync(e){return FI(this._delegate,e)}get app(){if(!this._appCompat)throw new P("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new zo(this,bg(this._delegate,e))}catch(t){throw Mt(t,"collection()","Firestore.collection()")}}doc(e){try{return new Cn(this,Ua(this._delegate,e))}catch(t){throw Mt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new vr(this,Zw(this._delegate,e))}catch(t){throw Mt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return OI(this._delegate,t=>e(new Gd(this,t)))}batch(){return ft(this._delegate),new Hd(new Pd(this._delegate,e=>Vo(this._delegate,e)))}loadBundle(e){return cI(this._delegate,e)}namedQuery(e){return lI(this._delegate,e).then(t=>t?new vr(this,t):null)}},Lo=class extends So{constructor(e){super(),this.firestore=e}convertBytes(e){return new qd(new kn(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Cn.forKey(t,this.firestore,null)}};function FR(n){wx(n)}var Gd=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Lo(e)}get(e){let t=gr(e);return this._delegate.get(t).then(i=>new br(this._firestore,new Xt(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){let r=gr(e);return i?(Ng("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){let o=gr(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,i,...r),this}delete(e){let t=gr(e);return this._delegate.delete(t),this}},Hd=class{constructor(e){this._delegate=e}set(e,t,i){let r=gr(e);return i?(Ng("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){let o=gr(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,i,...r),this}delete(e){let t=gr(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},jo=class n{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){let i=new pi(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new _r(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let i=n.INSTANCES,r=i.get(e);r||(r=new WeakMap,i.set(e,r));let o=r.get(t);return o||(o=new n(e,new Lo(e),t),r.set(t,o)),o}};jo.INSTANCES=new WeakMap;var Cn=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Lo(e)}static forPath(e,t,i){if(e.length%2!==0)throw new P("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new ke(t._delegate,i,new z(e)))}static forKey(e,t,i){return new n(t,new ke(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new zo(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new zo(this.firestore,bg(this._delegate,e))}catch(t){throw Mt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ze(e),e instanceof ke?_g(this._delegate,e):!1}set(e,t){t=Ng("DocumentReference.set",t);try{return t?Tg(this._delegate,e,t):Tg(this._delegate,e)}catch(i){throw Mt(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return arguments.length===1?Ag(this._delegate,e):Ag(this._delegate,e,t,...i)}catch(r){throw Mt(r,"updateDoc()","DocumentReference.update()")}}delete(){return PI(this._delegate)}onSnapshot(...e){let t=$I(e),i=GI(e,r=>new br(this.firestore,new Xt(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return kg(this._delegate,t,i)}get(e){let t;return e?.source==="cache"?t=CI(this._delegate):e?.source==="server"?t=DI(this._delegate):t=kI(this._delegate),t.then(i=>new br(this.firestore,new Xt(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(jo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Mt(n,e,t){return n.message=n.message.replace(e,t),n}function $I(n){for(let e of n)if(typeof e=="object"&&!Dg(e))return e;return{}}function GI(n,e){var t,i;let r;return Dg(n[0])?r=n[0]:Dg(n[1])?r=n[1]:typeof n[0]=="function"?r={next:n[0],error:n[1],complete:n[2]}:r={next:n[1],error:n[2],complete:n[3]},{next:o=>{r.next&&r.next(e(o))},error:(t=r.error)===null||t===void 0?void 0:t.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}var br=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Cn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Eg(this._delegate,e._delegate)}},_r=class extends br{data(e){let t=this._delegate.data(e);return this._delegate._converter||Ix(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},vr=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Lo(e)}where(e,t,i){try{return new n(this.firestore,Kn(this._delegate,bI(e,t,i)))}catch(r){throw Mt(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,Kn(this._delegate,_I(e,t)))}catch(i){throw Mt(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,Kn(this._delegate,vI(e)))}catch(t){throw Mt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,Kn(this._delegate,yI(e)))}catch(t){throw Mt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,Kn(this._delegate,xI(...e)))}catch(t){throw Mt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,Kn(this._delegate,wI(...e)))}catch(t){throw Mt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,Kn(this._delegate,II(...e)))}catch(t){throw Mt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,Kn(this._delegate,EI(...e)))}catch(t){throw Mt(t,"endAt()","Query.endAt()")}}isEqual(e){return vg(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=RI(this._delegate):e?.source==="server"?t=MI(this._delegate):t=SI(this._delegate),t.then(i=>new Ba(this.firestore,new cn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){let t=$I(e),i=GI(e,r=>new Ba(this.firestore,new cn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return kg(this._delegate,t,i)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(jo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},Rg=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new _r(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Ba=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new vr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new _r(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Rg(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new _r(this._firestore,i))})}isEqual(e){return Eg(this._delegate,e._delegate)}},zo=class n extends vr{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Cn(this.firestore,e):null}doc(e){try{return e===void 0?new Cn(this.firestore,Ua(this._delegate)):new Cn(this.firestore,Ua(this._delegate,e))}catch(t){throw Mt(t,"doc()","CollectionReference.doc()")}}add(e){return NI(this._delegate,e).then(t=>new Cn(this.firestore,t))}isEqual(e){return _g(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(jo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function gr(n){return fe(n,ke)}var Mg=class n{constructor(...e){this._delegate=new an(...e)}static documentId(){return new n(Ye.keyField().canonicalString())}isEqual(e){return e=ze(e),e instanceof an?this._delegate._internalPath.isEqual(e._internalPath):!1}};var Pg=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=LI();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=VI();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=jI(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=zI(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=UI(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var OR={Firestore:$d,GeoPoint:dr,Timestamp:Ue,Blob:qd,Transaction:Gd,WriteBatch:Hd,DocumentReference:Cn,DocumentSnapshot:br,Query:vr,QueryDocumentSnapshot:_r,QuerySnapshot:Ba,CollectionReference:zo,FieldPath:Mg,FieldValue:Pg,setLogLevel:FR,CACHE_SIZE_UNLIMITED:Jw};function VR(n,e){n.INTERNAL.registerComponent(new Li("firestore-compat",t=>{let i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},OR)))}function LR(n){VR(n,(e,t)=>new $d(e,t,new Sg)),n.registerVersion(MR,PR)}LR(Nt);function jR(n,e=ac){return new Jt(t=>{let i;return e!=null?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{i?.()}})}function HI(n,e){return jR(n,e)}function zR(n,e){return HI(n,e).pipe(Zn(void 0),hc(),te(t=>{let[i,r]=t;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}function Vg(n,e){return HI(n,e).pipe(te(t=>({payload:t,type:"query"})))}var Kd=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let i=this.ref.collection(e),{ref:r,query:o}=XI(i,t);return new Qd(r,o,this.afs)}snapshotChanges(){return zR(this.ref,this.afs.schedulers.outsideAngular).pipe(Ft)}valueChanges(e={}){return this.snapshotChanges().pipe(te(({payload:t})=>e.idField?De(V({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return Me(this.ref.get(e)).pipe(Ft)}};function Wd(n,e){return Vg(n,e).pipe(Zn(void 0),hc(),te(t=>{let[i,r]=t,o=r.payload.docChanges(),s=o.map(c=>({type:c.type,payload:c}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,l)=>{let u=o.find(f=>f.doc.ref.isEqual(c.ref)),m=i?.payload.docs.find(f=>f.ref.isEqual(c.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(c.metadata)||!u&&m&&JSON.stringify(m.metadata)===JSON.stringify(c.metadata)||s.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:c}})}),s}))}function KI(n,e,t){return Wd(n,t).pipe(kr((i,r)=>UR(i,r.map(o=>o.payload),e),[]),uc(),te(i=>i.map(r=>({type:r.type,payload:r}))))}function UR(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=BR(n,i))}),n}function Fg(n,e,t,...i){let r=n.slice();return r.splice(e,t,...i),r}function BR(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return Fg(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return Fg(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Fg(n,e.oldIndex,1);break}return n}function WI(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var Qd=class{ref;query;afs;constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=Wd(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(te(i=>i.filter(r=>e.indexOf(r.type)>-1)))),t.pipe(Zn(void 0),hc(),vt(([i,r])=>r.length>0||!i),te(([,i])=>i),Ft)}auditTrail(e){return this.stateChanges(e).pipe(kr((t,i)=>[...t,...i],[]))}snapshotChanges(e){let t=WI(e);return KI(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ft)}valueChanges(e={}){return Vg(this.query,this.afs.schedulers.outsideAngular).pipe(te(t=>t.payload.docs.map(i=>e.idField?De(V({},i.data()),{[e.idField]:i.id}):i.data())),Ft)}get(e){return Me(this.query.get(e)).pipe(Ft)}add(e){return this.ref.add(e)}doc(e){return new Kd(this.ref.doc(e),this.afs)}},Og=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Wd(this.query,this.afs.schedulers.outsideAngular).pipe(Ft):Wd(this.query,this.afs.schedulers.outsideAngular).pipe(te(t=>t.filter(i=>e.indexOf(i.type)>-1)),vt(t=>t.length>0),Ft)}auditTrail(e){return this.stateChanges(e).pipe(kr((t,i)=>[...t,...i],[]))}snapshotChanges(e){let t=WI(e);return KI(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ft)}valueChanges(e={}){return Vg(this.query,this.afs.schedulers.outsideAngular).pipe(te(i=>i.payload.docs.map(r=>e.idField?V({[e.idField]:r.id},r.data()):r.data())),Ft)}get(e){return Me(this.query.get(e)).pipe(Ft)}},QI=new K("angularfire2.enableFirestorePersistence"),YI=new K("angularfire2.firestore.persistenceSettings"),qR=new K("angularfire2.firestore.settings"),$R=new K("angularfire2.firestore.use-emulator");function XI(n,e=t=>t){return{query:e(n),ref:n}}var qa=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,i,r,o,s,c,l,u,m,f,g,w,R,S,M,q,Q){this.schedulers=l;let L=ta(t,c,i),ee=m;f&&Dm(L,c,g,R,S,M,w,q),[this.firestore,this.persistenceEnabled$]=Tl(`${L.name}.firestore`,"AngularFirestore",L.name,()=>{let ie=c.runOutsideAngular(()=>L.firestore());if(o&&ie.settings(o),ee&&ie.useEmulator(...ee),r&&!On(s)){let re=()=>{try{return Me(ie.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(y){return typeof console<"u"&&console.warn(y),X(!1)}};return[ie,c.runOutsideAngular(re)]}else return[ie,X(!1)]},[o,ee,r])}collection(t,i){let r;typeof t=="string"?r=this.firestore.collection(t):r=t;let{ref:o,query:s}=XI(r,i),c=this.schedulers.ngZone.run(()=>o);return new Qd(c,s,this)}collectionGroup(t,i){let r=i||(s=>s),o=this.firestore.collectionGroup(t);return new Og(r(o),this)}doc(t){let i;typeof t=="string"?i=this.firestore.doc(t):i=t;let r=this.schedulers.ngZone.run(()=>i);return new Kd(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||n)(F(Xr),F(Zr,8),F(QI,8),F(qR,8),F(Ct),F(J),F(wl),F(YI,8),F($R,8),F(g0,8),F(Im,8),F(Em,8),F(Tm,8),F(Am,8),F(km,8),F(Cm,8),F(Ki,8))};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),ZI=(()=>{class n{constructor(){Nt.registerVersion("angularfire",Yr.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:QI,useValue:!0},{provide:YI,useValue:t}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=ce({type:n});static \u0275inj=ae({providers:[qa]})}return n})();var Yd=(()=>{class n{constructor(t){this.firestore=t,this.collectionName="toppings"}getToppings(){return this.firestore.collection(this.collectionName).valueChanges({idField:"id"})}addTopping(t){return k(this,null,function*(){if(yield this.checkIfToppingExists(t))return Promise.reject("Topping with the same name already exists!");let r=this.firestore.createId();return this.firestore.collection(this.collectionName).doc(r).set({id:r,name:t}).then(()=>"Topping added successfully!")})}updateTopping(t,i){return k(this,null,function*(){return(yield this.checkIfToppingExists(i,t))?Promise.reject("Topping with the same name already exists!"):this.firestore.collection(this.collectionName).doc(t).update({name:i}).then(()=>"Topping updated successfully!")})}checkIfToppingExists(t,i){return k(this,null,function*(){let o=(yield cc(this.firestore.collection(this.collectionName,s=>s.where("name","==",t.trim())).get())).docs.map(s=>s.data());return i?o.some(s=>s.id!==i):o.length>0})}deleteTopping(t){return this.firestore.collection(this.collectionName).doc(t).delete()}static{this.\u0275fac=function(i){return new(i||n)(F(qa))}}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var GR=["mat-button",""],HR=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],KR=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var WR=new K("MAT_BUTTON_CONFIG");var QR=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],YR=(()=>{class n{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(t){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,t)}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=t,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._updateRippleDisabled()}constructor(t,i,r,o){this._elementRef=t,this._platform=i,this._ngZone=r,this._animationMode=o,this._focusMonitor=U(Sy),this._rippleLoader=U($y),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let s=U(WR,{optional:!0}),c=t.nativeElement,l=c.classList;this.disabledInteractive=s?.disabledInteractive??!1,this._rippleLoader?.configureRipple(c,{className:"mat-mdc-button-ripple"});for(let{attribute:u,mdcClasses:m}of QR)c.hasAttribute(u)&&l.add(...m)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(t="program",i){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,i):this._elementRef.nativeElement.focus(i)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static{this.\u0275fac=function(i){Rr()}}static{this.\u0275dir=be({type:n,inputs:{color:"color",disableRipple:[de.HasDecoratorInputTransform,"disableRipple","disableRipple",wt],disabled:[de.HasDecoratorInputTransform,"disabled","disabled",wt],ariaDisabled:[de.HasDecoratorInputTransform,"aria-disabled","ariaDisabled",wt],disabledInteractive:[de.HasDecoratorInputTransform,"disabledInteractive","disabledInteractive",wt]},features:[Nn]})}}return n})();var Xd=(()=>{class n extends YR{constructor(t,i,r,o){super(t,i,r,o)}static{this.\u0275fac=function(i){return new(i||n)(B(Pe),B(at),B(J),B(en,8))}}static{this.\u0275cmp=$e({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(i,r){i&2&&(yt("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled()),yc(r.color?"mat-"+r.color:""),Fe("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("_mat-animation-noopable",r._animationMode==="NoopAnimations")("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[hn,xt],attrs:GR,ngContentSelectors:KR,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){i&1&&(Ht(HR),ve(0,"span",0),Oe(1),G(2,"span",1),Oe(3,1),H(),Oe(4,2),ve(5,"span",2)(6,"span",3)),i&2&&Fe("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px);display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);font-weight:var(--mdc-text-button-label-text-weight);text-transform:var(--mdc-text-button-label-text-transform);height:var(--mdc-text-button-container-height);border-radius:var(--mdc-text-button-container-shape);padding:0 var(--mat-text-button-horizontal-padding, 8px)}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);font-weight:var(--mdc-filled-button-label-text-weight);text-transform:var(--mdc-filled-button-label-text-transform);height:var(--mdc-filled-button-container-height);border-radius:var(--mdc-filled-button-container-shape);padding:0 var(--mat-filled-button-horizontal-padding, 16px)}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color)}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);font-weight:var(--mdc-protected-button-label-text-weight);text-transform:var(--mdc-protected-button-label-text-transform);height:var(--mdc-protected-button-container-height);border-radius:var(--mdc-protected-button-container-shape);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow)}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color)}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow)}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow)}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow)}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow)}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);font-weight:var(--mdc-outlined-button-label-text-weight);text-transform:var(--mdc-outlined-button-label-text-transform);height:var(--mdc-outlined-button-container-height);border-radius:var(--mdc-outlined-button-container-shape);padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width);padding:0 var(--mat-outlined-button-horizontal-padding, 15px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color)}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape)}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width))}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button-base{text-decoration:none}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}}return n})();var tE=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ce({type:n})}static{this.\u0275inj=ae({imports:[Je,qy,Je]})}}return n})();var iE=si({passive:!0}),rE=(()=>{class n{constructor(t,i){this._platform=t,this._ngZone=i,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return ln;let i=_n(t),r=this._monitoredElements.get(i);if(r)return r.subject;let o=new Le,s="cdk-text-field-autofilled",c=l=>{l.animationName==="cdk-text-field-autofill-start"&&!i.classList.contains(s)?(i.classList.add(s),this._ngZone.run(()=>o.next({target:l.target,isAutofilled:!0}))):l.animationName==="cdk-text-field-autofill-end"&&i.classList.contains(s)&&(i.classList.remove(s),this._ngZone.run(()=>o.next({target:l.target,isAutofilled:!1})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",c,iE),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:o,unlisten:()=>{i.removeEventListener("animationstart",c,iE)}}),o}stopMonitoring(t){let i=_n(t),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((t,i)=>this.stopMonitoring(i))}static{this.\u0275fac=function(i){return new(i||n)(F(at),F(J))}}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var oE=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ce({type:n})}static{this.\u0275inj=ae({})}}return n})();var Lg=class{constructor(e){this._box=e,this._destroyed=new Le,this._resizeSubject=new Le,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(t=>this._resizeSubject.next(t)))}observe(e){return this._elementObservables.has(e)||this._elementObservables.set(e,new Jt(t=>{let i=this._resizeSubject.subscribe(t);return this._resizeObserver?.observe(e,{box:this._box}),()=>{this._resizeObserver?.unobserve(e),i.unsubscribe(),this._elementObservables.delete(e)}}).pipe(vt(t=>t.some(i=>i.target===e)),ds({bufferSize:1,refCount:!0}),Gt(this._destroyed))),this._elementObservables.get(e)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},sE=(()=>{class n{constructor(){this._observers=new Map,this._ngZone=U(J),typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,t]of this._observers)t.destroy();this._observers.clear(),typeof ResizeObserver<"u"}observe(t,i){let r=i?.box||"content-box";return this._observers.has(r)||this._observers.set(r,new Lg(r)),this._observers.get(r).observe(t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ZR=["notch"],JR=["matFormFieldNotchedOutline",""],e1=["*"],t1=["textField"],n1=["iconPrefixContainer"],i1=["textPrefixContainer"],r1=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],o1=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function s1(n,e){n&1&&ve(0,"span",17)}function a1(n,e){if(n&1&&(G(0,"label",16),Oe(1,1),je(2,s1,1,0,"span",17),H()),n&2){let t=xe(2);Ne("floating",t._shouldLabelFloat())("monitorResize",t._hasOutline())("id",t._labelId),yt("for",t._control.disableAutomaticLabeling?null:t._control.id),le(2),Dt(2,!t.hideRequiredMarker&&t._control.required?2:-1)}}function c1(n,e){if(n&1&&je(0,a1,3,5,"label",16),n&2){let t=xe();Dt(0,t._hasFloatingLabel()?0:-1)}}function l1(n,e){n&1&&ve(0,"div",5)}function d1(n,e){}function u1(n,e){if(n&1&&je(0,d1,0,0,"ng-template",11),n&2){xe(2);let t=gs(1);Ne("ngTemplateOutlet",t)}}function h1(n,e){if(n&1&&(G(0,"div",7),je(1,u1,1,1,null,11),H()),n&2){let t=xe();Ne("matFormFieldNotchedOutlineOpen",t._shouldLabelFloat()),le(),Dt(1,t._forceDisplayInfixLabel()?-1:1)}}function m1(n,e){n&1&&(G(0,"div",8,2),Oe(2,2),H())}function f1(n,e){n&1&&(G(0,"div",9,3),Oe(2,3),H())}function p1(n,e){}function g1(n,e){if(n&1&&je(0,p1,0,0,"ng-template",11),n&2){xe();let t=gs(1);Ne("ngTemplateOutlet",t)}}function b1(n,e){n&1&&(G(0,"div",12),Oe(1,4),H())}function _1(n,e){n&1&&(G(0,"div",13),Oe(1,5),H())}function v1(n,e){n&1&&ve(0,"div",14)}function y1(n,e){if(n&1&&(G(0,"div",18),Oe(1,6),H()),n&2){let t=xe();Ne("@transitionMessages",t._subscriptAnimationState)}}function x1(n,e){if(n&1&&(G(0,"mat-hint",20),ge(1),H()),n&2){let t=xe(2);Ne("id",t._hintLabelId),le(),Mr(t.hintLabel)}}function w1(n,e){if(n&1&&(G(0,"div",19),je(1,x1,2,2,"mat-hint",20),Oe(2,7),ve(3,"div",21),Oe(4,8),H()),n&2){let t=xe();Ne("@transitionMessages",t._subscriptAnimationState),le(),Dt(1,t.hintLabel?1:-1)}}var Uo=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=be({type:n,selectors:[["mat-label"]],standalone:!0})}}return n})();var I1=new K("MatError");var E1=0,aE=(()=>{class n{constructor(){this.align="start",this.id=`mat-mdc-hint-${E1++}`}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=be({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(i,r){i&2&&(Oi("id",r.id),yt("align",null),Fe("mat-mdc-form-field-hint-end",r.align==="end"))},inputs:{align:"align",id:"id"},standalone:!0})}}return n})(),T1=new K("MatPrefix");var A1=new K("MatSuffix");var pE=new K("FloatingLabelParent"),cE=(()=>{class n{get floating(){return this._floating}set floating(t){this._floating=t,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(t){this._monitorResize=t,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(t){this._elementRef=t,this._floating=!1,this._monitorResize=!1,this._resizeObserver=U(sE),this._ngZone=U(J),this._parent=U(pE),this._resizeSubscription=new as}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return k1(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static{this.\u0275fac=function(i){return new(i||n)(B(Pe))}}static{this.\u0275dir=be({type:n,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(i,r){i&2&&Fe("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"},standalone:!0})}}return n})();function k1(n){let e=n;if(e.offsetParent!==null)return e.scrollWidth;let t=e.cloneNode(!0);t.style.setProperty("position","absolute"),t.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(t);let i=t.scrollWidth;return t.remove(),i}var lE="mdc-line-ripple--active",Zd="mdc-line-ripple--deactivating",dE=(()=>{class n{constructor(t,i){this._elementRef=t,this._handleTransitionEnd=r=>{let o=this._elementRef.nativeElement.classList,s=o.contains(Zd);r.propertyName==="opacity"&&s&&o.remove(lE,Zd)},i.runOutsideAngular(()=>{t.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){let t=this._elementRef.nativeElement.classList;t.remove(Zd),t.add(lE)}deactivate(){this._elementRef.nativeElement.classList.add(Zd)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static{this.\u0275fac=function(i){return new(i||n)(B(Pe),B(J))}}static{this.\u0275dir=be({type:n,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"],standalone:!0})}}return n})(),uE=(()=>{class n{constructor(t,i){this._elementRef=t,this._ngZone=i,this.open=!1}ngAfterViewInit(){let t=this._elementRef.nativeElement.querySelector(".mdc-floating-label");t?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),typeof requestAnimationFrame=="function"&&(t.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>t.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(t){!this.open||!t?this._notch.nativeElement.style.width="":this._notch.nativeElement.style.width=`calc(${t}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`}static{this.\u0275fac=function(i){return new(i||n)(B(Pe),B(J))}}static{this.\u0275cmp=$e({type:n,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(i,r){if(i&1&&jt(ZR,5),i&2){let o;Ke(o=We())&&(r._notch=o.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(i,r){i&2&&Fe("mdc-notched-outline--notched",r.open)},inputs:{open:[de.None,"matFormFieldNotchedOutlineOpen","open"]},standalone:!0,features:[xt],attrs:JR,ngContentSelectors:e1,decls:5,vars:0,consts:[["notch",""],[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],[1,"mdc-notched-outline__trailing"]],template:function(i,r){i&1&&(Ht(),ve(0,"div",1),G(1,"div",2,0),Oe(3),H(),ve(4,"div",3))},encapsulation:2,changeDetection:0})}}return n})(),C1={transitionMessages:N_("transitionMessages",[O_("enter",Yu({opacity:1,transform:"translateY(0%)"})),V_("void => enter",[Yu({opacity:0,transform:"translateY(-5px)"}),F_("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},jg=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=be({type:n})}}return n})();var zg=new K("MatFormField"),D1=new K("MAT_FORM_FIELD_DEFAULT_OPTIONS"),hE=0,mE="fill",S1="auto",fE="fixed",R1="translateY(-50%)",Jd=(()=>{class n{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=bn(t)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||S1}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(t){let i=this._appearance,r=t||this._defaults?.appearance||mE;this._appearance=r,this._appearance==="outline"&&this._appearance!==i&&(this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||fE}set subscriptSizing(t){this._subscriptSizing=t||this._defaults?.subscriptSizing||fE}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(t){this._explicitFormFieldControl=t}constructor(t,i,r,o,s,c,l,u){this._elementRef=t,this._changeDetectorRef=i,this._ngZone=r,this._dir=o,this._platform=s,this._defaults=c,this._animationMode=l,this._hideRequiredMarker=!1,this.color="primary",this._appearance=mE,this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId=`mat-mdc-form-field-label-${hE++}`,this._hintLabelId=`mat-mdc-hint-${hE++}`,this._subscriptAnimationState="",this._destroyed=new Le,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,c&&(c.appearance&&(this.appearance=c.appearance),this._hideRequiredMarker=!!c?.hideRequiredMarker,c.color&&(this.color=c.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){let t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${t.controlType}`),t.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(Gt(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(t=>!t._isText),this._hasTextPrefix=!!this._prefixChildren.find(t=>t._isText),this._hasIconSuffix=!!this._suffixChildren.find(t=>!t._isText),this._hasTextSuffix=!!this._suffixChildren.find(t=>t._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),dc(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){this._control}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||this._isFocused===null)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Gt(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(Gt(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return this.floatLabel==="always"}_hasOutline(){return this.appearance==="outline"}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(t){let i=this._control?this._control.ngControl:null;return i&&i[t]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||!this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(0):this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){this._hintChildren}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&typeof this._control.userAriaDescribedBy=="string"&&t.push(...this._control.userAriaDescribedBy.split(" ")),this._getDisplayedMessages()==="hint"){let i=this._hintChildren?this._hintChildren.find(o=>o.align==="start"):null,r=this._hintChildren?this._hintChildren.find(o=>o.align==="end"):null;i?t.push(i.id):this._hintLabel&&t.push(this._hintLabelId),r&&t.push(r.id)}else this._errorChildren&&t.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(t)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;let t=this._floatingLabel.element;if(!(this._iconPrefixContainer||this._textPrefixContainer)){t.style.transform="";return}if(!this._isAttachedToDom()){this._needsOutlineLabelOffsetUpdateOnStable=!0;return}let i=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,o=i?.getBoundingClientRect().width??0,s=r?.getBoundingClientRect().width??0,c=this._dir.value==="rtl"?"-1":"1",l=`${o+s}px`,m=`calc(${c} * (${l} + var(--mat-mdc-form-field-label-offset-x, 0px)))`;t.style.transform=`var(
        --mat-mdc-form-field-label-transform,
        ${R1} translateX(${m})
    )`}_isAttachedToDom(){let t=this._elementRef.nativeElement;if(t.getRootNode){let i=t.getRootNode();return i&&i!==t}return document.documentElement.contains(t)}static{this.\u0275fac=function(i){return new(i||n)(B(Pe),B(mn),B(J),B(My),B(at),B(D1,8),B(en,8),B(Se))}}static{this.\u0275cmp=$e({type:n,selectors:[["mat-form-field"]],contentQueries:function(i,r,o){if(i&1&&(Fn(o,Uo,5),Fn(o,Uo,7),Fn(o,jg,5),Fn(o,T1,5),Fn(o,A1,5),Fn(o,I1,5),Fn(o,aE,5)),i&2){let s;Ke(s=We())&&(r._labelChildNonStatic=s.first),Ke(s=We())&&(r._labelChildStatic=s.first),Ke(s=We())&&(r._formFieldControl=s.first),Ke(s=We())&&(r._prefixChildren=s),Ke(s=We())&&(r._suffixChildren=s),Ke(s=We())&&(r._errorChildren=s),Ke(s=We())&&(r._hintChildren=s)}},viewQuery:function(i,r){if(i&1&&(jt(t1,5),jt(n1,5),jt(i1,5),jt(cE,5),jt(uE,5),jt(dE,5)),i&2){let o;Ke(o=We())&&(r._textField=o.first),Ke(o=We())&&(r._iconPrefixContainer=o.first),Ke(o=We())&&(r._textPrefixContainer=o.first),Ke(o=We())&&(r._floatingLabel=o.first),Ke(o=We())&&(r._notchedOutline=o.first),Ke(o=We())&&(r._lineRipple=o.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(i,r){i&2&&Fe("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-no-animations",r._animationMode==="NoopAnimations")("mat-form-field-appearance-fill",r.appearance=="fill")("mat-form-field-appearance-outline",r.appearance=="outline")("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-focused",r._control.focused)("mat-primary",r.color!=="accent"&&r.color!=="warn")("mat-accent",r.color==="accent")("mat-warn",r.color==="warn")("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],standalone:!0,features:[zt([{provide:zg,useExisting:n},{provide:pE,useExisting:n}]),xt],ngContentSelectors:o1,decls:18,vars:21,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(i,r){if(i&1){let o=tn();Ht(r1),je(0,c1,1,1,"ng-template",null,0,l_),G(2,"div",4,1),Ee("click",function(c){return ot(o),st(r._control.onContainerClick(c))}),je(4,l1,1,0,"div",5),G(5,"div",6),je(6,h1,2,2,"div",7)(7,m1,3,0,"div",8)(8,f1,3,0,"div",9),G(9,"div",10),je(10,g1,1,1,null,11),Oe(11),H(),je(12,b1,2,0,"div",12)(13,_1,2,0,"div",13),H(),je(14,v1,1,0,"div",14),H(),G(15,"div",15),je(16,y1,2,1)(17,w1,5,2),H()}if(i&2){let o;le(2),Fe("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),le(2),Dt(4,!r._hasOutline()&&!r._control.disabled?4:-1),le(2),Dt(6,r._hasOutline()?6:-1),le(),Dt(7,r._hasIconPrefix?7:-1),le(),Dt(8,r._hasTextPrefix?8:-1),le(2),Dt(10,!r._hasOutline()||r._forceDisplayInfixLabel()?10:-1),le(2),Dt(12,r._hasTextSuffix?12:-1),le(),Dt(13,r._hasIconSuffix?13:-1),le(),Dt(14,r._hasOutline()?-1:14),le(),Fe("mat-mdc-form-field-subscript-dynamic-size",r.subscriptSizing==="dynamic"),le(),Dt(16,(o=r._getDisplayedMessages())==="error"?16:o==="hint"?17:-1)}},dependencies:[cE,uE,I_,dE,aE],styles:['.mdc-text-field{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px,var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px,var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px,var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px,var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px,var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 64px/0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 64px/0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 96px/0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;pointer-events:none}.mdc-notched-outline__trailing{flex-grow:1}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{border-top:1px solid;border-bottom:1px solid}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{max-width:calc(100% - 12px*2)}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-text-field--filled{border-top-left-radius:var(--mdc-filled-text-field-container-shape);border-top-right-radius:var(--mdc-filled-text-field-container-shape);border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-caret-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-focus-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-hover-label-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-focus-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-hover-label-text-color)}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font);font-size:var(--mdc-filled-text-field-label-text-size);font-weight:var(--mdc-filled-text-field-label-text-weight);letter-spacing:var(--mdc-filled-text-field-label-text-tracking)}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color)}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color)}.mdc-text-field--filled .mdc-line-ripple::before{border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-caret-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-focus-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-hover-label-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-focus-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-hover-label-text-color)}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font);font-size:var(--mdc-outlined-text-field-label-text-size);font-weight:var(--mdc-outlined-text-field-label-text-weight);letter-spacing:var(--mdc-outlined-text-field-label-text-tracking)}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}.mdc-text-field--outlined.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(.75*var(--mdc-outlined-text-field-label-text-size))}.mdc-text-field--outlined.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mdc-outlined-text-field-label-text-size)}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px,var(--mdc-outlined-text-field-container-shape))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px,var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-hover-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-focus-outline-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-hover-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-focus-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height);padding-top:var(--mat-form-field-filled-with-label-container-padding-top);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding);padding-bottom:var(--mat-form-field-container-vertical-padding)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color)}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font);line-height:var(--mat-form-field-subscript-text-line-height);font-size:var(--mat-form-field-subscript-text-size);letter-spacing:var(--mat-form-field-subscript-text-tracking);font-weight:var(--mat-form-field-subscript-text-weight)}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color)}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity)}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color)}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color)}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font);line-height:var(--mat-form-field-container-text-line-height);font-size:var(--mat-form-field-container-text-size);letter-spacing:var(--mat-form-field-container-text-tracking);font-weight:var(--mat-form-field-container-text-weight)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color)}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color)}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color)}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color)}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color)}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color)}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color)}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[C1.transitionMessages]},changeDetection:0})}}return n})(),Ug=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ce({type:n})}static{this.\u0275inj=ae({imports:[Je,Fr,Iy,Je]})}}return n})();var M1=new K("MAT_INPUT_VALUE_ACCESSOR"),P1=["button","checkbox","file","hidden","image","radio","range","reset","submit"],N1=0,eu=(()=>{class n{get disabled(){return this._disabled}set disabled(t){this._disabled=bn(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(Lc.required)??!1}set required(t){this._required=bn(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&rm().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(t){this._errorStateTracker.matcher=t}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=bn(t)}get errorState(){return this._errorStateTracker.errorState}set errorState(t){this._errorStateTracker.errorState=t}constructor(t,i,r,o,s,c,l,u,m,f){this._elementRef=t,this._platform=i,this.ngControl=r,this._autofillMonitor=u,this._formField=f,this._uid=`mat-input-${N1++}`,this.focused=!1,this.stateChanges=new Le,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(R=>rm().has(R)),this._iOSKeyupListener=R=>{let S=R.target;!S.value&&S.selectionStart===0&&S.selectionEnd===0&&(S.setSelectionRange(1,1),S.setSelectionRange(0,0))};let g=this._elementRef.nativeElement,w=g.nodeName.toLowerCase();this._inputValueAccessor=l||g,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&m.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._errorStateTracker=new _l(c,r,s,o,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect=w==="select",this._isTextarea=w==="textarea",this._isInFormField=!!f,this._isNativeSelect&&(this.controlType=g.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==null&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){let t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_dirtyCheckPlaceholder(){let t=this._getPlaceholder();if(t!==this._previousPlaceholder){let i=this._elementRef.nativeElement;this._previousPlaceholder=t,t?i.setAttribute("placeholder",t):i.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){P1.indexOf(this._type)>-1}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()&&!this.autofilled}get shouldLabelFloat(){if(this._isNativeSelect){let t=this._elementRef.nativeElement,i=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&i&&i.label)}else return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){let t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}static{this.\u0275fac=function(i){return new(i||n)(B(Pe),B(at),B(zi,10),B(fh,8),B(ph,8),B(Uy),B(M1,10),B(rE),B(J),B(zg,8))}}static{this.\u0275dir=be({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(i,r){i&1&&Ee("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),i&2&&(Oi("id",r.id)("disabled",r.disabled)("required",r.required),yt("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required)("id",r.id),Fe("mat-input-server",r._isServer)("mat-mdc-form-field-textarea-control",r._isInFormField&&r._isTextarea)("mat-mdc-form-field-input-control",r._isInFormField)("mdc-text-field__input",r._isInFormField)("mat-mdc-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[de.None,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],standalone:!0,features:[zt([{provide:jg,useExisting:n}]),un]})}}return n})(),bE=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ce({type:n})}static{this.\u0275inj=ae({imports:[Je,Ug,Ug,oE,Je]})}}return n})();function O1(n,e){if(n&1){let t=tn();G(0,"div"),ve(1,"br"),G(2,"mat-form-field",6)(3,"mat-label"),ge(4,"Edit topping"),H(),G(5,"input",1),vs("ngModelChange",function(r){ot(t);let o=xe(2);return _s(o.editedToppingName,r)||(o.editedToppingName=r),st(r)}),H()(),G(6,"button",7),Ee("click",function(){ot(t);let r=xe(2);return st(r.saveEditedTopping())}),ge(7,"Save"),H(),G(8,"button",8),Ee("click",function(){ot(t);let r=xe(2);return st(r.cancelEdit())}),ge(9,"Cancel"),H()()}if(n&2){let t=xe(2);le(5),bs("ngModel",t.editedToppingName)}}function V1(n,e){if(n&1){let t=tn();G(0,"div",9),ge(1),G(2,"button",10),Ee("click",function(){ot(t);let r=xe().$implicit,o=xe();return st(o.startEditing(r))}),ge(3,"Edit"),H(),G(4,"button",11),Ee("click",function(){ot(t);let r=xe().$implicit,o=xe();return st(o.deleteTopping(r.id))}),ge(5,"Delete"),H()()}if(n&2){let t=xe().$implicit;le(),Pr(" ",t.name," ")}}function L1(n,e){if(n&1&&(G(0,"li"),je(1,O1,10,1,"div",4)(2,V1,6,1,"div",5),H()),n&2){let t=e.$implicit,i=xe();le(),Ne("ngIf",i.editingToppingId===t.id),le(),Ne("ngIf",i.editingToppingId!==t.id)}}function j1(n,e){n&1&&(G(0,"p"),ge(1,"No toppings available."),H())}var vE=(()=>{class n{constructor(t){this.toppingsService=t,this.toppings=[],this.newTopping="",this.editingToppingId=null,this.editedToppingName=""}ngOnInit(){this.toppingsService.getToppings().subscribe(t=>{this.toppings=t})}addTopping(){if(!this.newTopping.trim()){alert("Topping name cannot be empty!");return}this.toppingsService.addTopping(this.newTopping.trim()).then(t=>{alert(t),this.newTopping=""}).catch(t=>alert(t))}deleteTopping(t){this.toppingsService.deleteTopping(t).catch(i=>console.error("Error deleting topping:",i))}startEditing(t){this.editingToppingId=t.id,this.editedToppingName=t.name}saveEditedTopping(){if(!this.editedToppingName.trim()){alert("Topping name cannot be empty!");return}this.toppingsService.updateTopping(this.editingToppingId,this.editedToppingName.trim()).then(t=>{alert(t),this.editingToppingId=null,this.editedToppingName=""}).catch(t=>alert(t))}cancelEdit(){this.editingToppingId=null,this.editedToppingName=""}static{this.\u0275fac=function(i){return new(i||n)(B(Yd))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-toppings"]],decls:12,vars:3,consts:[[1,"title-heading"],["matInput","","placeholder","Ex. Cheese",3,"ngModelChange","ngModel"],["mat-flat-button","",1,"add-button",3,"click"],[4,"ngFor","ngForOf"],[4,"ngIf"],["style","font-family: 'bradley hand', cursive; font-size: 20px;",4,"ngIf"],[2,"width","40%"],["mat-flat-button","",1,"save-button",3,"click"],["mat-flat-button","",1,"cancel-button",3,"click"],[2,"font-family","'bradley hand', cursive","font-size","20px"],["mat-flat-button","",1,"edit-button",3,"click"],["mat-flat-button","",1,"delete-button",3,"click"]],template:function(i,r){i&1&&(G(0,"h2",0),ge(1,"Manage Your Toppings"),H(),G(2,"div")(3,"mat-form-field")(4,"mat-label"),ge(5,"Enter topping name"),H(),G(6,"input",1),vs("ngModelChange",function(s){return _s(r.newTopping,s)||(r.newTopping=s),s}),H()(),G(7,"button",2),Ee("click",function(){return r.addTopping()}),ge(8,"Add Topping"),H()(),G(9,"ul"),je(10,L1,3,2,"li",3),H(),je(11,j1,2,0,"p",4)),i&2&&(le(6),bs("ngModel",r.newTopping),le(4),Ne("ngForOf",r.toppings),le(),Ne("ngIf",r.toppings.length===0))},dependencies:[kc,Cc,Vr,Kc,Rs,Xd,eu,Jd,Uo],styles:[".title-heading[_ngcontent-%COMP%]{font-family:Brush Script MT,cursive;font-size:50px;margin-bottom:5%}.mat-flat-button[_ngcontent-%COMP%]{margin-left:5px;background-color:#d3630e;color:#fff;font-weight:700}.save-button[_ngcontent-%COMP%]{margin-left:15px;margin-right:5px;background-color:#d3630e!important;font-size:12px;width:35px;height:25px}.cancel-button[_ngcontent-%COMP%]{background-color:#0429cc!important;font-size:12px;width:35px;height:25px;color:#fff!important}.edit-button[_ngcontent-%COMP%]{margin-left:15px;margin-right:10px;background-color:#d3630e!important;font-size:10px;width:30px;height:20px}.delete-button[_ngcontent-%COMP%]{background-color:#c90000!important;font-size:10px;width:30px;height:20px;color:#fff!important}.add-button[_ngcontent-%COMP%]{margin-left:15px;background-color:#d3630e!important}"]})}}return n})();var yE=(()=>{class n{constructor(t){this.firestore=t,this.collectionName="pizzas"}getPizzas(){return this.firestore.collection(this.collectionName).valueChanges({idField:"id"})}addPizza(t,i){return k(this,null,function*(){if(yield this.checkIfPizzaExists(t))return Promise.reject("Pizza with the same name already exists!");let o=this.firestore.createId();return this.firestore.collection(this.collectionName).doc(o).set({id:o,name:t,toppings:i}).then(()=>"Pizza added successfully!")})}updatePizza(t,i,r){return k(this,null,function*(){return(yield this.checkIfPizzaExists(i,t))?Promise.reject("Pizza with the same name already exists!"):this.firestore.collection(this.collectionName).doc(t).update({name:i,toppings:r}).then(()=>"Pizza updated successfully!")})}checkIfPizzaExists(t,i){return k(this,null,function*(){let o=(yield cc(this.firestore.collection(this.collectionName,s=>s.where("name","==",t.trim())).get())).docs.map(s=>s.data());return i?o.some(s=>s.id!==i):o.length>0})}deletePizza(t){return this.firestore.collection(this.collectionName).doc(t).delete()}static{this.\u0275fac=function(i){return new(i||n)(F(qa))}}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var B1=["input"],q1=["label"],$1=["*"],G1=new K("mat-checkbox-default-options",{providedIn:"root",factory:wE});function wE(){return{color:"accent",clickAction:"check-indeterminate"}}var Tt=function(n){return n[n.Init=0]="Init",n[n.Checked=1]="Checked",n[n.Unchecked=2]="Unchecked",n[n.Indeterminate=3]="Indeterminate",n}(Tt||{}),H1={provide:Hc,useExisting:Fi(()=>tu),multi:!0},Bg=class{},K1=0,xE=wE(),tu=(()=>{class n{focus(){this._inputElement.nativeElement.focus()}_createChangeEvent(t){let i=new Bg;return i.source=this,i.checked=t,i}_getAnimationTargetElement(){return this._inputElement?.nativeElement}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(t,i,r,o,s,c){this._elementRef=t,this._changeDetectorRef=i,this._ngZone=r,this._animationMode=s,this._options=c,this._animationClasses={uncheckedToChecked:"mdc-checkbox--anim-unchecked-checked",uncheckedToIndeterminate:"mdc-checkbox--anim-unchecked-indeterminate",checkedToUnchecked:"mdc-checkbox--anim-checked-unchecked",checkedToIndeterminate:"mdc-checkbox--anim-checked-indeterminate",indeterminateToChecked:"mdc-checkbox--anim-indeterminate-checked",indeterminateToUnchecked:"mdc-checkbox--anim-indeterminate-unchecked"},this.ariaLabel="",this.ariaLabelledby=null,this.labelPosition="after",this.name=null,this.change=new dt,this.indeterminateChange=new dt,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=Tt.Init,this._controlValueAccessorChangeFn=()=>{},this._validatorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||xE,this.color=this._options.color||xE.color,this.tabIndex=parseInt(o)||0,this.id=this._uniqueId=`mat-mdc-checkbox-${++K1}`}ngOnChanges(t){t.required&&this._validatorChangeFn()}ngAfterViewInit(){this._syncIndeterminate(this._indeterminate)}get checked(){return this._checked}set checked(t){t!=this.checked&&(this._checked=t,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){t!==this.disabled&&(this._disabled=t,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(t){let i=t!=this._indeterminate;this._indeterminate=t,i&&(this._indeterminate?this._transitionCheckState(Tt.Indeterminate):this._transitionCheckState(this.checked?Tt.Checked:Tt.Unchecked),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(t){this.checked=!!t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}validate(t){return this.required&&t.value!==!0?{required:!0}:null}registerOnValidatorChange(t){this._validatorChangeFn=t}_transitionCheckState(t){let i=this._currentCheckState,r=this._getAnimationTargetElement();if(!(i===t||!r)&&(this._currentAnimationClass&&r.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(i,t),this._currentCheckState=t,this._currentAnimationClass.length>0)){r.classList.add(this._currentAnimationClass);let o=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{r.classList.remove(o)},1e3)})}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.checked),this.change.emit(this._createChangeEvent(this.checked)),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_handleInputClick(){let t=this._options?.clickAction;!this.disabled&&t!=="noop"?(this.indeterminate&&t!=="check"&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?Tt.Checked:Tt.Unchecked),this._emitChangeEvent()):!this.disabled&&t==="noop"&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate)}_onInteractionEvent(t){t.stopPropagation()}_onBlur(){Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}_getAnimationClassForCheckStateTransition(t,i){if(this._animationMode==="NoopAnimations")return"";switch(t){case Tt.Init:if(i===Tt.Checked)return this._animationClasses.uncheckedToChecked;if(i==Tt.Indeterminate)return this._checked?this._animationClasses.checkedToIndeterminate:this._animationClasses.uncheckedToIndeterminate;break;case Tt.Unchecked:return i===Tt.Checked?this._animationClasses.uncheckedToChecked:this._animationClasses.uncheckedToIndeterminate;case Tt.Checked:return i===Tt.Unchecked?this._animationClasses.checkedToUnchecked:this._animationClasses.checkedToIndeterminate;case Tt.Indeterminate:return i===Tt.Checked?this._animationClasses.indeterminateToChecked:this._animationClasses.indeterminateToUnchecked}return""}_syncIndeterminate(t){let i=this._inputElement;i&&(i.nativeElement.indeterminate=t)}_onInputClick(){this._handleInputClick()}_onTouchTargetClick(){this._handleInputClick(),this.disabled||this._inputElement.nativeElement.focus()}_preventBubblingFromLabel(t){t.target&&this._labelElement.nativeElement.contains(t.target)&&t.stopPropagation()}static{this.\u0275fac=function(i){return new(i||n)(B(Pe),B(mn),B(J),fc("tabindex"),B(en,8),B(G1,8))}}static{this.\u0275cmp=$e({type:n,selectors:[["mat-checkbox"]],viewQuery:function(i,r){if(i&1&&(jt(B1,5),jt(q1,5),jt(vl,5)),i&2){let o;Ke(o=We())&&(r._inputElement=o.first),Ke(o=We())&&(r._labelElement=o.first),Ke(o=We())&&(r.ripple=o.first)}},hostAttrs:[1,"mat-mdc-checkbox"],hostVars:14,hostBindings:function(i,r){i&2&&(Oi("id",r.id),yt("tabindex",null)("aria-label",null)("aria-labelledby",null),yc(r.color?"mat-"+r.color:"mat-accent"),Fe("_mat-animation-noopable",r._animationMode==="NoopAnimations")("mdc-checkbox--disabled",r.disabled)("mat-mdc-checkbox-disabled",r.disabled)("mat-mdc-checkbox-checked",r.checked))},inputs:{ariaLabel:[de.None,"aria-label","ariaLabel"],ariaLabelledby:[de.None,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[de.None,"aria-describedby","ariaDescribedby"],id:"id",required:[de.HasDecoratorInputTransform,"required","required",wt],labelPosition:"labelPosition",name:"name",value:"value",disableRipple:[de.HasDecoratorInputTransform,"disableRipple","disableRipple",wt],tabIndex:[de.HasDecoratorInputTransform,"tabIndex","tabIndex",t=>t==null?void 0:$u(t)],color:"color",checked:[de.HasDecoratorInputTransform,"checked","checked",wt],disabled:[de.HasDecoratorInputTransform,"disabled","disabled",wt],indeterminate:[de.HasDecoratorInputTransform,"indeterminate","indeterminate",wt]},outputs:{change:"change",indeterminateChange:"indeterminateChange"},exportAs:["matCheckbox"],standalone:!0,features:[zt([H1,{provide:Ss,useExisting:n,multi:!0}]),Nn,un,xt],ngContentSelectors:$1,decls:15,vars:19,consts:[["checkbox",""],["input",""],["label",""],["mat-internal-form-field","",3,"click","labelPosition"],[1,"mdc-checkbox"],[1,"mat-mdc-checkbox-touch-target",3,"click"],["type","checkbox",1,"mdc-checkbox__native-control",3,"blur","click","change","checked","indeterminate","disabled","id","required","tabIndex"],[1,"mdc-checkbox__ripple"],[1,"mdc-checkbox__background"],["focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mdc-checkbox__checkmark"],["fill","none","d","M1.73,12.91 8.1,19.28 22.79,4.59",1,"mdc-checkbox__checkmark-path"],[1,"mdc-checkbox__mixedmark"],["mat-ripple","",1,"mat-mdc-checkbox-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-label",3,"for"]],template:function(i,r){if(i&1){let o=tn();Ht(),G(0,"div",3),Ee("click",function(c){return ot(o),st(r._preventBubblingFromLabel(c))}),G(1,"div",4,0)(3,"div",5),Ee("click",function(){return ot(o),st(r._onTouchTargetClick())}),H(),G(4,"input",6,1),Ee("blur",function(){return ot(o),st(r._onBlur())})("click",function(){return ot(o),st(r._onInputClick())})("change",function(c){return ot(o),st(r._onInteractionEvent(c))}),H(),ve(6,"div",7),G(7,"div",8),n_(),G(8,"svg",9),ve(9,"path",10),H(),i_(),ve(10,"div",11),H(),ve(11,"div",12),H(),G(12,"label",13,2),Oe(14),H()()}if(i&2){let o=gs(2);Ne("labelPosition",r.labelPosition),le(4),Fe("mdc-checkbox--selected",r.checked),Ne("checked",r.checked)("indeterminate",r.indeterminate)("disabled",r.disabled)("id",r.inputId)("required",r.required)("tabIndex",r.disabled?-1:r.tabIndex),yt("aria-label",r.ariaLabel||null)("aria-labelledby",r.ariaLabelledby)("aria-describedby",r.ariaDescribedby)("aria-checked",r.indeterminate?"mixed":null)("name",r.name)("value",r.value),le(7),Ne("matRippleTrigger",o)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0),le(),Ne("for",r.inputId)}},dependencies:[vl,Gy],styles:['.mdc-touch-target-wrapper{display:inline}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:mdc-animation-deceleration-curve-timing-function;transform:rotate(-45deg);opacity:0}to{transform:rotate(0deg);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}32.8%,100%{transform:scaleX(0);opacity:0}}.mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom}.mdc-checkbox[hidden]{display:none}.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%}@media screen and (forced-colors: active){.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{border-color:CanvasText}}.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{border-color:CanvasText}}@media all and (-ms-high-contrast: none){.mdc-checkbox .mdc-checkbox__focus-ring{display:none}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-checkbox__mixedmark{margin:0 1px}}.mdc-checkbox--disabled{cursor:default;pointer-events:none}.mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:rgba(0,0,0,0);pointer-events:none;will-change:background-color,border-color;transition:background-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0;transition:opacity 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox--upgraded .mdc-checkbox__checkmark{opacity:1}.mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1);stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0deg);border-width:1px;border-style:solid;opacity:0;transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background,.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear 0s;transition:none}.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark 500ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark 500ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark 300ms linear 0s;transition:none}.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background{transition:border-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit}.mdc-checkbox__native-control:disabled{cursor:default;pointer-events:none}.mdc-checkbox--touch{margin:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2)}.mdc-checkbox--touch .mdc-checkbox__native-control{top:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);right:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);left:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);width:var(--mdc-checkbox-state-layer-size);height:var(--mdc-checkbox-state-layer-size)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark{transition:opacity 180ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 180ms 0ms cubic-bezier(0, 0, 0.2, 1);opacity:1}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0;transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__mixedmark,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0deg);opacity:1}.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark-path,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__mixedmark{transition:none}.mdc-checkbox{padding:calc((var(--mdc-checkbox-state-layer-size) - 18px) / 2);margin:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2)}.mdc-checkbox .mdc-checkbox__native-control[disabled]:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color);background-color:transparent}.mdc-checkbox .mdc-checkbox__native-control[disabled]:checked~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control[disabled]:indeterminate~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true][disabled]~.mdc-checkbox__background{border-color:transparent;background-color:var(--mdc-checkbox-disabled-selected-icon-color)}.mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:var(--mdc-checkbox-selected-checkmark-color)}.mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-selected-checkmark-color)}.mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:var(--mdc-checkbox-disabled-selected-checkmark-color)}.mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-disabled-selected-checkmark-color)}.mdc-checkbox .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-icon-color);background-color:transparent}.mdc-checkbox .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-icon-color);background-color:var(--mdc-checkbox-selected-icon-color)}@keyframes mdc-checkbox-fade-in-background-8A000000FFF4433600000000FFF44336{0%{border-color:var(--mdc-checkbox-unselected-icon-color);background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-icon-color);background-color:var(--mdc-checkbox-selected-icon-color)}}@keyframes mdc-checkbox-fade-out-background-8A000000FFF4433600000000FFF44336{0%,80%{border-color:var(--mdc-checkbox-selected-icon-color);background-color:var(--mdc-checkbox-selected-icon-color)}100%{border-color:var(--mdc-checkbox-unselected-icon-color);background-color:transparent}}.mdc-checkbox.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-8A000000FFF4433600000000FFF44336}.mdc-checkbox.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-8A000000FFF4433600000000FFF44336}.mdc-checkbox:hover .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-hover-icon-color);background-color:transparent}.mdc-checkbox:hover .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox:hover .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mdc-checkbox:hover .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-hover-icon-color);background-color:var(--mdc-checkbox-selected-hover-icon-color)}@keyframes mdc-checkbox-fade-in-background-FF212121FFF4433600000000FFF44336{0%{border-color:var(--mdc-checkbox-unselected-hover-icon-color);background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-hover-icon-color);background-color:var(--mdc-checkbox-selected-hover-icon-color)}}@keyframes mdc-checkbox-fade-out-background-FF212121FFF4433600000000FFF44336{0%,80%{border-color:var(--mdc-checkbox-selected-hover-icon-color);background-color:var(--mdc-checkbox-selected-hover-icon-color)}100%{border-color:var(--mdc-checkbox-unselected-hover-icon-color);background-color:transparent}}.mdc-checkbox:hover.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox:hover.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-FF212121FFF4433600000000FFF44336}.mdc-checkbox:hover.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox:hover.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-FF212121FFF4433600000000FFF44336}.mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-pressed-icon-color);background-color:transparent}.mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-pressed-icon-color);background-color:var(--mdc-checkbox-selected-pressed-icon-color)}@keyframes mdc-checkbox-fade-in-background-8A000000FFF4433600000000FFF44336{0%{border-color:var(--mdc-checkbox-unselected-pressed-icon-color);background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-pressed-icon-color);background-color:var(--mdc-checkbox-selected-pressed-icon-color)}}@keyframes mdc-checkbox-fade-out-background-8A000000FFF4433600000000FFF44336{0%,80%{border-color:var(--mdc-checkbox-selected-pressed-icon-color);background-color:var(--mdc-checkbox-selected-pressed-icon-color)}100%{border-color:var(--mdc-checkbox-unselected-pressed-icon-color);background-color:transparent}}.mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-8A000000FFF4433600000000FFF44336}.mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-8A000000FFF4433600000000FFF44336}.mdc-checkbox .mdc-checkbox__background{top:calc((var(--mdc-checkbox-state-layer-size) - 18px) / 2);left:calc((var(--mdc-checkbox-state-layer-size) - 18px) / 2)}.mdc-checkbox .mdc-checkbox__native-control{top:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);right:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);left:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);width:var(--mdc-checkbox-state-layer-size);height:var(--mdc-checkbox-state-layer-size)}.mdc-checkbox .mdc-checkbox__native-control:enabled:focus:focus:not(:checked):not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-focus-icon-color)}.mdc-checkbox .mdc-checkbox__native-control:enabled:focus:checked~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control:enabled:focus:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-focus-icon-color);background-color:var(--mdc-checkbox-selected-focus-icon-color)}.mdc-checkbox:hover .mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-hover-state-layer-opacity);background-color:var(--mdc-checkbox-unselected-hover-state-layer-color)}.mdc-checkbox:hover .mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-hover-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-focus-state-layer-opacity);background-color:var(--mdc-checkbox-unselected-focus-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-focus-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-pressed-state-layer-opacity);background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color)}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-hover-state-layer-opacity);background-color:var(--mdc-checkbox-selected-hover-state-layer-color)}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-hover-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-focus-state-layer-opacity);background-color:var(--mdc-checkbox-selected-focus-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-focus-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-pressed-state-layer-opacity);background-color:var(--mdc-checkbox-selected-pressed-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-pressed-state-layer-color)}.mat-mdc-checkbox{display:inline-block;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-checkbox .mdc-checkbox__background{-webkit-print-color-adjust:exact;color-adjust:exact}.mat-mdc-checkbox._mat-animation-noopable *,.mat-mdc-checkbox._mat-animation-noopable *::before{transition:none !important;animation:none !important}.mat-mdc-checkbox label{cursor:pointer}.mat-mdc-checkbox.mat-mdc-checkbox-disabled label{cursor:default;color:var(--mat-checkbox-disabled-label-color)}.mat-mdc-checkbox label:empty{display:none}.cdk-high-contrast-active .mat-mdc-checkbox.mat-mdc-checkbox-disabled{opacity:.5}.cdk-high-contrast-active .mat-mdc-checkbox .mdc-checkbox__checkmark{--mdc-checkbox-selected-checkmark-color: CanvasText;--mdc-checkbox-disabled-selected-checkmark-color: CanvasText}.mat-mdc-checkbox .mdc-checkbox__ripple{opacity:0}.mat-mdc-checkbox-ripple,.mdc-checkbox__ripple{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-checkbox-ripple:not(:empty),.mdc-checkbox__ripple:not(:empty){transform:translateZ(0)}.mat-mdc-checkbox-ripple .mat-ripple-element{opacity:.1}.mat-mdc-checkbox-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-checkbox-touch-target-display)}.mat-mdc-checkbox-ripple::before{border-radius:50%}.mdc-checkbox__native-control:focus~.mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}}return n})();var IE=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ce({type:n})}static{this.\u0275inj=ae({imports:[tu,Je,Je]})}}return n})();function Q1(n,e){if(n&1){let t=tn();G(0,"div",9)(1,"label")(2,"mat-checkbox",10),Ee("change",function(){let r=ot(t).$implicit,o=xe();return st(o.toggleTopping(r.id))}),H(),ge(3),H()()}if(n&2){let t=e.$implicit,i=xe();le(2),Ne("checked",i.selectedToppings.includes(t.id)),le(),Pr(" ",t.name," ")}}function Y1(n,e){if(n&1){let t=tn();G(0,"button",11),Ee("click",function(){ot(t);let r=xe();return st(r.clearForm())}),ge(1,"Cancel"),H()}}function X1(n,e){if(n&1){let t=tn();G(0,"li")(1,"strong",12),ge(2),H(),ge(3," - "),G(4,"i")(5,"b"),ge(6,"Toppings: "),H()(),G(7,"small",13),ge(8),H(),ve(9,"br"),G(10,"button",14),Ee("click",function(){let r=ot(t).$implicit,o=xe();return st(o.editPizza(r))}),ge(11,"Edit"),H(),G(12,"button",15),Ee("click",function(){let r=ot(t).$implicit,o=xe();return st(o.deletePizza(r.id))}),ge(13,"Delete"),H(),ve(14,"br")(15,"br"),H()}if(n&2){let t=e.$implicit,i=xe();le(2),Mr(t.name),le(6),Mr(i.getToppingNames(t.toppings))}}var EE=(()=>{class n{constructor(t,i){this.pizzasService=t,this.toppingsService=i,this.pizzas=[],this.toppingsList=[],this.selectedToppings=[],this.newPizzaName="",this.editingPizzaId=null}ngOnInit(){this.pizzasService.getPizzas().subscribe(t=>{this.pizzas=t}),this.toppingsService.getToppings().subscribe(t=>{this.toppingsList=t})}savePizza(){if(!this.newPizzaName.trim()){alert("Pizza name cannot be empty!");return}this.editingPizzaId?this.pizzasService.updatePizza(this.editingPizzaId,this.newPizzaName.trim(),this.selectedToppings).then(t=>{alert(t),this.clearForm()}).catch(t=>alert(t)):this.pizzasService.addPizza(this.newPizzaName.trim(),this.selectedToppings).then(t=>{alert(t),this.clearForm()}).catch(t=>alert(t))}editPizza(t){this.editingPizzaId=t.id,this.newPizzaName=t.name,this.selectedToppings=[...t.toppings]}deletePizza(t){this.pizzasService.deletePizza(t).then(()=>{alert("Pizza deleted successfully!")})}toggleTopping(t){let i=this.selectedToppings.indexOf(t);i>-1?this.selectedToppings.splice(i,1):this.selectedToppings.push(t)}getToppingNames(t){let i=t.map(r=>{let o=this.toppingsList.find(s=>s.id===r);return o?o.name:null}).filter(r=>r!==null);return i.length>0?i.join(", "):"No Toppings"}clearForm(){this.newPizzaName="",this.selectedToppings=[],this.editingPizzaId=null}static{this.\u0275fac=function(i){return new(i||n)(B(yE),B(Yd))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-pizzas"]],decls:23,vars:6,consts:[[1,"title-header-pizza"],[2,"margin","5px"],["matInput","","placeholder","Enter pizza name",1,"form-input",3,"ngModelChange","ngModel"],["class","topping-checkbox",4,"ngFor","ngForOf"],["mat-flat-button","",1,"add-update-button",3,"click"],["mat-flat-button","","class","cancel-button",3,"click",4,"ngIf"],[1,"divider-style"],[1,"created-title"],[4,"ngFor","ngForOf"],[1,"topping-checkbox"],[2,"transform","scale(0.8)","transform-origin","center left",3,"change","checked"],["mat-flat-button","",1,"cancel-button",3,"click"],[2,"font-family","'Brush Script MT', cursive","font-size","30px"],[1,"topping-list"],["mat-flat-button","",1,"designed-pizza-edit",3,"click"],["mat-flat-button","",1,"designed-pizza-delete",3,"click"]],template:function(i,r){i&1&&(G(0,"h2",0),ge(1,"Design Your Pizzas"),H(),G(2,"div")(3,"h3",1),ge(4),H(),G(5,"mat-form-field")(6,"mat-label"),ge(7,"Enter pizza name"),H(),G(8,"input",2),vs("ngModelChange",function(s){return _s(r.newPizzaName,s)||(r.newPizzaName=s),s}),H()(),ve(9,"br"),G(10,"h4",1),ge(11,"Select Toppings:"),H(),je(12,Q1,4,2,"div",3),ve(13,"br"),G(14,"button",4),Ee("click",function(){return r.savePizza()}),ge(15),H(),je(16,Y1,2,0,"button",5),H(),ve(17,"br")(18,"mat-divider",6),G(19,"h3",7),ge(20,"Your Pizzas Created"),H(),G(21,"ul"),je(22,X1,16,2,"li",8),H()),i&2&&(le(4),Mr(r.editingPizzaId?"Edit Pizza":"Add New Pizza"),le(4),bs("ngModel",r.newPizzaName),le(4),Ne("ngForOf",r.toppingsList),le(3),Pr(" ",r.editingPizzaId?"Update Pizza":"Add Pizza"," "),le(),Ne("ngIf",r.editingPizzaId),le(6),Ne("ngForOf",r.pizzas))},dependencies:[kc,Cc,Vr,Kc,Rs,yl,Xd,eu,Jd,Uo,tu],styles:[".title-header-pizza[_ngcontent-%COMP%]{font-family:Brush Script MT,cursive;font-size:50px;margin-bottom:5%}.designed-pizza-edit[_ngcontent-%COMP%]{margin-top:5px;margin-right:5px;margin-left:15px;background-color:#d3630e!important;font-size:12px;width:35px;height:25px}.designed-pizza-delete[_ngcontent-%COMP%]{margin-top:5px;background-color:#c90000!important;font-size:12px;width:35px;height:25px;color:#fff!important}.cancel-button[_ngcontent-%COMP%]{background-color:#0429cc!important;color:#fff!important}.add-update-button[_ngcontent-%COMP%]{margin-left:15px;margin-right:5px;background-color:#d3630e!important}.divider-style[_ngcontent-%COMP%]{width:auto;margin-right:10%;border-top-width:3px;border-color:#d3630e!important;margin-top:5%}.topping-checkbox[_ngcontent-%COMP%]{font-family:bradley hand,cursive;font-size:17px;margin-bottom:3px}.topping-list[_ngcontent-%COMP%]{font-family:bradley hand,cursive;font-size:16px}.created-title[_ngcontent-%COMP%]{font-family:Brush Script MT,cursive;font-size:40px;margin-bottom:5%}"]})}}return n})();var TE=(()=>{class n{constructor(){this.title="pizza-manager"}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=$e({type:n,selectors:[["app-root"]],decls:12,vars:0,consts:[[1,"card-wrapper"],["ngSkipHydration","","appearance","outlined",1,"manager-card"],[1,"pizza-header-style"],["mat-card-avatar","",1,"pizza-header-image"],[1,"main-title"],[1,"main-subtitle"],[1,"topping-alignment"],[1,"divider-style-transition"],[1,"pizza-alignment"]],template:function(i,r){i&1&&(G(0,"div",0)(1,"mat-card",1)(2,"mat-card-header",2),ve(3,"div",3),G(4,"mat-card-title",4),ge(5,"Pizza Designer App"),H(),G(6,"mat-card-subtitle",5),ge(7,"Design Your Own Pizza!"),H()(),G(8,"div"),ve(9,"app-toppings",6)(10,"mat-divider",7)(11,"app-pizzas",8),H()()())},dependencies:[Hy,Yy,Qy,Wy,Ky,yl,vE,EE],styles:[".card-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:flex-start;padding:1rem;width:100%;box-sizing:border-box}.main-title[_ngcontent-%COMP%]{font-family:Brush Script MT,cursive;font-size:40px;font-weight:700}.main-subtitle[_ngcontent-%COMP%]{font-size:medium;font-weight:700}.manager-card[_ngcontent-%COMP%]{max-width:100%;display:flex;margin:5% auto 10%;width:auto;background-color:#efb080;box-shadow:50px 50px 50px #000;border-radius:16px}.topping-alignment[_ngcontent-%COMP%]{display:block;margin-left:10%;width:75%}.pizza-alignment[_ngcontent-%COMP%]{display:block;margin-left:10%;margin-right:10%;width:auto}.pizza-header-style[_ngcontent-%COMP%]{background-color:#d3630e;display:flex;justify-content:center;align-items:center;border-top-left-radius:16px;border-top-right-radius:16px}.pizza-body-style[_ngcontent-%COMP%]{background-color:#efb080}.pizza-header-image[_ngcontent-%COMP%]{background-image:url(/assets/pizza-avatar.png);background-size:cover;width:80px;height:80px;border-radius:50%}.divider-style-transition[_ngcontent-%COMP%]{width:auto;margin:7% 10%;border-top-width:3px;border-color:#d3630e!important}"]})}}return n})();var J1="@",eM=(()=>{class n{constructor(t,i,r,o,s){this.doc=t,this.delegate=i,this.zone=r,this.animationType=o,this.moduleImpl=s,this._rendererFactoryPromise=null,this.scheduler=U(s_,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-ESGA2SZJ.js")).catch(i=>{throw new Ae(5300,!1)}).then(({\u0275createEngine:i,\u0275AnimationRendererFactory:r})=>{this._engine=i(this.animationType,this.doc,this.scheduler);let o=new r(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(t,i){let r=this.delegate.createRenderer(t,i);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let o=new qg(r);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(s=>{let c=s.createRenderer(t,i);o.use(c)}).catch(s=>{o.use(r)}),o}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static{this.\u0275fac=function(i){Rr()}}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac})}}return n})(),qg=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,i,r){this.delegate.insertBefore(e,t,i,r)}removeChild(e,t,i){this.delegate.removeChild(e,t,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){this.shouldReplay(t)&&this.replay.push(r=>r.setProperty(e,t,i)),this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.shouldReplay(t)&&this.replay.push(r=>r.listen(e,t,i)),this.delegate.listen(e,t,i)}shouldReplay(e){return this.replay!==null&&e.startsWith(J1)}};function AE(n="animations"){return vc("NgAsyncAnimations"),Cr([{provide:bc,useFactory:(e,t,i)=>new eM(e,t,i,n),deps:[Se,Fc,J]},{provide:en,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var kE={production:!0,firebaseConfig:{apiKey:"YOUR_API_KEY",authDomain:"YOUR_PROJECT_ID.firebaseapp.com",projectId:"YOUR_PROJECT_ID",storageBucket:"YOUR_PROJECT_ID.appspot.com",messagingSenderId:"YOUR_MESSAGING_SENDER_ID",appId:"YOUR_APP_ID"}};var CE=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ce({type:n,bootstrap:[TE]})}static{this.\u0275inj=ae({providers:[iv(),AE()],imports:[tv,vy,Sv,Xy,Zy,tE,bE,IE,p0.initializeApp(kE.firebaseConfig),ZI]})}}return n})();ev().bootstrapModule(CE).catch(n=>console.error(n));
